2025-11-16 18:52:14,739 - __main__ - INFO - ================================================================================
2025-11-16 18:52:14,740 - __main__ - INFO - D…BUT DE L'ENTRAŒNEMENT DU MOD»LE XGBOOST
2025-11-16 18:52:14,740 - __main__ - INFO - ================================================================================
2025-11-16 18:52:14,759 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-16 18:52:14,759 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/clustering_results.csv', 'indicateurs_path': '../data/Indicateurs.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': '/results/models'}
2025-11-16 18:52:14,760 - __main__ - INFO - Chargement des donnÈes...
2025-11-16 18:52:14,796 - __main__ - INFO - Clusters chargÈs: (1415, 65)
2025-11-16 18:52:14,877 - __main__ - INFO - Indicateurs chargÈs: (86315, 15)
2025-11-16 18:52:14,877 - __main__ - INFO - PrÈparation des donnÈes...
2025-11-16 18:52:14,941 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-16 18:52:14,944 - __main__ - INFO - DataFrame fusionnÈ: (1415, 126)
2025-11-16 18:52:15,746 - __main__ - INFO - Features PM ajoutÈes: (1415, 133)
2025-11-16 18:52:15,750 - __main__ - INFO - CrÈation des features et target...
2025-11-16 18:52:15,750 - __main__ - INFO - Nombre de features: 64
2025-11-16 18:52:15,753 - __main__ - INFO - X shape: (1415, 64), y shape: (1415,)
2025-11-16 18:52:15,753 - __main__ - INFO - EntraÓnement du modËle XGBoost...
2025-11-16 18:52:15,758 - __main__ - INFO - Train: (1132, 64), Test: (283, 64)
2025-11-16 18:52:18,109 - __main__ - INFO - ModËle entraÓnÈ avec succËs
2025-11-16 18:52:18,132 - __main__ - INFO - …valuation du modËle...
2025-11-16 18:52:19,829 - __main__ - INFO - Sauvegarde locale du modËle dans /results/models...
2025-11-16 18:52:19,878 - __main__ - INFO - Sauvegarde dans Azure Blob Storage (container: prediction-demande)...
2025-11-16 18:52:19,912 - azure.core.pipeline.policies.http_logging_policy - INFO - Request URL: 'https://airm.blob.core.windows.net/prediction-demande?restype=REDACTED'
Request method: 'GET'
Request headers:
    'x-ms-version': 'REDACTED'
    'Accept': 'application/xml'
    'User-Agent': 'azsdk-python-storage-blob/12.26.0 Python/3.13.9 (Windows-11-10.0.26200-SP0)'
    'x-ms-date': 'REDACTED'
    'x-ms-client-request-id': 'ff56c7cc-c314-11f0-8599-40c73c3d51f2'
    'Authorization': 'REDACTED'
No body was attached to the request
2025-11-16 18:52:20,499 - azure.core.pipeline.policies.http_logging_policy - INFO - Response status: 404
Response headers:
    'Content-Length': '225'
    'Content-Type': 'application/xml'
    'Vary': 'REDACTED'
    'Server': 'Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0'
    'x-ms-request-id': '6752758d-401e-007e-8021-571e46000000'
    'x-ms-client-request-id': 'ff56c7cc-c314-11f0-8599-40c73c3d51f2'
    'x-ms-version': 'REDACTED'
    'x-ms-error-code': 'ContainerNotFound'
    'Date': 'Sun, 16 Nov 2025 17:52:20 GMT'
2025-11-16 18:52:20,501 - azure.core.pipeline.policies.http_logging_policy - INFO - Request URL: 'https://airm.blob.core.windows.net/prediction-demande?restype=REDACTED'
Request method: 'PUT'
Request headers:
    'x-ms-version': 'REDACTED'
    'Accept': 'application/xml'
    'User-Agent': 'azsdk-python-storage-blob/12.26.0 Python/3.13.9 (Windows-11-10.0.26200-SP0)'
    'x-ms-date': 'REDACTED'
    'x-ms-client-request-id': 'ffb09465-c314-11f0-9c73-40c73c3d51f2'
    'Authorization': 'REDACTED'
No body was attached to the request
2025-11-16 18:52:20,520 - azure.core.pipeline.policies.http_logging_policy - INFO - Response status: 201
Response headers:
    'Content-Length': '0'
    'Last-Modified': 'Sun, 16 Nov 2025 17:52:20 GMT'
    'ETag': '"0x8DE2538E40FA941"'
    'Server': 'Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0'
    'x-ms-request-id': '6752759c-401e-007e-0c21-571e46000000'
    'x-ms-client-request-id': 'ffb09465-c314-11f0-9c73-40c73c3d51f2'
    'x-ms-version': 'REDACTED'
    'Date': 'Sun, 16 Nov 2025 17:52:20 GMT'
2025-11-16 18:52:20,521 - __main__ - INFO - Container prediction-demande crÈÈ
2025-11-16 18:52:20,526 - azure.core.pipeline.policies.http_logging_policy - INFO - Request URL: 'https://airm.blob.core.windows.net/prediction-demande/models/20251116_185220/xgb_to_predictor.joblib'
Request method: 'PUT'
Request headers:
    'Content-Length': '2605191'
    'x-ms-blob-type': 'REDACTED'
    'x-ms-version': 'REDACTED'
    'Content-Type': 'application/octet-stream'
    'Accept': 'application/xml'
    'User-Agent': 'azsdk-python-storage-blob/12.26.0 Python/3.13.9 (Windows-11-10.0.26200-SP0)'
    'x-ms-date': 'REDACTED'
    'x-ms-client-request-id': 'ffb46350-c314-11f0-ad94-40c73c3d51f2'
    'Authorization': 'REDACTED'
A body is sent with the request
2025-11-16 18:52:20,960 - azure.core.pipeline.policies.http_logging_policy - INFO - Response status: 201
Response headers:
    'Content-Length': '0'
    'Content-MD5': 'REDACTED'
    'Last-Modified': 'Sun, 16 Nov 2025 17:52:21 GMT'
    'ETag': '"0x8DE2538E4536008"'
    'Server': 'Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0'
    'x-ms-request-id': '675275a6-401e-007e-1521-571e46000000'
    'x-ms-client-request-id': 'ffb46350-c314-11f0-ad94-40c73c3d51f2'
    'x-ms-version': 'REDACTED'
    'x-ms-content-crc64': 'REDACTED'
    'x-ms-request-server-encrypted': 'REDACTED'
    'Date': 'Sun, 16 Nov 2025 17:52:21 GMT'
2025-11-16 18:52:20,965 - azure.core.pipeline.policies.http_logging_policy - INFO - Request URL: 'https://airm.blob.core.windows.net/prediction-demande/models/20251116_185220/xgb_scaler.joblib'
Request method: 'PUT'
Request headers:
    'Content-Length': '2919'
    'x-ms-blob-type': 'REDACTED'
    'x-ms-version': 'REDACTED'
    'Content-Type': 'application/octet-stream'
    'Accept': 'application/xml'
    'User-Agent': 'azsdk-python-storage-blob/12.26.0 Python/3.13.9 (Windows-11-10.0.26200-SP0)'
    'x-ms-date': 'REDACTED'
    'x-ms-client-request-id': 'fff7729b-c314-11f0-badd-40c73c3d51f2'
    'Authorization': 'REDACTED'
A body is sent with the request
2025-11-16 18:52:20,979 - azure.core.pipeline.policies.http_logging_policy - INFO - Response status: 201
Response headers:
    'Content-Length': '0'
    'Content-MD5': 'REDACTED'
    'Last-Modified': 'Sun, 16 Nov 2025 17:52:21 GMT'
    'ETag': '"0x8DE2538E456DE96"'
    'Server': 'Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0'
    'x-ms-request-id': '67527631-401e-007e-0d21-571e46000000'
    'x-ms-client-request-id': 'fff7729b-c314-11f0-badd-40c73c3d51f2'
    'x-ms-version': 'REDACTED'
    'x-ms-content-crc64': 'REDACTED'
    'x-ms-request-server-encrypted': 'REDACTED'
    'Date': 'Sun, 16 Nov 2025 17:52:21 GMT'
2025-11-16 18:52:20,985 - azure.core.pipeline.policies.http_logging_policy - INFO - Request URL: 'https://airm.blob.core.windows.net/prediction-demande/models/20251116_185220/feature_columns.txt'
Request method: 'PUT'
Request headers:
    'Content-Length': '454'
    'x-ms-blob-type': 'REDACTED'
    'x-ms-version': 'REDACTED'
    'Content-Type': 'application/octet-stream'
    'Accept': 'application/xml'
    'User-Agent': 'azsdk-python-storage-blob/12.26.0 Python/3.13.9 (Windows-11-10.0.26200-SP0)'
    'x-ms-date': 'REDACTED'
    'x-ms-client-request-id': 'fffa693d-c314-11f0-9ed7-40c73c3d51f2'
    'Authorization': 'REDACTED'
A body is sent with the request
2025-11-16 18:52:21,001 - azure.core.pipeline.policies.http_logging_policy - INFO - Response status: 201
Response headers:
    'Content-Length': '0'
    'Content-MD5': 'REDACTED'
    'Last-Modified': 'Sun, 16 Nov 2025 17:52:21 GMT'
    'ETag': '"0x8DE2538E459E862"'
    'Server': 'Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0'
    'x-ms-request-id': '67527643-401e-007e-1e21-571e46000000'
    'x-ms-client-request-id': 'fffa693d-c314-11f0-9ed7-40c73c3d51f2'
    'x-ms-version': 'REDACTED'
    'x-ms-content-crc64': 'REDACTED'
    'x-ms-request-server-encrypted': 'REDACTED'
    'Date': 'Sun, 16 Nov 2025 17:52:21 GMT'
2025-11-16 18:52:21,006 - __main__ - INFO - ================================================================================
2025-11-16 18:52:21,008 - __main__ - INFO - ================================================================================
2025-11-16 18:52:21,009 - __main__ - INFO -    Train MAE: 0.0005
2025-11-16 18:52:21,009 - __main__ - INFO -    Train R≤:  1.0000
2025-11-16 18:52:21,009 - __main__ - INFO -    Test MAE:  0.0560
2025-11-16 18:52:21,009 - __main__ - INFO -    Test R≤:   0.8265
2025-11-16 18:54:22,719 - __main__ - INFO - ================================================================================
2025-11-16 18:54:22,719 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-16 18:54:22,719 - __main__ - INFO - ================================================================================
2025-11-16 18:54:22,720 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-16 18:54:22,720 - __main__ - INFO - ‚ÑπÔ∏è  Utilisation de la configuration par d√©faut
2025-11-16 18:54:22,720 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-16 18:54:22,720 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/clustering_results.csv', 'indicateurs_path': '../data/Indicateurs.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': '/results/models'}
2025-11-16 18:54:22,720 - __main__ - INFO - Chargement des donn√©es...
2025-11-16 18:54:22,748 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-16 18:54:22,836 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-16 18:54:22,837 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-16 18:54:22,896 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-16 18:54:22,901 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-16 18:54:23,849 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-16 18:54:23,852 - __main__ - INFO - Cr√©ation des features et target...
2025-11-16 18:54:23,852 - __main__ - INFO - Nombre de features: 64
2025-11-16 18:54:23,856 - __main__ - INFO - X shape: (1415, 64), y shape: (1415,)
2025-11-16 18:54:23,856 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-16 18:54:23,861 - __main__ - INFO - Train: (1132, 64), Test: (283, 64)
2025-11-16 18:54:27,775 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-16 18:54:27,795 - __main__ - INFO - üìä Test MAE: 0.0560
2025-11-16 18:54:27,795 - __main__ - INFO - üìä Test R¬≤: 0.8265
2025-11-16 18:54:27,796 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-16 18:54:28,710 - __main__ - INFO - üìà Graphique sauvegard√©: /results/xgb_scatter_plot.png
2025-11-16 18:54:29,268 - __main__ - INFO - üìà Graphique sauvegard√©: /results/xgb_feature_importance.png
2025-11-16 18:54:29,281 - __main__ - INFO - Sauvegarde locale du mod√®le dans /results/models...
2025-11-16 18:54:29,330 - __main__ - INFO - üíæ Mod√®le sauvegard√©: /results/models\xgb_to_predictor.joblib
2025-11-16 18:54:29,331 - __main__ - INFO - üíæ Scaler sauvegard√©: /results/models\xgb_scaler.joblib
2025-11-16 18:54:29,331 - __main__ - INFO - üíæ Features sauvegard√©es: /results/models\feature_columns.txt
2025-11-16 18:54:29,331 - __main__ - INFO - Sauvegarde dans Azure Blob Storage (container: prediction-demande)...
2025-11-16 18:54:29,385 - azure.core.pipeline.policies.http_logging_policy - INFO - Request URL: 'https://airm.blob.core.windows.net/prediction-demande?restype=REDACTED'
Request method: 'GET'
Request headers:
    'x-ms-version': 'REDACTED'
    'Accept': 'application/xml'
    'User-Agent': 'azsdk-python-storage-blob/12.26.0 Python/3.13.9 (Windows-11-10.0.26200-SP0)'
    'x-ms-date': 'REDACTED'
    'x-ms-client-request-id': '4c82b285-c315-11f0-8e23-40c73c3d51f2'
    'Authorization': 'REDACTED'
No body was attached to the request
2025-11-16 18:54:29,947 - azure.core.pipeline.policies.http_logging_policy - INFO - Response status: 200
Response headers:
    'Content-Length': '0'
    'Last-Modified': 'Sun, 16 Nov 2025 17:52:20 GMT'
    'ETag': '"0x8DE2538E40FA941"'
    'Vary': 'REDACTED'
    'Server': 'Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0'
    'x-ms-request-id': '40dfab5d-d01e-0072-4722-578fe9000000'
    'x-ms-client-request-id': '4c82b285-c315-11f0-8e23-40c73c3d51f2'
    'x-ms-version': 'REDACTED'
    'x-ms-lease-status': 'REDACTED'
    'x-ms-lease-state': 'REDACTED'
    'x-ms-has-immutability-policy': 'REDACTED'
    'x-ms-has-legal-hold': 'REDACTED'
    'x-ms-immutable-storage-with-versioning-enabled': 'REDACTED'
    'x-ms-default-encryption-scope': 'REDACTED'
    'x-ms-deny-encryption-scope-override': 'REDACTED'
    'Date': 'Sun, 16 Nov 2025 17:54:29 GMT'
2025-11-16 18:54:29,951 - azure.core.pipeline.policies.http_logging_policy - INFO - Request URL: 'https://airm.blob.core.windows.net/prediction-demande/models/20251116_185429/xgb_to_predictor.joblib'
Request method: 'PUT'
Request headers:
    'Content-Length': '2605191'
    'x-ms-blob-type': 'REDACTED'
    'x-ms-version': 'REDACTED'
    'Content-Type': 'application/octet-stream'
    'Accept': 'application/xml'
    'User-Agent': 'azsdk-python-storage-blob/12.26.0 Python/3.13.9 (Windows-11-10.0.26200-SP0)'
    'x-ms-date': 'REDACTED'
    'x-ms-client-request-id': '4cd9305e-c315-11f0-9665-40c73c3d51f2'
    'Authorization': 'REDACTED'
A body is sent with the request
2025-11-16 18:54:30,528 - azure.core.pipeline.policies.http_logging_policy - INFO - Response status: 201
Response headers:
    'Content-Length': '0'
    'Content-MD5': 'REDACTED'
    'Last-Modified': 'Sun, 16 Nov 2025 17:54:30 GMT'
    'ETag': '"0x8DE2539318E01BD"'
    'Server': 'Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0'
    'x-ms-request-id': '40dfab67-d01e-0072-4f22-578fe9000000'
    'x-ms-client-request-id': '4cd9305e-c315-11f0-9665-40c73c3d51f2'
    'x-ms-version': 'REDACTED'
    'x-ms-content-crc64': 'REDACTED'
    'x-ms-request-server-encrypted': 'REDACTED'
    'Date': 'Sun, 16 Nov 2025 17:54:30 GMT'
2025-11-16 18:54:30,529 - __main__ - INFO - ‚òÅÔ∏è Fichier upload√©: models/20251116_185429/xgb_to_predictor.joblib
2025-11-16 18:54:30,531 - azure.core.pipeline.policies.http_logging_policy - INFO - Request URL: 'https://airm.blob.core.windows.net/prediction-demande/models/20251116_185429/xgb_scaler.joblib'
Request method: 'PUT'
Request headers:
    'Content-Length': '2919'
    'x-ms-blob-type': 'REDACTED'
    'x-ms-version': 'REDACTED'
    'Content-Type': 'application/octet-stream'
    'Accept': 'application/xml'
    'User-Agent': 'azsdk-python-storage-blob/12.26.0 Python/3.13.9 (Windows-11-10.0.26200-SP0)'
    'x-ms-date': 'REDACTED'
    'x-ms-client-request-id': '4d31b503-c315-11f0-86e3-40c73c3d51f2'
    'Authorization': 'REDACTED'
A body is sent with the request
2025-11-16 18:54:30,551 - azure.core.pipeline.policies.http_logging_policy - INFO - Response status: 201
Response headers:
    'Content-Length': '0'
    'Content-MD5': 'REDACTED'
    'Last-Modified': 'Sun, 16 Nov 2025 17:54:30 GMT'
    'ETag': '"0x8DE253931913280"'
    'Server': 'Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0'
    'x-ms-request-id': '40dfabfa-d01e-0072-5022-578fe9000000'
    'x-ms-client-request-id': '4d31b503-c315-11f0-86e3-40c73c3d51f2'
    'x-ms-version': 'REDACTED'
    'x-ms-content-crc64': 'REDACTED'
    'x-ms-request-server-encrypted': 'REDACTED'
    'Date': 'Sun, 16 Nov 2025 17:54:30 GMT'
2025-11-16 18:54:30,552 - __main__ - INFO - ‚òÅÔ∏è Fichier upload√©: models/20251116_185429/xgb_scaler.joblib
2025-11-16 18:54:30,555 - azure.core.pipeline.policies.http_logging_policy - INFO - Request URL: 'https://airm.blob.core.windows.net/prediction-demande/models/20251116_185429/feature_columns.txt'
Request method: 'PUT'
Request headers:
    'Content-Length': '454'
    'x-ms-blob-type': 'REDACTED'
    'x-ms-version': 'REDACTED'
    'Content-Type': 'application/octet-stream'
    'Accept': 'application/xml'
    'User-Agent': 'azsdk-python-storage-blob/12.26.0 Python/3.13.9 (Windows-11-10.0.26200-SP0)'
    'x-ms-date': 'REDACTED'
    'x-ms-client-request-id': '4d35374e-c315-11f0-ae22-40c73c3d51f2'
    'Authorization': 'REDACTED'
A body is sent with the request
2025-11-16 18:54:30,575 - azure.core.pipeline.policies.http_logging_policy - INFO - Response status: 201
Response headers:
    'Content-Length': '0'
    'Content-MD5': 'REDACTED'
    'Last-Modified': 'Sun, 16 Nov 2025 17:54:30 GMT'
    'ETag': '"0x8DE25393194B107"'
    'Server': 'Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0'
    'x-ms-request-id': '40dfac01-d01e-0072-5722-578fe9000000'
    'x-ms-client-request-id': '4d35374e-c315-11f0-ae22-40c73c3d51f2'
    'x-ms-version': 'REDACTED'
    'x-ms-content-crc64': 'REDACTED'
    'x-ms-request-server-encrypted': 'REDACTED'
    'Date': 'Sun, 16 Nov 2025 17:54:30 GMT'
2025-11-16 18:54:30,576 - __main__ - INFO - ‚òÅÔ∏è Fichier upload√©: models/20251116_185429/feature_columns.txt
2025-11-16 18:54:30,576 - __main__ - INFO - ‚úÖ Sauvegarde Azure termin√©e avec succ√®s
2025-11-16 18:54:30,578 - __main__ - INFO - ================================================================================
2025-11-16 18:54:30,578 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-16 18:54:30,578 - __main__ - INFO - ================================================================================
2025-11-16 18:54:30,578 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-16 18:54:30,578 - __main__ - INFO -    Train MAE: 0.0005
2025-11-16 18:54:30,579 - __main__ - INFO -    Train R¬≤:  1.0000
2025-11-16 18:54:30,579 - __main__ - INFO -    Test MAE:  0.0560
2025-11-16 18:54:30,579 - __main__ - INFO -    Test R¬≤:   0.8265
2025-11-16 18:56:57,786 - __main__ - INFO - ================================================================================
2025-11-16 18:56:57,786 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-16 18:56:57,786 - __main__ - INFO - ================================================================================
2025-11-16 18:56:57,787 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-16 18:56:57,787 - __main__ - INFO - ‚ÑπÔ∏è  Utilisation de la configuration par d√©faut
2025-11-16 18:56:57,787 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-16 18:56:57,787 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/clustering_results.csv', 'indicateurs_path': '../data/Indicateurs.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': '/results/models'}
2025-11-16 18:56:57,787 - __main__ - INFO - Chargement des donn√©es...
2025-11-16 18:56:57,812 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-16 18:56:57,898 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-16 18:56:57,898 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-16 18:56:57,955 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-16 18:56:57,957 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-16 18:56:58,827 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-16 18:56:58,830 - __main__ - INFO - Cr√©ation des features et target...
2025-11-16 18:56:58,830 - __main__ - INFO - Nombre de features: 64
2025-11-16 18:56:58,833 - __main__ - INFO - X shape: (1415, 64), y shape: (1415,)
2025-11-16 18:56:58,833 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-16 18:56:58,836 - __main__ - INFO - Train: (1132, 64), Test: (283, 64)
2025-11-16 18:57:02,036 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-16 18:57:02,052 - __main__ - INFO - üìä Test MAE: 0.0560
2025-11-16 18:57:02,052 - __main__ - INFO - üìä Test R¬≤: 0.8265
2025-11-16 18:57:02,053 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-16 18:57:02,777 - __main__ - INFO - üìà Graphique sauvegard√©: /results/xgb_scatter_plot.png
2025-11-16 18:57:03,145 - __main__ - INFO - üìà Graphique sauvegard√©: /results/xgb_feature_importance.png
2025-11-16 18:57:03,155 - __main__ - INFO - Sauvegarde locale du mod√®le dans /results/models...
2025-11-16 18:57:03,196 - __main__ - INFO - üíæ Mod√®le sauvegard√©: /results/models\xgb_to_predictor.joblib
2025-11-16 18:57:03,196 - __main__ - INFO - üíæ Scaler sauvegard√©: /results/models\xgb_scaler.joblib
2025-11-16 18:57:03,196 - __main__ - INFO - üíæ Features sauvegard√©es: /results/models\feature_columns.txt
2025-11-16 18:57:03,225 - azure.core.pipeline.policies.http_logging_policy - INFO - Request URL: 'https://airm.blob.core.windows.net/prediction-demande?restype=REDACTED'
Request method: 'GET'
Request headers:
    'x-ms-version': 'REDACTED'
    'Accept': 'application/xml'
    'User-Agent': 'azsdk-python-storage-blob/12.26.0 Python/3.13.9 (Windows-11-10.0.26200-SP0)'
    'x-ms-date': 'REDACTED'
    'x-ms-client-request-id': 'a834e7cd-c315-11f0-abd8-40c73c3d51f2'
    'Authorization': 'REDACTED'
No body was attached to the request
2025-11-16 18:57:03,739 - azure.core.pipeline.policies.http_logging_policy - INFO - Response status: 200
Response headers:
    'Content-Length': '0'
    'Last-Modified': 'Sun, 16 Nov 2025 17:52:20 GMT'
    'ETag': '"0x8DE2538E40FA941"'
    'Vary': 'REDACTED'
    'Server': 'Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0'
    'x-ms-request-id': 'c9e75275-701e-0038-1522-572ac1000000'
    'x-ms-client-request-id': 'a834e7cd-c315-11f0-abd8-40c73c3d51f2'
    'x-ms-version': 'REDACTED'
    'x-ms-lease-status': 'REDACTED'
    'x-ms-lease-state': 'REDACTED'
    'x-ms-has-immutability-policy': 'REDACTED'
    'x-ms-has-legal-hold': 'REDACTED'
    'x-ms-immutable-storage-with-versioning-enabled': 'REDACTED'
    'x-ms-default-encryption-scope': 'REDACTED'
    'x-ms-deny-encryption-scope-override': 'REDACTED'
    'Date': 'Sun, 16 Nov 2025 17:57:03 GMT'
2025-11-16 18:57:03,742 - azure.core.pipeline.policies.http_logging_policy - INFO - Request URL: 'https://airm.blob.core.windows.net/prediction-demande/models/20251116_185703/xgb_to_predictor.joblib'
Request method: 'PUT'
Request headers:
    'Content-Length': '2605191'
    'x-ms-blob-type': 'REDACTED'
    'x-ms-version': 'REDACTED'
    'Content-Type': 'application/octet-stream'
    'Accept': 'application/xml'
    'User-Agent': 'azsdk-python-storage-blob/12.26.0 Python/3.13.9 (Windows-11-10.0.26200-SP0)'
    'x-ms-date': 'REDACTED'
    'x-ms-client-request-id': 'a883caf1-c315-11f0-b173-40c73c3d51f2'
    'Authorization': 'REDACTED'
A body is sent with the request
2025-11-16 18:57:04,621 - azure.core.pipeline.policies.http_logging_policy - INFO - Response status: 201
Response headers:
    'Content-Length': '0'
    'Content-MD5': 'REDACTED'
    'Last-Modified': 'Sun, 16 Nov 2025 17:57:04 GMT'
    'ETag': '"0x8DE25398D66B6AE"'
    'Server': 'Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0'
    'x-ms-request-id': 'c9e75280-701e-0038-1c22-572ac1000000'
    'x-ms-client-request-id': 'a883caf1-c315-11f0-b173-40c73c3d51f2'
    'x-ms-version': 'REDACTED'
    'x-ms-content-crc64': 'REDACTED'
    'x-ms-request-server-encrypted': 'REDACTED'
    'Date': 'Sun, 16 Nov 2025 17:57:04 GMT'
2025-11-16 18:57:04,624 - azure.core.pipeline.policies.http_logging_policy - INFO - Request URL: 'https://airm.blob.core.windows.net/prediction-demande/models/20251116_185703/xgb_scaler.joblib'
Request method: 'PUT'
Request headers:
    'Content-Length': '2919'
    'x-ms-blob-type': 'REDACTED'
    'x-ms-version': 'REDACTED'
    'Content-Type': 'application/octet-stream'
    'Accept': 'application/xml'
    'User-Agent': 'azsdk-python-storage-blob/12.26.0 Python/3.13.9 (Windows-11-10.0.26200-SP0)'
    'x-ms-date': 'REDACTED'
    'x-ms-client-request-id': 'a90a6984-c315-11f0-9231-40c73c3d51f2'
    'Authorization': 'REDACTED'
A body is sent with the request
2025-11-16 18:57:04,640 - azure.core.pipeline.policies.http_logging_policy - INFO - Response status: 201
Response headers:
    'Content-Length': '0'
    'Content-MD5': 'REDACTED'
    'Last-Modified': 'Sun, 16 Nov 2025 17:57:04 GMT'
    'ETag': '"0x8DE25398D69E771"'
    'Server': 'Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0'
    'x-ms-request-id': 'c9e753d9-701e-0038-5222-572ac1000000'
    'x-ms-client-request-id': 'a90a6984-c315-11f0-9231-40c73c3d51f2'
    'x-ms-version': 'REDACTED'
    'x-ms-content-crc64': 'REDACTED'
    'x-ms-request-server-encrypted': 'REDACTED'
    'Date': 'Sun, 16 Nov 2025 17:57:04 GMT'
2025-11-16 18:57:04,642 - azure.core.pipeline.policies.http_logging_policy - INFO - Request URL: 'https://airm.blob.core.windows.net/prediction-demande/models/20251116_185703/feature_columns.txt'
Request method: 'PUT'
Request headers:
    'Content-Length': '454'
    'x-ms-blob-type': 'REDACTED'
    'x-ms-version': 'REDACTED'
    'Content-Type': 'application/octet-stream'
    'Accept': 'application/xml'
    'User-Agent': 'azsdk-python-storage-blob/12.26.0 Python/3.13.9 (Windows-11-10.0.26200-SP0)'
    'x-ms-date': 'REDACTED'
    'x-ms-client-request-id': 'a90d2d27-c315-11f0-8dcb-40c73c3d51f2'
    'Authorization': 'REDACTED'
A body is sent with the request
2025-11-16 18:57:04,663 - azure.core.pipeline.policies.http_logging_policy - INFO - Response status: 201
Response headers:
    'Content-Length': '0'
    'Content-MD5': 'REDACTED'
    'Last-Modified': 'Sun, 16 Nov 2025 17:57:04 GMT'
    'ETag': '"0x8DE25398D6CA382"'
    'Server': 'Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0'
    'x-ms-request-id': 'c9e753e0-701e-0038-5822-572ac1000000'
    'x-ms-client-request-id': 'a90d2d27-c315-11f0-8dcb-40c73c3d51f2'
    'x-ms-version': 'REDACTED'
    'x-ms-content-crc64': 'REDACTED'
    'x-ms-request-server-encrypted': 'REDACTED'
    'Date': 'Sun, 16 Nov 2025 17:57:04 GMT'
2025-11-16 18:57:04,666 - __main__ - INFO - ================================================================================
2025-11-16 18:57:04,666 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-16 18:57:04,666 - __main__ - INFO - ================================================================================
2025-11-16 18:57:04,667 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-16 18:57:04,667 - __main__ - INFO -    Train MAE: 0.0005
2025-11-16 18:57:04,667 - __main__ - INFO -    Train R¬≤:  1.0000
2025-11-16 18:57:04,667 - __main__ - INFO -    Test MAE:  0.0560
2025-11-16 18:57:04,668 - __main__ - INFO -    Test R¬≤:   0.8265
2025-11-16 18:58:05,063 - __main__ - INFO - ================================================================================
2025-11-16 18:58:05,064 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-16 18:58:05,064 - __main__ - INFO - ================================================================================
2025-11-16 18:58:05,064 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-16 18:58:05,065 - __main__ - INFO - ‚ÑπÔ∏è  Utilisation de la configuration par d√©faut
2025-11-16 18:58:05,065 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-16 18:58:05,065 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/clustering_results.csv', 'indicateurs_path': '../data/Indicateurs.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': '/results/models'}
2025-11-16 18:58:05,065 - __main__ - INFO - Chargement des donn√©es...
2025-11-16 18:58:05,091 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-16 18:58:05,170 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-16 18:58:05,170 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-16 18:58:05,227 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-16 18:58:05,229 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-16 18:58:06,024 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-16 18:58:06,028 - __main__ - INFO - Cr√©ation des features et target...
2025-11-16 18:58:06,028 - __main__ - INFO - Nombre de features: 64
2025-11-16 18:58:06,030 - __main__ - INFO - X shape: (1415, 64), y shape: (1415,)
2025-11-16 18:58:06,030 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-16 18:58:06,036 - __main__ - INFO - Train: (1132, 64), Test: (283, 64)
2025-11-16 18:58:08,553 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-16 18:58:08,567 - __main__ - INFO - üìä Test MAE: 0.0560
2025-11-16 18:58:08,568 - __main__ - INFO - üìä Test R¬≤: 0.8265
2025-11-16 18:58:08,568 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-16 18:58:09,322 - __main__ - INFO - üìà Graphique sauvegard√©: /results/xgb_scatter_plot.png
2025-11-16 18:58:09,782 - __main__ - INFO - üìà Graphique sauvegard√©: /results/xgb_feature_importance.png
2025-11-16 18:58:09,797 - __main__ - INFO - Sauvegarde locale du mod√®le dans /results/models...
2025-11-16 18:58:09,837 - __main__ - INFO - üíæ Mod√®le sauvegard√©: /results/models\xgb_to_predictor.joblib
2025-11-16 18:58:09,837 - __main__ - INFO - üíæ Scaler sauvegard√©: /results/models\xgb_scaler.joblib
2025-11-16 18:58:09,837 - __main__ - INFO - üíæ Features sauvegard√©es: /results/models\feature_columns.txt
2025-11-16 18:58:11,014 - __main__ - INFO - ================================================================================
2025-11-16 18:58:11,014 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-16 18:58:11,014 - __main__ - INFO - ================================================================================
2025-11-16 18:58:11,015 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-16 18:58:11,015 - __main__ - INFO -    Train MAE: 0.0005
2025-11-16 18:58:11,015 - __main__ - INFO -    Train R¬≤:  1.0000
2025-11-16 18:58:11,016 - __main__ - INFO -    Test MAE:  0.0560
2025-11-16 18:58:11,016 - __main__ - INFO -    Test R¬≤:   0.8265
2025-11-16 19:00:32,173 - __main__ - INFO - ================================================================================
2025-11-16 19:00:32,173 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-16 19:00:32,173 - __main__ - INFO - ================================================================================
2025-11-16 19:00:32,173 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-16 19:00:32,174 - __main__ - INFO - ‚ÑπÔ∏è  Utilisation de la configuration par d√©faut
2025-11-16 19:00:32,174 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-16 19:00:32,174 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/clustering_results.csv', 'indicateurs_path': '../data/Indicateurs.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/models'}
2025-11-16 19:00:32,174 - __main__ - INFO - Chargement des donn√©es...
2025-11-16 19:00:32,186 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-16 19:00:32,266 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-16 19:00:32,266 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-16 19:00:32,315 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-16 19:00:32,319 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-16 19:00:33,131 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-16 19:00:33,134 - __main__ - INFO - Cr√©ation des features et target...
2025-11-16 19:00:33,135 - __main__ - INFO - Nombre de features: 64
2025-11-16 19:00:33,137 - __main__ - INFO - X shape: (1415, 64), y shape: (1415,)
2025-11-16 19:00:33,137 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-16 19:00:33,142 - __main__ - INFO - Train: (1132, 64), Test: (283, 64)
2025-11-16 19:00:35,899 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-16 19:00:35,915 - __main__ - INFO - üìä Test MAE: 0.0560
2025-11-16 19:00:35,916 - __main__ - INFO - üìä Test R¬≤: 0.8265
2025-11-16 19:00:35,916 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-16 19:00:36,509 - __main__ - INFO - üìà Graphique sauvegard√©: results\xgb_scatter_plot.png
2025-11-16 19:00:36,801 - __main__ - INFO - üìà Graphique sauvegard√©: results\xgb_feature_importance.png
2025-11-16 19:00:36,830 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/models...
2025-11-16 19:00:36,870 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/models\xgb_to_predictor.joblib
2025-11-16 19:00:36,871 - __main__ - INFO - üíæ Scaler sauvegard√©: results/models\xgb_scaler.joblib
2025-11-16 19:00:36,871 - __main__ - INFO - üíæ Features sauvegard√©es: results/models\feature_columns.txt
2025-11-16 19:00:38,265 - __main__ - INFO - ================================================================================
2025-11-16 19:00:38,266 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-16 19:00:38,266 - __main__ - INFO - ================================================================================
2025-11-16 19:00:38,266 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-16 19:00:38,266 - __main__ - INFO -    Train MAE: 0.0005
2025-11-16 19:00:38,267 - __main__ - INFO -    Train R¬≤:  1.0000
2025-11-16 19:00:38,267 - __main__ - INFO -    Test MAE:  0.0560
2025-11-16 19:00:38,267 - __main__ - INFO -    Test R¬≤:   0.8265
2025-11-23 16:35:31,375 - __main__ - INFO - ================================================================================
2025-11-23 16:35:31,375 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 16:35:31,376 - __main__ - INFO - ================================================================================
2025-11-23 16:35:31,376 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 16:35:31,376 - __main__ - INFO - ‚ÑπÔ∏è  Module YAML non disponible, utilisation de la config par d√©faut
2025-11-23 16:35:31,376 - __main__ - INFO - ‚ÑπÔ∏è  Utilisation de la configuration par d√©faut
2025-11-23 16:35:31,377 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 16:35:31,377 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/clustering_results.csv', 'indicateurs_path': '../data/Indicateurs.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/models'}
2025-11-23 16:35:31,377 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 16:35:31,379 - __main__ - ERROR - Erreur lors du chargement des donn√©es: [Errno 2] No such file or directory: '../results/clustering_results.csv'
2025-11-23 16:35:31,379 - __main__ - ERROR - ‚ùå ERREUR FATALE: [Errno 2] No such file or directory: '../results/clustering_results.csv'
Traceback (most recent call last):
  File "C:\github\ml-demande\demande\predictTo\predictTo_train_model.py", line 704, in main
    clusters, indicateurs = predictor.load_data()
                            ~~~~~~~~~~~~~~~~~~~^^
  File "C:\github\ml-demande\demande\predictTo\predictTo_train_model.py", line 137, in load_data
    clusters = pd.read_csv(
        self.config['clustering_results_path'],
        sep=';'
    )
  File "C:\github\ml-demande\.venv_ml\Lib\site-packages\pandas\io\parsers\readers.py", line 1026, in read_csv
    return _read(filepath_or_buffer, kwds)
  File "C:\github\ml-demande\.venv_ml\Lib\site-packages\pandas\io\parsers\readers.py", line 620, in _read
    parser = TextFileReader(filepath_or_buffer, **kwds)
  File "C:\github\ml-demande\.venv_ml\Lib\site-packages\pandas\io\parsers\readers.py", line 1620, in __init__
    self._engine = self._make_engine(f, self.engine)
                   ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\github\ml-demande\.venv_ml\Lib\site-packages\pandas\io\parsers\readers.py", line 1880, in _make_engine
    self.handles = get_handle(
                   ~~~~~~~~~~^
        f,
        ^^
    ...<6 lines>...
        storage_options=self.options.get("storage_options", None),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\github\ml-demande\.venv_ml\Lib\site-packages\pandas\io\common.py", line 873, in get_handle
    handle = open(
        handle,
    ...<3 lines>...
        newline="",
    )
FileNotFoundError: [Errno 2] No such file or directory: '../results/clustering_results.csv'
2025-11-23 16:40:44,908 - __main__ - INFO - ================================================================================
2025-11-23 16:40:44,908 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 16:40:44,908 - __main__ - INFO - ================================================================================
2025-11-23 16:40:44,909 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 16:40:44,909 - __main__ - INFO - ‚ÑπÔ∏è  Module YAML non disponible, utilisation de la config par d√©faut
2025-11-23 16:40:44,909 - __main__ - INFO - ‚ÑπÔ∏è  Utilisation de la configuration par d√©faut
2025-11-23 16:40:44,909 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 16:40:44,910 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/models'}
2025-11-23 16:40:44,910 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 16:40:44,945 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-23 16:40:45,038 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-23 16:40:45,038 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-23 16:40:45,110 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-23 16:40:45,113 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-23 16:40:46,024 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-23 16:40:46,027 - __main__ - INFO - Cr√©ation des features et target...
2025-11-23 16:40:46,027 - __main__ - INFO - Nombre de features: 64
2025-11-23 16:40:46,029 - __main__ - INFO - X shape: (1415, 64), y shape: (1415,)
2025-11-23 16:40:46,029 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-23 16:40:46,036 - __main__ - INFO - Train: (1132, 64), Test: (283, 64)
2025-11-23 16:40:49,323 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-23 16:40:49,341 - __main__ - INFO - üìä Test MAE: 0.0521
2025-11-23 16:40:49,341 - __main__ - INFO - üìä Test R¬≤: 0.8316
2025-11-23 16:40:49,342 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-23 16:40:50,265 - __main__ - INFO - üìà Graphique sauvegard√©: results\xgb_scatter_plot.png
2025-11-23 16:40:50,594 - __main__ - INFO - üìà Graphique sauvegard√©: results\xgb_feature_importance.png
2025-11-23 16:40:50,609 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/models...
2025-11-23 16:40:50,651 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/models\xgb_to_predictor.joblib
2025-11-23 16:40:50,652 - __main__ - INFO - üíæ Scaler sauvegard√©: results/models\xgb_scaler.joblib
2025-11-23 16:40:50,652 - __main__ - INFO - üíæ Features sauvegard√©es: results/models\feature_columns.txt
2025-11-23 16:40:51,972 - __main__ - INFO - ================================================================================
2025-11-23 16:40:51,973 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-23 16:40:51,973 - __main__ - INFO - ================================================================================
2025-11-23 16:40:51,973 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-23 16:40:51,973 - __main__ - INFO -    Train MAE: 0.0005
2025-11-23 16:40:51,973 - __main__ - INFO -    Train R¬≤:  1.0000
2025-11-23 16:40:51,974 - __main__ - INFO -    Test MAE:  0.0521
2025-11-23 16:40:51,974 - __main__ - INFO -    Test R¬≤:   0.8316
2025-11-23 16:44:55,224 - __main__ - INFO - ================================================================================
2025-11-23 16:44:55,225 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 16:44:55,225 - __main__ - INFO - ================================================================================
2025-11-23 16:44:55,225 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 16:44:55,225 - __main__ - INFO - ‚ÑπÔ∏è  Module YAML non disponible, utilisation de la config par d√©faut
2025-11-23 16:44:55,225 - __main__ - INFO - ‚ÑπÔ∏è  Utilisation de la configuration par d√©faut
2025-11-23 16:44:55,226 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 16:44:55,226 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/models'}
2025-11-23 16:44:55,226 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 16:44:55,245 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-23 16:44:55,337 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-23 16:44:55,338 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-23 16:44:55,401 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-23 16:44:55,405 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-23 16:44:56,654 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-23 16:44:56,656 - __main__ - INFO - Cr√©ation des features et target...
2025-11-23 16:44:56,657 - __main__ - INFO - Nombre de features: 64
2025-11-23 16:44:56,658 - __main__ - INFO - X shape: (1415, 64), y shape: (1415,)
2025-11-23 16:44:56,659 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-23 16:44:56,664 - __main__ - INFO - Train: (1132, 64), Test: (283, 64)
2025-11-23 16:44:59,895 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-23 16:44:59,912 - __main__ - INFO - üìä Test MAE: 0.0521
2025-11-23 16:44:59,913 - __main__ - INFO - üìä Test R¬≤: 0.8316
2025-11-23 16:44:59,913 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-23 16:45:00,476 - __main__ - INFO - üìà Graphique sauvegard√©: results\xgb_scatter_plot.png
2025-11-23 16:45:00,934 - __main__ - INFO - üìà Graphique sauvegard√©: results\xgb_feature_importance.png
2025-11-23 16:45:00,953 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/models...
2025-11-23 16:45:00,995 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/models\xgb_to_predictor.joblib
2025-11-23 16:45:00,995 - __main__ - INFO - üíæ Scaler sauvegard√©: results/models\xgb_scaler.joblib
2025-11-23 16:45:00,995 - __main__ - INFO - üíæ Features sauvegard√©es: results/models\feature_columns.txt
2025-11-23 16:45:02,464 - __main__ - INFO - ================================================================================
2025-11-23 16:45:02,464 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-23 16:45:02,464 - __main__ - INFO - ================================================================================
2025-11-23 16:45:02,464 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-23 16:45:02,465 - __main__ - INFO -    Train MAE: 0.0005
2025-11-23 16:45:02,465 - __main__ - INFO -    Train R¬≤:  1.0000
2025-11-23 16:45:02,465 - __main__ - INFO -    Test MAE:  0.0521
2025-11-23 16:45:02,465 - __main__ - INFO -    Test R¬≤:   0.8316
2025-11-23 16:48:08,657 - __main__ - INFO - ================================================================================
2025-11-23 16:48:08,657 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 16:48:08,657 - __main__ - INFO - ================================================================================
2025-11-23 16:48:08,658 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 16:48:08,658 - __main__ - INFO - ‚ÑπÔ∏è  Module YAML non disponible, utilisation de la config par d√©faut
2025-11-23 16:48:08,658 - __main__ - INFO - ‚ÑπÔ∏è  Utilisation de la configuration par d√©faut
2025-11-23 16:48:08,658 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 16:48:08,658 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/models'}
2025-11-23 16:48:08,659 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 16:48:08,677 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-23 16:48:08,768 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-23 16:48:08,768 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-23 16:48:08,826 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-23 16:48:08,829 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-23 16:48:10,017 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-23 16:48:10,022 - __main__ - INFO - Cr√©ation des features et target...
2025-11-23 16:48:10,023 - __main__ - INFO - Nombre de features: 64
2025-11-23 16:48:10,027 - __main__ - INFO - X shape: (1415, 64), y shape: (1415,)
2025-11-23 16:48:10,027 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-23 16:48:10,034 - __main__ - INFO - Train: (1132, 64), Test: (283, 64)
2025-11-23 16:48:14,013 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-23 16:48:14,027 - __main__ - INFO - üìä Test MAE: 0.0521
2025-11-23 16:48:14,027 - __main__ - INFO - üìä Test R¬≤: 0.8316
2025-11-23 16:48:14,027 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-23 16:48:14,430 - __main__ - INFO - üìà Graphique sauvegard√©: results\xgb_scatter_plot.png
2025-11-23 16:48:14,709 - __main__ - INFO - üìà Graphique sauvegard√©: results\xgb_feature_importance.png
2025-11-23 16:48:14,719 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/models...
2025-11-23 16:48:14,757 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/models\xgb_to_predictor.joblib
2025-11-23 16:48:14,757 - __main__ - INFO - üíæ Scaler sauvegard√©: results/models\xgb_scaler.joblib
2025-11-23 16:48:14,757 - __main__ - INFO - üíæ Features sauvegard√©es: results/models\feature_columns.txt
2025-11-23 16:48:15,988 - __main__ - INFO - ================================================================================
2025-11-23 16:48:15,989 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-23 16:48:15,989 - __main__ - INFO - ================================================================================
2025-11-23 16:48:15,989 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-23 16:48:15,989 - __main__ - INFO -    Train MAE: 0.0005
2025-11-23 16:48:15,989 - __main__ - INFO -    Train R¬≤:  1.0000
2025-11-23 16:48:15,989 - __main__ - INFO -    Test MAE:  0.0521
2025-11-23 16:48:15,990 - __main__ - INFO -    Test R¬≤:   0.8316
2025-11-23 16:49:56,561 - __main__ - INFO - ================================================================================
2025-11-23 16:49:56,562 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 16:49:56,562 - __main__ - INFO - ================================================================================
2025-11-23 16:49:56,562 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 16:49:56,562 - __main__ - INFO - ‚ÑπÔ∏è  Module YAML non disponible, utilisation de la config par d√©faut
2025-11-23 16:49:56,562 - __main__ - INFO - ‚ÑπÔ∏è  Utilisation de la configuration par d√©faut
2025-11-23 16:49:56,563 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 16:49:56,563 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models'}
2025-11-23 16:49:56,563 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 16:49:56,578 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-23 16:49:56,656 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-23 16:49:56,657 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-23 16:49:56,702 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-23 16:49:56,705 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-23 16:49:57,486 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-23 16:49:57,489 - __main__ - INFO - Cr√©ation des features et target...
2025-11-23 16:49:57,489 - __main__ - INFO - Nombre de features: 64
2025-11-23 16:49:57,491 - __main__ - INFO - X shape: (1415, 64), y shape: (1415,)
2025-11-23 16:49:57,491 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-23 16:49:57,498 - __main__ - INFO - Train: (1132, 64), Test: (283, 64)
2025-11-23 16:50:00,469 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-23 16:50:00,485 - __main__ - INFO - üìä Test MAE: 0.0521
2025-11-23 16:50:00,486 - __main__ - INFO - üìä Test R¬≤: 0.8316
2025-11-23 16:50:00,486 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-23 16:50:00,966 - __main__ - INFO - üìà Graphique sauvegard√©: results\xgb_scatter_plot.png
2025-11-23 16:50:01,345 - __main__ - INFO - üìà Graphique sauvegard√©: results\xgb_feature_importance.png
2025-11-23 16:50:01,358 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/D09/models...
2025-11-23 16:50:01,433 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/D09/models\xgb_to_predictor.joblib
2025-11-23 16:50:01,433 - __main__ - INFO - üíæ Scaler sauvegard√©: results/D09/models\xgb_scaler.joblib
2025-11-23 16:50:01,433 - __main__ - INFO - üíæ Features sauvegard√©es: results/D09/models\feature_columns.txt
2025-11-23 16:50:02,539 - __main__ - INFO - ================================================================================
2025-11-23 16:50:02,540 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-23 16:50:02,540 - __main__ - INFO - ================================================================================
2025-11-23 16:50:02,540 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-23 16:50:02,540 - __main__ - INFO -    Train MAE: 0.0005
2025-11-23 16:50:02,541 - __main__ - INFO -    Train R¬≤:  1.0000
2025-11-23 16:50:02,541 - __main__ - INFO -    Test MAE:  0.0521
2025-11-23 16:50:02,541 - __main__ - INFO -    Test R¬≤:   0.8316
2025-11-23 16:54:14,161 - __main__ - INFO - ================================================================================
2025-11-23 16:54:14,161 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 16:54:14,161 - __main__ - INFO - ================================================================================
2025-11-23 16:54:14,162 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 16:54:14,162 - __main__ - INFO - ‚ÑπÔ∏è  Module YAML non disponible, utilisation de la config par d√©faut
2025-11-23 16:54:14,162 - __main__ - INFO - ‚ÑπÔ∏è  Utilisation de la configuration par d√©faut
2025-11-23 16:54:14,162 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 16:54:14,162 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models'}
2025-11-23 16:54:14,163 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 16:54:14,177 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-23 16:54:14,251 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-23 16:54:14,251 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-23 16:54:14,304 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-23 16:54:14,307 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-23 16:54:15,162 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-23 16:54:15,165 - __main__ - INFO - Cr√©ation des features et target...
2025-11-23 16:54:15,165 - __main__ - INFO - Nombre de features: 64
2025-11-23 16:54:15,168 - __main__ - INFO - X shape: (1415, 64), y shape: (1415,)
2025-11-23 16:54:15,168 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-23 16:54:15,174 - __main__ - INFO - Train: (1132, 64), Test: (283, 64)
2025-11-23 16:54:18,270 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-23 16:54:18,286 - __main__ - INFO - üìä Test MAE: 0.0521
2025-11-23 16:54:18,286 - __main__ - INFO - üìä Test R¬≤: 0.8316
2025-11-23 16:54:18,287 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-23 16:54:18,787 - __main__ - INFO - üìà Graphique sauvegard√©: results\xgb_scatter_plot.png
2025-11-23 16:54:19,209 - __main__ - INFO - üìà Graphique sauvegard√©: results\xgb_feature_importance.png
2025-11-23 16:54:19,221 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/D09/models...
2025-11-23 16:54:19,260 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/D09/models\xgb_to_predictor.joblib
2025-11-23 16:54:19,261 - __main__ - INFO - üíæ Scaler sauvegard√©: results/D09/models\xgb_scaler.joblib
2025-11-23 16:54:19,261 - __main__ - INFO - üíæ Features sauvegard√©es: results/D09/models\feature_columns.txt
2025-11-23 16:54:20,466 - __main__ - INFO - ================================================================================
2025-11-23 16:54:20,467 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-23 16:54:20,467 - __main__ - INFO - ================================================================================
2025-11-23 16:54:20,467 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-23 16:54:20,468 - __main__ - INFO -    Train MAE: 0.0005
2025-11-23 16:54:20,468 - __main__ - INFO -    Train R¬≤:  1.0000
2025-11-23 16:54:20,468 - __main__ - INFO -    Test MAE:  0.0521
2025-11-23 16:54:20,468 - __main__ - INFO -    Test R¬≤:   0.8316
2025-11-23 16:54:52,380 - __main__ - INFO - ================================================================================
2025-11-23 16:54:52,380 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 16:54:52,380 - __main__ - INFO - ================================================================================
2025-11-23 16:54:52,381 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 16:54:52,381 - __main__ - INFO - ‚ÑπÔ∏è  Module YAML non disponible, utilisation de la config par d√©faut
2025-11-23 16:54:52,381 - __main__ - INFO - ‚ÑπÔ∏è  Utilisation de la configuration par d√©faut
2025-11-23 16:54:52,381 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 16:54:52,381 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models'}
2025-11-23 16:54:52,382 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 16:54:52,395 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-23 16:54:52,474 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-23 16:54:52,474 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-23 16:54:52,520 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-23 16:54:52,523 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-23 16:54:53,302 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-23 16:54:53,305 - __main__ - INFO - Cr√©ation des features et target...
2025-11-23 16:54:53,306 - __main__ - INFO - Nombre de features: 64
2025-11-23 16:54:53,309 - __main__ - INFO - X shape: (1415, 64), y shape: (1415,)
2025-11-23 16:54:53,309 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-23 16:54:53,317 - __main__ - INFO - Train: (1132, 64), Test: (283, 64)
2025-11-23 16:54:56,078 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-23 16:54:56,092 - __main__ - INFO - üìä Test MAE: 0.0521
2025-11-23 16:54:56,093 - __main__ - INFO - üìä Test R¬≤: 0.8316
2025-11-23 16:54:56,093 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-23 16:54:56,545 - __main__ - INFO - üìà Graphique sauvegard√©: results\xgb_scatter_plot.png
2025-11-23 16:54:56,875 - __main__ - INFO - üìà Graphique sauvegard√©: results\xgb_feature_importance.png
2025-11-23 16:54:56,888 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/D09/models...
2025-11-23 16:54:56,926 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/D09/models\xgb_to_predictor.joblib
2025-11-23 16:54:56,926 - __main__ - INFO - üíæ Scaler sauvegard√©: results/D09/models\xgb_scaler.joblib
2025-11-23 16:54:56,926 - __main__ - INFO - üíæ Features sauvegard√©es: results/D09/models\feature_columns.txt
2025-11-23 16:54:58,049 - __main__ - INFO - ================================================================================
2025-11-23 16:54:58,049 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-23 16:54:58,050 - __main__ - INFO - ================================================================================
2025-11-23 16:54:58,050 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-23 16:54:58,050 - __main__ - INFO -    Train MAE: 0.0005
2025-11-23 16:54:58,050 - __main__ - INFO -    Train R¬≤:  1.0000
2025-11-23 16:54:58,050 - __main__ - INFO -    Test MAE:  0.0521
2025-11-23 16:54:58,051 - __main__ - INFO -    Test R¬≤:   0.8316
2025-11-23 16:56:48,761 - __main__ - INFO - ================================================================================
2025-11-23 16:56:48,761 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 16:56:48,761 - __main__ - INFO - ================================================================================
2025-11-23 16:56:48,762 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 16:56:48,762 - __main__ - INFO - ‚ÑπÔ∏è  Module YAML non disponible, utilisation de la config par d√©faut
2025-11-23 16:56:48,762 - __main__ - INFO - ‚ÑπÔ∏è  Utilisation de la configuration par d√©faut
2025-11-23 16:56:48,762 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 16:56:48,762 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models'}
2025-11-23 16:56:48,763 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 16:56:48,782 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-23 16:56:48,867 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-23 16:56:48,867 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-23 16:56:48,921 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-23 16:56:48,924 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-23 16:56:49,762 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-23 16:56:49,767 - __main__ - INFO - Cr√©ation des features et target...
2025-11-23 16:56:49,767 - __main__ - INFO - Nombre de features: 64
2025-11-23 16:56:49,770 - __main__ - INFO - X shape: (1415, 64), y shape: (1415,)
2025-11-23 16:56:49,770 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-23 16:56:49,776 - __main__ - INFO - Train: (1132, 64), Test: (283, 64)
2025-11-23 16:56:52,688 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-23 16:56:52,705 - __main__ - INFO - üìä Test MAE: 0.0521
2025-11-23 16:56:52,705 - __main__ - INFO - üìä Test R¬≤: 0.8316
2025-11-23 16:56:52,705 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-23 16:56:53,180 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-23 16:56:53,562 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-23 16:56:53,576 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/D09/models...
2025-11-23 16:56:53,611 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/D09/models\xgb_to_predictor.joblib
2025-11-23 16:56:53,611 - __main__ - INFO - üíæ Scaler sauvegard√©: results/D09/models\xgb_scaler.joblib
2025-11-23 16:56:53,611 - __main__ - INFO - üíæ Features sauvegard√©es: results/D09/models\feature_columns.txt
2025-11-23 16:56:55,093 - __main__ - INFO - ================================================================================
2025-11-23 16:56:55,093 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-23 16:56:55,093 - __main__ - INFO - ================================================================================
2025-11-23 16:56:55,093 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-23 16:56:55,093 - __main__ - INFO -    Train MAE: 0.0005
2025-11-23 16:56:55,094 - __main__ - INFO -    Train R¬≤:  1.0000
2025-11-23 16:56:55,094 - __main__ - INFO -    Test MAE:  0.0521
2025-11-23 16:56:55,094 - __main__ - INFO -    Test R¬≤:   0.8316
2025-11-23 16:57:40,883 - __main__ - INFO - ================================================================================
2025-11-23 16:57:40,883 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 16:57:40,884 - __main__ - INFO - ================================================================================
2025-11-23 16:57:40,884 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 16:57:40,884 - __main__ - INFO - ‚ÑπÔ∏è  Module YAML non disponible, utilisation de la config par d√©faut
2025-11-23 16:57:40,884 - __main__ - INFO - ‚ÑπÔ∏è  Utilisation de la configuration par d√©faut
2025-11-23 16:57:40,884 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 16:57:40,884 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models'}
2025-11-23 16:57:40,885 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 16:57:40,901 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-23 16:57:40,977 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-23 16:57:40,977 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-23 16:57:41,022 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-23 16:57:41,026 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-23 16:57:41,823 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-23 16:57:41,825 - __main__ - INFO - Cr√©ation des features et target...
2025-11-23 16:57:41,826 - __main__ - INFO - Nombre de features: 64
2025-11-23 16:57:41,828 - __main__ - INFO - X shape: (1415, 64), y shape: (1415,)
2025-11-23 16:57:41,828 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-23 16:57:41,833 - __main__ - INFO - Train: (1132, 64), Test: (283, 64)
2025-11-23 16:57:44,513 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-23 16:57:44,527 - __main__ - INFO - üìä Test MAE: 0.0521
2025-11-23 16:57:44,527 - __main__ - INFO - üìä Test R¬≤: 0.8316
2025-11-23 16:57:44,527 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-23 16:57:44,961 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-23 16:57:45,274 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-23 16:57:45,291 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/D09/models...
2025-11-23 16:57:45,326 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/D09/models\xgb_to_predictor.joblib
2025-11-23 16:57:45,326 - __main__ - INFO - üíæ Scaler sauvegard√©: results/D09/models\xgb_scaler.joblib
2025-11-23 16:57:45,326 - __main__ - INFO - üíæ Features sauvegard√©es: results/D09/models\feature_columns.txt
2025-11-23 16:57:46,494 - __main__ - INFO - ================================================================================
2025-11-23 16:57:46,494 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-23 16:57:46,494 - __main__ - INFO - ================================================================================
2025-11-23 16:57:46,494 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-23 16:57:46,494 - __main__ - INFO -    Train MAE: 0.0005
2025-11-23 16:57:46,495 - __main__ - INFO -    Train R¬≤:  1.0000
2025-11-23 16:57:46,495 - __main__ - INFO -    Test MAE:  0.0521
2025-11-23 16:57:46,495 - __main__ - INFO -    Test R¬≤:   0.8316
2025-11-23 17:00:01,010 - __main__ - INFO - ================================================================================
2025-11-23 17:00:01,010 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 17:00:01,010 - __main__ - INFO - ================================================================================
2025-11-23 17:00:01,010 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 17:00:01,011 - __main__ - INFO - ‚ÑπÔ∏è  Module YAML non disponible, utilisation de la config par d√©faut
2025-11-23 17:00:01,011 - __main__ - INFO - ‚ÑπÔ∏è  Utilisation de la configuration par d√©faut
2025-11-23 17:00:01,011 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 17:00:01,011 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models'}
2025-11-23 17:00:01,011 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 17:00:01,035 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-23 17:00:01,114 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-23 17:00:01,114 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-23 17:00:01,181 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-23 17:00:01,183 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-23 17:00:02,096 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-23 17:00:02,099 - __main__ - INFO - Cr√©ation des features et target...
2025-11-23 17:00:02,100 - __main__ - INFO - --------------------------------
2025-11-23 17:00:02,100 - __main__ - INFO - Horizon: 7
2025-11-23 17:00:02,100 - __main__ - INFO - --------------------------------
2025-11-23 17:00:02,100 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'pm_J-60', 'pm_mean', 'pm_slope', 'pm_volatility', 'pm_diff_sum',
       'pm_change_ratio', 'pm_last_jump', 'pm_trend_changes', 'month',
       'dayofweek'],
      dtype='object', length=135)
2025-11-23 17:00:02,101 - __main__ - INFO - Nombre de features: 64
2025-11-23 17:00:02,104 - __main__ - INFO - X shape: (1415, 64), y shape: (1415,)
2025-11-23 17:00:02,105 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-23 17:00:02,112 - __main__ - INFO - Train: (1132, 64), Test: (283, 64)
2025-11-23 17:00:05,039 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-23 17:00:05,053 - __main__ - INFO - üìä Test MAE: 0.0521
2025-11-23 17:00:05,053 - __main__ - INFO - üìä Test R¬≤: 0.8316
2025-11-23 17:00:05,054 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-23 17:00:05,467 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-23 17:00:05,835 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-23 17:00:05,852 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/D09/models...
2025-11-23 17:00:05,891 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/D09/models\xgb_to_predictor.joblib
2025-11-23 17:00:05,891 - __main__ - INFO - üíæ Scaler sauvegard√©: results/D09/models\xgb_scaler.joblib
2025-11-23 17:00:05,891 - __main__ - INFO - üíæ Features sauvegard√©es: results/D09/models\feature_columns.txt
2025-11-23 17:00:07,058 - __main__ - INFO - ================================================================================
2025-11-23 17:00:07,059 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-23 17:00:07,059 - __main__ - INFO - ================================================================================
2025-11-23 17:00:07,059 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-23 17:00:07,059 - __main__ - INFO -    Train MAE: 0.0005
2025-11-23 17:00:07,060 - __main__ - INFO -    Train R¬≤:  1.0000
2025-11-23 17:00:07,060 - __main__ - INFO -    Test MAE:  0.0521
2025-11-23 17:00:07,060 - __main__ - INFO -    Test R¬≤:   0.8316
2025-11-23 17:03:01,224 - __main__ - INFO - ================================================================================
2025-11-23 17:03:01,225 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 17:03:01,225 - __main__ - INFO - ================================================================================
2025-11-23 17:03:01,225 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 17:03:01,226 - __main__ - INFO - ‚ÑπÔ∏è  Module YAML non disponible, utilisation de la config par d√©faut
2025-11-23 17:03:01,226 - __main__ - INFO - ‚ÑπÔ∏è  Utilisation de la configuration par d√©faut
2025-11-23 17:03:01,226 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 17:03:01,226 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models'}
2025-11-23 17:03:01,226 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 17:03:01,246 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-23 17:03:01,342 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-23 17:03:01,342 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-23 17:03:01,403 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-23 17:03:01,405 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-23 17:03:02,546 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-23 17:03:02,549 - __main__ - INFO - Cr√©ation des features et target...
2025-11-23 17:03:02,550 - __main__ - INFO - --------------------------------
2025-11-23 17:03:02,550 - __main__ - INFO - Horizon: 7
2025-11-23 17:03:02,550 - __main__ - INFO - --------------------------------
2025-11-23 17:03:02,550 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'pm_J-60', 'pm_mean', 'pm_slope', 'pm_volatility', 'pm_diff_sum',
       'pm_change_ratio', 'pm_last_jump', 'pm_trend_changes', 'month',
       'dayofweek'],
      dtype='object', length=135)
2025-11-23 17:03:02,551 - __main__ - INFO - Nombre de features: 64
2025-11-23 17:03:02,554 - __main__ - INFO - X shape: (1415, 64), y shape: (1415,)
2025-11-23 17:03:02,554 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-23 17:03:02,561 - __main__ - INFO - Train: (1132, 64), Test: (283, 64)
2025-11-23 17:03:05,985 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-23 17:03:06,002 - __main__ - INFO - üìä Test MAE: 0.0521
2025-11-23 17:03:06,003 - __main__ - INFO - üìä Test R¬≤: 0.8316
2025-11-23 17:03:06,003 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-23 17:03:06,447 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-23 17:03:06,740 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-23 17:03:06,753 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/D09/models...
2025-11-23 17:03:06,788 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/D09/models\xgb_to_predictor.joblib
2025-11-23 17:03:06,789 - __main__ - INFO - üíæ Scaler sauvegard√©: results/D09/models\xgb_scaler.joblib
2025-11-23 17:03:06,789 - __main__ - INFO - üíæ Features sauvegard√©es: results/D09/models\feature_columns.txt
2025-11-23 17:03:07,852 - __main__ - INFO - ================================================================================
2025-11-23 17:03:07,853 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-23 17:03:07,853 - __main__ - INFO - ================================================================================
2025-11-23 17:03:07,853 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-23 17:03:07,853 - __main__ - INFO -    Train MAE: 0.0005
2025-11-23 17:03:07,854 - __main__ - INFO -    Train R¬≤:  1.0000
2025-11-23 17:03:07,854 - __main__ - INFO -    Test MAE:  0.0521
2025-11-23 17:03:07,854 - __main__ - INFO -    Test R¬≤:   0.8316
2025-11-23 17:11:00,070 - __main__ - INFO - ================================================================================
2025-11-23 17:11:00,071 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 17:11:00,071 - __main__ - INFO - ================================================================================
2025-11-23 17:11:00,071 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 17:11:00,071 - __main__ - INFO - ‚ÑπÔ∏è  Module YAML non disponible, utilisation de la config par d√©faut
2025-11-23 17:11:00,072 - __main__ - INFO - ‚ÑπÔ∏è  Utilisation de la configuration par d√©faut
2025-11-23 17:11:00,072 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 17:11:00,072 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models'}
2025-11-23 17:11:00,072 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 17:11:00,086 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-23 17:11:00,168 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-23 17:11:00,168 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-23 17:11:00,215 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-23 17:11:00,217 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-23 17:11:01,126 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-23 17:11:01,129 - __main__ - INFO - Cr√©ation des features et target...
2025-11-23 17:11:01,129 - __main__ - INFO - --------------------------------
2025-11-23 17:11:01,129 - __main__ - INFO - Horizon: 7
2025-11-23 17:11:01,130 - __main__ - INFO - --------------------------------
2025-11-23 17:11:01,130 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'pm_J-60', 'pm_mean', 'pm_slope', 'pm_volatility', 'pm_diff_sum',
       'pm_change_ratio', 'pm_last_jump', 'pm_trend_changes', 'month',
       'dayofweek'],
      dtype='object', length=135)
2025-11-23 17:11:01,130 - __main__ - INFO - Nombre de features: 64
2025-11-23 17:11:01,132 - __main__ - INFO - X shape: (1415, 64), y shape: (1415,)
2025-11-23 17:11:01,132 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-23 17:11:01,140 - __main__ - INFO - Train: (1132, 64), Test: (283, 64)
2025-11-23 17:11:03,990 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-23 17:11:04,004 - __main__ - INFO - üìä Test MAE: 0.0521
2025-11-23 17:11:04,005 - __main__ - INFO - üìä Test R¬≤: 0.8316
2025-11-23 17:11:04,005 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-23 17:11:04,469 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-23 17:11:04,817 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-23 17:11:04,835 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/D09/models...
2025-11-23 17:11:04,877 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/D09/models\xgb_to_predictor.joblib
2025-11-23 17:11:04,878 - __main__ - INFO - üíæ Scaler sauvegard√©: results/D09/models\xgb_scaler.joblib
2025-11-23 17:11:04,878 - __main__ - INFO - üíæ Features sauvegard√©es: results/D09/models\feature_columns.txt
2025-11-23 17:11:05,790 - __main__ - INFO - ================================================================================
2025-11-23 17:11:05,790 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-23 17:11:05,790 - __main__ - INFO - ================================================================================
2025-11-23 17:11:05,790 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-23 17:11:05,791 - __main__ - INFO -    Train MAE: 0.0005
2025-11-23 17:11:05,791 - __main__ - INFO -    Train R¬≤:  1.0000
2025-11-23 17:11:05,791 - __main__ - INFO -    Test MAE:  0.0521
2025-11-23 17:11:05,791 - __main__ - INFO -    Test R¬≤:   0.8316
2025-11-23 17:12:25,022 - __main__ - INFO - ================================================================================
2025-11-23 17:12:25,023 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 17:12:25,023 - __main__ - INFO - ================================================================================
2025-11-23 17:12:25,023 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 17:12:25,026 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-23 17:12:25,026 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 17:12:25,026 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'prediction_horizon': 21, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': '../results/D09/models'}
2025-11-23 17:12:25,026 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 17:12:25,045 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-23 17:12:25,171 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-23 17:12:25,171 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-23 17:12:25,222 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-23 17:12:25,225 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-23 17:12:26,023 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-23 17:12:26,026 - __main__ - INFO - Cr√©ation des features et target...
2025-11-23 17:12:26,027 - __main__ - INFO - --------------------------------
2025-11-23 17:12:26,027 - __main__ - INFO - Horizon: 21
2025-11-23 17:12:26,027 - __main__ - INFO - --------------------------------
2025-11-23 17:12:26,027 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'pm_J-60', 'pm_mean', 'pm_slope', 'pm_volatility', 'pm_diff_sum',
       'pm_change_ratio', 'pm_last_jump', 'pm_trend_changes', 'month',
       'dayofweek'],
      dtype='object', length=135)
2025-11-23 17:12:26,028 - __main__ - INFO - Nombre de features: 50
2025-11-23 17:12:26,030 - __main__ - INFO - X shape: (1415, 50), y shape: (1415,)
2025-11-23 17:12:26,030 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-23 17:12:26,037 - __main__ - INFO - Train: (1132, 50), Test: (283, 50)
2025-11-23 17:12:28,314 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-23 17:12:28,329 - __main__ - INFO - üìä Test MAE: 0.0778
2025-11-23 17:12:28,329 - __main__ - INFO - üìä Test R¬≤: 0.6613
2025-11-23 17:12:28,330 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-23 17:12:28,766 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-23 17:12:29,108 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-23 17:12:29,121 - __main__ - INFO - Sauvegarde locale du mod√®le dans ../results/D09/models...
2025-11-23 17:12:29,158 - __main__ - INFO - üíæ Mod√®le sauvegard√©: ../results/D09/models\xgb_to_predictor.joblib
2025-11-23 17:12:29,159 - __main__ - INFO - üíæ Scaler sauvegard√©: ../results/D09/models\xgb_scaler.joblib
2025-11-23 17:12:29,159 - __main__ - INFO - üíæ Features sauvegard√©es: ../results/D09/models\feature_columns.txt
2025-11-23 17:12:30,256 - __main__ - INFO - ================================================================================
2025-11-23 17:12:30,257 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-23 17:12:30,257 - __main__ - INFO - ================================================================================
2025-11-23 17:12:30,257 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-23 17:12:30,257 - __main__ - INFO -    Train MAE: 0.0007
2025-11-23 17:12:30,257 - __main__ - INFO -    Train R¬≤:  1.0000
2025-11-23 17:12:30,257 - __main__ - INFO -    Test MAE:  0.0778
2025-11-23 17:12:30,258 - __main__ - INFO -    Test R¬≤:   0.6613
2025-11-23 17:13:35,907 - __main__ - INFO - ================================================================================
2025-11-23 17:13:35,907 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 17:13:35,907 - __main__ - INFO - ================================================================================
2025-11-23 17:13:35,908 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 17:13:35,911 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-23 17:13:35,911 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 17:13:35,911 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'prediction_horizon': 3, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': '../results/D09/models'}
2025-11-23 17:13:35,911 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 17:13:35,928 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-23 17:13:36,009 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-23 17:13:36,009 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-23 17:13:36,065 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-23 17:13:36,067 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-23 17:13:37,006 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-23 17:13:37,008 - __main__ - INFO - Cr√©ation des features et target...
2025-11-23 17:13:37,009 - __main__ - INFO - --------------------------------
2025-11-23 17:13:37,009 - __main__ - INFO - Horizon: 3
2025-11-23 17:13:37,009 - __main__ - INFO - --------------------------------
2025-11-23 17:13:37,010 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'pm_J-60', 'pm_mean', 'pm_slope', 'pm_volatility', 'pm_diff_sum',
       'pm_change_ratio', 'pm_last_jump', 'pm_trend_changes', 'month',
       'dayofweek'],
      dtype='object', length=135)
2025-11-23 17:13:37,010 - __main__ - INFO - Nombre de features: 68
2025-11-23 17:13:37,012 - __main__ - INFO - X shape: (1415, 68), y shape: (1415,)
2025-11-23 17:13:37,012 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-23 17:13:37,020 - __main__ - INFO - Train: (1132, 68), Test: (283, 68)
2025-11-23 17:13:39,762 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-23 17:13:39,775 - __main__ - INFO - üìä Test MAE: 0.0429
2025-11-23 17:13:39,776 - __main__ - INFO - üìä Test R¬≤: 0.8718
2025-11-23 17:13:39,776 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-23 17:13:40,205 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-23 17:13:40,582 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-23 17:13:40,596 - __main__ - INFO - Sauvegarde locale du mod√®le dans ../results/D09/models...
2025-11-23 17:13:40,636 - __main__ - INFO - üíæ Mod√®le sauvegard√©: ../results/D09/models\xgb_to_predictor.joblib
2025-11-23 17:13:40,636 - __main__ - INFO - üíæ Scaler sauvegard√©: ../results/D09/models\xgb_scaler.joblib
2025-11-23 17:13:40,637 - __main__ - INFO - üíæ Features sauvegard√©es: ../results/D09/models\feature_columns.txt
2025-11-23 17:13:41,903 - __main__ - INFO - ================================================================================
2025-11-23 17:13:41,903 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-23 17:13:41,903 - __main__ - INFO - ================================================================================
2025-11-23 17:13:41,904 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-23 17:13:41,904 - __main__ - INFO -    Train MAE: 0.0005
2025-11-23 17:13:41,904 - __main__ - INFO -    Train R¬≤:  1.0000
2025-11-23 17:13:41,904 - __main__ - INFO -    Test MAE:  0.0429
2025-11-23 17:13:41,904 - __main__ - INFO -    Test R¬≤:   0.8718
2025-11-23 17:30:14,212 - __main__ - INFO - ================================================================================
2025-11-23 17:30:14,212 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 17:30:14,212 - __main__ - INFO - ================================================================================
2025-11-23 17:30:14,213 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 17:30:14,215 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-23 17:30:14,216 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 17:30:14,216 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': '../results/D09/models'}
2025-11-23 17:30:14,216 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 17:30:14,242 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-23 17:30:14,330 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-23 17:30:14,331 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-23 17:30:14,390 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-23 17:30:14,394 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-23 17:30:15,456 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-23 17:30:15,458 - __main__ - INFO - Ajout des features jours f√©ri√©s...
2025-11-23 17:30:16,330 - __main__ - ERROR - ‚ùå ERREUR FATALE: Cannot compare Timestamp with datetime.date. Use ts == pd.Timestamp(date) or ts.date() == date instead.
Traceback (most recent call last):
  File "C:\github\ml-demande\demande\predictTo\predictTo_train_model.py", line 742, in main
    df = predictor.prepare_data(clusters, indicateurs)
  File "C:\github\ml-demande\demande\predictTo\predictTo_train_model.py", line 339, in prepare_data
    df["days_to_holiday"] = df["stay_date"].apply(distance_to_next_holiday)
                            ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\github\ml-demande\.venv_ml\Lib\site-packages\pandas\core\series.py", line 4943, in apply
    ).apply()
      ~~~~~^^
  File "C:\github\ml-demande\.venv_ml\Lib\site-packages\pandas\core\apply.py", line 1422, in apply
    return self.apply_standard()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\github\ml-demande\.venv_ml\Lib\site-packages\pandas\core\apply.py", line 1502, in apply_standard
    mapped = obj._map_values(
        mapper=curried, na_action=action, convert=self.convert_dtype
    )
  File "C:\github\ml-demande\.venv_ml\Lib\site-packages\pandas\core\base.py", line 923, in _map_values
    return arr.map(mapper, na_action=na_action)
           ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\github\ml-demande\.venv_ml\Lib\site-packages\pandas\core\arrays\_mixins.py", line 81, in method
    return meth(self, *args, **kwargs)
  File "C:\github\ml-demande\.venv_ml\Lib\site-packages\pandas\core\arrays\datetimelike.py", line 763, in map
    result = map_array(self, mapper, na_action=na_action)
  File "C:\github\ml-demande\.venv_ml\Lib\site-packages\pandas\core\algorithms.py", line 1743, in map_array
    return lib.map_infer(values, mapper, convert=convert)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "pandas/_libs/lib.pyx", line 2999, in pandas._libs.lib.map_infer
  File "C:\github\ml-demande\demande\predictTo\predictTo_train_model.py", line 334, in distance_to_next_holiday
    upcoming = [h for h in fr_holidays if h >= date]
                                          ^^^^^^^^^
  File "pandas/_libs/tslibs/timestamps.pyx", line 377, in pandas._libs.tslibs.timestamps._Timestamp.__richcmp__
TypeError: Cannot compare Timestamp with datetime.date. Use ts == pd.Timestamp(date) or ts.date() == date instead.
2025-11-23 17:33:33,129 - __main__ - INFO - ================================================================================
2025-11-23 17:33:33,130 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 17:33:33,130 - __main__ - INFO - ================================================================================
2025-11-23 17:33:33,130 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 17:33:33,133 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-23 17:33:33,133 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 17:33:33,133 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': '../results/D09/models'}
2025-11-23 17:33:33,133 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 17:33:33,157 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-23 17:33:33,248 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-23 17:33:33,248 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-23 17:33:33,312 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-23 17:33:33,317 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-23 17:33:34,124 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-23 17:33:34,126 - __main__ - INFO - Ajout des features jours f√©ri√©s...
2025-11-23 17:33:34,473 - __main__ - INFO - Features jours f√©ri√©s ajout√©es. Shape: (1415, 138)
2025-11-23 17:33:34,475 - __main__ - INFO - Cr√©ation des features et target...
2025-11-23 17:33:34,475 - __main__ - INFO - --------------------------------
2025-11-23 17:33:34,476 - __main__ - INFO - Horizon: 7
2025-11-23 17:33:34,476 - __main__ - INFO - --------------------------------
2025-11-23 17:33:34,476 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'pm_volatility', 'pm_diff_sum', 'pm_change_ratio', 'pm_last_jump',
       'pm_trend_changes', 'month', 'dayofweek', 'is_holiday_fr',
       'is_bridge_day', 'days_to_holiday'],
      dtype='object', length=138)
2025-11-23 17:33:34,476 - __main__ - INFO - Nombre de features: 67
2025-11-23 17:33:34,478 - __main__ - INFO - X shape: (1415, 67), y shape: (1415,)
2025-11-23 17:33:34,478 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-23 17:33:34,482 - __main__ - INFO - Train: (1132, 67), Test: (283, 67)
2025-11-23 17:33:37,261 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-23 17:33:37,276 - __main__ - INFO - üìä Test MAE: 0.0521
2025-11-23 17:33:37,276 - __main__ - INFO - üìä Test R¬≤: 0.8274
2025-11-23 17:33:37,276 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-23 17:33:37,999 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-23 17:33:38,380 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-23 17:33:38,393 - __main__ - INFO - Sauvegarde locale du mod√®le dans ../results/D09/models...
2025-11-23 17:33:38,427 - __main__ - INFO - üíæ Mod√®le sauvegard√©: ../results/D09/models\xgb_to_predictor.joblib
2025-11-23 17:33:38,428 - __main__ - INFO - üíæ Scaler sauvegard√©: ../results/D09/models\xgb_scaler.joblib
2025-11-23 17:33:38,428 - __main__ - INFO - üíæ Features sauvegard√©es: ../results/D09/models\feature_columns.txt
2025-11-23 17:33:39,599 - __main__ - INFO - ================================================================================
2025-11-23 17:33:39,599 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-23 17:33:39,599 - __main__ - INFO - ================================================================================
2025-11-23 17:33:39,599 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-23 17:33:39,599 - __main__ - INFO -    Train MAE: 0.0005
2025-11-23 17:33:39,600 - __main__ - INFO -    Train R¬≤:  1.0000
2025-11-23 17:33:39,600 - __main__ - INFO -    Test MAE:  0.0521
2025-11-23 17:33:39,600 - __main__ - INFO -    Test R¬≤:   0.8274
2025-11-23 17:38:46,444 - __main__ - INFO - ================================================================================
2025-11-23 17:38:46,444 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 17:38:46,445 - __main__ - INFO - ================================================================================
2025-11-23 17:38:46,445 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 17:38:46,449 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-23 17:38:46,449 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 17:38:46,449 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': '../results/D09/models'}
2025-11-23 17:38:46,449 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 17:38:46,466 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-23 17:38:46,542 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-23 17:38:46,543 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-23 17:38:46,595 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-23 17:38:46,598 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-23 17:38:47,368 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-23 17:38:47,369 - __main__ - INFO - Ajout des features jours f√©ri√©s...
2025-11-23 17:38:48,072 - __main__ - INFO - Features jours f√©ri√©s ajout√©es. Shape: (1415, 138)
2025-11-23 17:38:48,074 - __main__ - INFO - Cr√©ation des features et target...
2025-11-23 17:38:48,074 - __main__ - INFO - --------------------------------
2025-11-23 17:38:48,074 - __main__ - INFO - Horizon: 7
2025-11-23 17:38:48,074 - __main__ - INFO - --------------------------------
2025-11-23 17:38:48,075 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'pm_volatility', 'pm_diff_sum', 'pm_change_ratio', 'pm_last_jump',
       'pm_trend_changes', 'month', 'dayofweek', 'is_holiday_fr',
       'is_bridge_day', 'days_to_holiday'],
      dtype='object', length=138)
2025-11-23 17:38:48,075 - __main__ - INFO - Nombre de features: 67
2025-11-23 17:38:48,078 - __main__ - INFO - X shape: (1415, 67), y shape: (1415,)
2025-11-23 17:38:48,078 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-23 17:38:48,083 - __main__ - INFO - Train: (1132, 67), Test: (283, 67)
2025-11-23 17:38:51,147 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-23 17:38:51,163 - __main__ - INFO - üìä Test MAE: 0.0521
2025-11-23 17:38:51,164 - __main__ - INFO - üìä Test R¬≤: 0.8274
2025-11-23 17:38:51,164 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-23 17:38:51,924 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-23 17:38:52,298 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-23 17:38:52,311 - __main__ - INFO - Sauvegarde locale du mod√®le dans ../results/D09/models...
2025-11-23 17:38:52,353 - __main__ - INFO - üíæ Mod√®le sauvegard√©: ../results/D09/models\xgb_to_predictor.joblib
2025-11-23 17:38:52,354 - __main__ - INFO - üíæ Scaler sauvegard√©: ../results/D09/models\xgb_scaler.joblib
2025-11-23 17:38:52,354 - __main__ - INFO - üíæ Features sauvegard√©es: ../results/D09/models\feature_columns.txt
2025-11-23 17:38:53,531 - __main__ - INFO - ================================================================================
2025-11-23 17:38:53,532 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-23 17:38:53,532 - __main__ - INFO - ================================================================================
2025-11-23 17:38:53,532 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-23 17:38:53,532 - __main__ - INFO -    Train MAE: 0.0005
2025-11-23 17:38:53,533 - __main__ - INFO -    Train R¬≤:  1.0000
2025-11-23 17:38:53,533 - __main__ - INFO -    Test MAE:  0.0521
2025-11-23 17:38:53,533 - __main__ - INFO -    Test R¬≤:   0.8274
2025-11-23 17:41:51,366 - __main__ - INFO - ================================================================================
2025-11-23 17:41:51,367 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 17:41:51,367 - __main__ - INFO - ================================================================================
2025-11-23 17:41:51,367 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 17:41:51,370 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-23 17:41:51,370 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 17:41:51,370 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': '../results/D09/models'}
2025-11-23 17:41:51,371 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 17:41:51,386 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-23 17:41:51,462 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-23 17:41:51,462 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-23 17:41:51,509 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-23 17:41:51,512 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-23 17:41:52,355 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-23 17:41:52,357 - __main__ - INFO - Ajout des features jours f√©ri√©s...
2025-11-23 17:41:52,731 - __main__ - INFO - Features jours f√©ri√©s ajout√©es. Shape: (1415, 138)
2025-11-23 17:41:52,733 - __main__ - INFO - Cr√©ation des features et target...
2025-11-23 17:41:52,733 - __main__ - INFO - --------------------------------
2025-11-23 17:41:52,733 - __main__ - INFO - Horizon: 7
2025-11-23 17:41:52,733 - __main__ - INFO - --------------------------------
2025-11-23 17:41:52,734 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'pm_volatility', 'pm_diff_sum', 'pm_change_ratio', 'pm_last_jump',
       'pm_trend_changes', 'month', 'dayofweek', 'is_holiday_fr',
       'is_bridge_day', 'days_to_holiday'],
      dtype='object', length=138)
2025-11-23 17:41:52,734 - __main__ - INFO - Nombre de features: 67
2025-11-23 17:41:52,736 - __main__ - INFO - X shape: (1415, 67), y shape: (1415,)
2025-11-23 17:41:52,737 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-23 17:41:52,742 - __main__ - INFO - Train: (1132, 67), Test: (283, 67)
2025-11-23 17:41:55,494 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-23 17:41:55,508 - __main__ - INFO - üìä Test MAE: 0.0521
2025-11-23 17:41:55,509 - __main__ - INFO - üìä Test R¬≤: 0.8274
2025-11-23 17:41:55,509 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-23 17:41:55,976 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-23 17:41:56,392 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-23 17:41:56,408 - __main__ - INFO - Sauvegarde locale du mod√®le dans ../results/D09/models...
2025-11-23 17:41:56,446 - __main__ - INFO - üíæ Mod√®le sauvegard√©: ../results/D09/models\xgb_to_predictor.joblib
2025-11-23 17:41:56,446 - __main__ - INFO - üíæ Scaler sauvegard√©: ../results/D09/models\xgb_scaler.joblib
2025-11-23 17:41:56,447 - __main__ - INFO - üíæ Features sauvegard√©es: ../results/D09/models\feature_columns.txt
2025-11-23 17:41:56,633 - __main__ - INFO - üíæ DataFrame d'entra√Ænement sauvegard√©: ../results/D09/models\training_data.csv
2025-11-23 17:41:58,468 - __main__ - INFO - ================================================================================
2025-11-23 17:41:58,468 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-23 17:41:58,469 - __main__ - INFO - ================================================================================
2025-11-23 17:41:58,469 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-23 17:41:58,469 - __main__ - INFO -    Train MAE: 0.0005
2025-11-23 17:41:58,469 - __main__ - INFO -    Train R¬≤:  1.0000
2025-11-23 17:41:58,470 - __main__ - INFO -    Test MAE:  0.0521
2025-11-23 17:41:58,470 - __main__ - INFO -    Test R¬≤:   0.8274
2025-11-23 17:47:38,941 - __main__ - INFO - ================================================================================
2025-11-23 17:47:38,942 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 17:47:38,942 - __main__ - INFO - ================================================================================
2025-11-23 17:47:38,942 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 17:47:38,945 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-23 17:47:38,946 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 17:47:38,946 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': '../results/D09/models'}
2025-11-23 17:47:38,946 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 17:47:38,969 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-23 17:47:39,046 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-23 17:47:39,047 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-23 17:47:39,097 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-23 17:47:39,099 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-23 17:47:39,920 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-23 17:47:39,921 - __main__ - INFO - Ajout des features jours f√©ri√©s...
2025-11-23 17:47:40,303 - __main__ - INFO - Features jours f√©ri√©s ajout√©es. Shape: (1415, 138)
2025-11-23 17:47:40,306 - __main__ - INFO - Cr√©ation des features et target...
2025-11-23 17:47:40,306 - __main__ - INFO - --------------------------------
2025-11-23 17:47:40,306 - __main__ - INFO - Horizon: 7
2025-11-23 17:47:40,306 - __main__ - INFO - --------------------------------
2025-11-23 17:47:40,307 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'pm_volatility', 'pm_diff_sum', 'pm_change_ratio', 'pm_last_jump',
       'pm_trend_changes', 'month', 'dayofweek', 'is_holiday_fr',
       'is_bridge_day', 'days_to_holiday'],
      dtype='object', length=138)
2025-11-23 17:47:40,308 - __main__ - INFO - Nombre de features: 67
2025-11-23 17:47:40,310 - __main__ - INFO - X shape: (1415, 67), y shape: (1415,)
2025-11-23 17:47:40,310 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-23 17:47:40,315 - __main__ - INFO - Train: (1132, 67), Test: (283, 67)
2025-11-23 17:47:43,389 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-23 17:47:43,407 - __main__ - INFO - üìä Test MAE: 0.0521
2025-11-23 17:47:43,407 - __main__ - INFO - üìä Test R¬≤: 0.8274
2025-11-23 17:47:43,407 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-23 17:47:43,971 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-23 17:47:44,377 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-23 17:47:44,392 - __main__ - INFO - Sauvegarde locale du mod√®le dans ../results/D09/models...
2025-11-23 17:47:44,432 - __main__ - INFO - üíæ Mod√®le sauvegard√©: ../results/D09/models\xgb_to_predictor.joblib
2025-11-23 17:47:44,433 - __main__ - INFO - üíæ Scaler sauvegard√©: ../results/D09/models\xgb_scaler.joblib
2025-11-23 17:47:44,433 - __main__ - INFO - üíæ Features sauvegard√©es: ../results/D09/models\feature_columns.txt
2025-11-23 17:47:44,632 - __main__ - INFO - üíæ DataFrame d'entra√Ænement sauvegard√©: ../results/D09/models\training_data.csv
2025-11-23 17:47:46,412 - __main__ - INFO - ================================================================================
2025-11-23 17:47:46,413 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-23 17:47:46,413 - __main__ - INFO - ================================================================================
2025-11-23 17:47:46,413 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-23 17:47:46,413 - __main__ - INFO -    Train MAE: 0.0005
2025-11-23 17:47:46,413 - __main__ - INFO -    Train R¬≤:  1.0000
2025-11-23 17:47:46,414 - __main__ - INFO -    Test MAE:  0.0521
2025-11-23 17:47:46,414 - __main__ - INFO -    Test R¬≤:   0.8274
2025-11-23 17:54:08,427 - __main__ - INFO - ================================================================================
2025-11-23 17:54:08,427 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 17:54:08,427 - __main__ - INFO - ================================================================================
2025-11-23 17:54:08,427 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 17:54:08,430 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-23 17:54:08,430 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 17:54:08,430 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models'}
2025-11-23 17:54:08,430 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 17:54:08,443 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-23 17:54:08,516 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-23 17:54:08,516 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-23 17:54:08,563 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-23 17:54:08,565 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-23 17:54:09,340 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-23 17:54:09,341 - __main__ - INFO - Ajout des features jours f√©ri√©s...
2025-11-23 17:54:09,714 - __main__ - INFO - Features jours f√©ri√©s ajout√©es. Shape: (1415, 138)
2025-11-23 17:54:09,716 - __main__ - INFO - Cr√©ation des features et target...
2025-11-23 17:54:09,716 - __main__ - INFO - --------------------------------
2025-11-23 17:54:09,716 - __main__ - INFO - Horizon: 7
2025-11-23 17:54:09,716 - __main__ - INFO - --------------------------------
2025-11-23 17:54:09,717 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'pm_volatility', 'pm_diff_sum', 'pm_change_ratio', 'pm_last_jump',
       'pm_trend_changes', 'month', 'dayofweek', 'is_holiday_fr',
       'is_bridge_day', 'days_to_holiday'],
      dtype='object', length=138)
2025-11-23 17:54:09,717 - __main__ - INFO - Nombre de features: 67
2025-11-23 17:54:09,719 - __main__ - INFO - X shape: (1415, 67), y shape: (1415,)
2025-11-23 17:54:09,719 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-23 17:54:09,723 - __main__ - INFO - Train: (1132, 67), Test: (283, 67)
2025-11-23 17:54:12,410 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-23 17:54:12,428 - __main__ - INFO - üìä Test MAE: 0.0521
2025-11-23 17:54:12,428 - __main__ - INFO - üìä Test R¬≤: 0.8274
2025-11-23 17:54:12,428 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-23 17:54:12,895 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-23 17:54:13,247 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-23 17:54:13,263 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/D09/models...
2025-11-23 17:54:13,303 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/D09/models\xgb_to_predictor.joblib
2025-11-23 17:54:13,303 - __main__ - INFO - üíæ Scaler sauvegard√©: results/D09/models\xgb_scaler.joblib
2025-11-23 17:54:13,304 - __main__ - INFO - üíæ Features sauvegard√©es: results/D09/models\feature_columns.txt
2025-11-23 17:54:14,710 - __main__ - INFO - ================================================================================
2025-11-23 17:54:14,710 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-23 17:54:14,711 - __main__ - INFO - ================================================================================
2025-11-23 17:54:14,711 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-23 17:54:14,711 - __main__ - INFO -    Train MAE: 0.0005
2025-11-23 17:54:14,711 - __main__ - INFO -    Train R¬≤:  1.0000
2025-11-23 17:54:14,711 - __main__ - INFO -    Test MAE:  0.0521
2025-11-23 17:54:14,712 - __main__ - INFO -    Test R¬≤:   0.8274
2025-11-23 17:58:06,121 - __main__ - INFO - ================================================================================
2025-11-23 17:58:06,121 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 17:58:06,122 - __main__ - INFO - ================================================================================
2025-11-23 17:58:06,122 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 17:58:06,125 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-23 17:58:06,125 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 17:58:06,125 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models'}
2025-11-23 17:58:06,125 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 17:58:06,138 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-23 17:58:06,217 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-23 17:58:06,218 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-23 17:58:06,266 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-23 17:58:06,270 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-23 17:58:07,220 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-23 17:58:07,222 - __main__ - INFO - Ajout des features jours f√©ri√©s...
2025-11-23 17:58:07,625 - __main__ - INFO - Features jours f√©ri√©s ajout√©es. Shape: (1415, 138)
2025-11-23 17:58:07,627 - __main__ - INFO - Cr√©ation des features et target...
2025-11-23 17:58:07,627 - __main__ - INFO - --------------------------------
2025-11-23 17:58:07,627 - __main__ - INFO - Horizon: 7
2025-11-23 17:58:07,628 - __main__ - INFO - --------------------------------
2025-11-23 17:58:07,628 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'pm_volatility', 'pm_diff_sum', 'pm_change_ratio', 'pm_last_jump',
       'pm_trend_changes', 'month', 'dayofweek', 'is_holiday_fr',
       'is_bridge_day', 'days_to_holiday'],
      dtype='object', length=138)
2025-11-23 17:58:07,628 - __main__ - INFO - Nombre de features: 67
2025-11-23 17:58:07,631 - __main__ - INFO - X shape: (1415, 67), y shape: (1415,)
2025-11-23 17:58:07,631 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-23 17:58:07,736 - __main__ - INFO - üíæ Donn√©es d'entra√Ænement sauvegard√©es: results/D09\training_data_before_scaling.csv
2025-11-23 17:58:07,736 - __main__ - INFO -    Shape: (1415, 68)
2025-11-23 17:58:07,741 - __main__ - INFO - Train: (1132, 67), Test: (283, 67)
2025-11-23 17:58:11,456 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-23 17:58:11,477 - __main__ - INFO - üìä Test MAE: 0.0521
2025-11-23 17:58:11,478 - __main__ - INFO - üìä Test R¬≤: 0.8274
2025-11-23 17:58:11,478 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-23 17:58:11,930 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-23 17:58:12,307 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-23 17:58:12,318 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/D09/models...
2025-11-23 17:58:12,353 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/D09/models\xgb_to_predictor.joblib
2025-11-23 17:58:12,354 - __main__ - INFO - üíæ Scaler sauvegard√©: results/D09/models\xgb_scaler.joblib
2025-11-23 17:58:12,354 - __main__ - INFO - üíæ Features sauvegard√©es: results/D09/models\feature_columns.txt
2025-11-23 17:58:13,467 - __main__ - INFO - ================================================================================
2025-11-23 17:58:13,467 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-23 17:58:13,467 - __main__ - INFO - ================================================================================
2025-11-23 17:58:13,468 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-23 17:58:13,468 - __main__ - INFO -    Train MAE: 0.0005
2025-11-23 17:58:13,468 - __main__ - INFO -    Train R¬≤:  1.0000
2025-11-23 17:58:13,468 - __main__ - INFO -    Test MAE:  0.0521
2025-11-23 17:58:13,468 - __main__ - INFO -    Test R¬≤:   0.8274
2025-11-23 18:08:55,382 - __main__ - INFO - ================================================================================
2025-11-23 18:08:55,382 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 18:08:55,382 - __main__ - INFO - ================================================================================
2025-11-23 18:08:55,382 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 18:08:55,386 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-23 18:08:55,386 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 18:08:55,387 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models'}
2025-11-23 18:08:55,387 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 18:08:55,415 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-23 18:08:55,492 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-23 18:08:55,492 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-23 18:08:55,544 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-23 18:08:55,548 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-23 18:08:56,345 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-23 18:08:56,346 - __main__ - INFO - Ajout des features jours f√©ri√©s...
2025-11-23 18:08:57,054 - __main__ - INFO - Jours f√©ri√©s: dict_keys([datetime.date(2024, 1, 1), datetime.date(2024, 4, 1), datetime.date(2024, 5, 20), datetime.date(2024, 5, 1), datetime.date(2024, 5, 8), datetime.date(2024, 5, 9), datetime.date(2024, 7, 14), datetime.date(2024, 8, 15), datetime.date(2024, 11, 1), datetime.date(2024, 11, 11), datetime.date(2024, 12, 25), datetime.date(2025, 1, 1), datetime.date(2025, 4, 21), datetime.date(2025, 6, 9), datetime.date(2025, 5, 1), datetime.date(2025, 5, 8), datetime.date(2025, 5, 29), datetime.date(2025, 7, 14), datetime.date(2025, 8, 15), datetime.date(2025, 11, 1), datetime.date(2025, 11, 11), datetime.date(2025, 12, 25), datetime.date(2022, 1, 1), datetime.date(2022, 4, 18), datetime.date(2022, 6, 6), datetime.date(2022, 5, 1), datetime.date(2022, 5, 8), datetime.date(2022, 5, 26), datetime.date(2022, 7, 14), datetime.date(2022, 8, 15), datetime.date(2022, 11, 1), datetime.date(2022, 11, 11), datetime.date(2022, 12, 25), datetime.date(2023, 1, 1), datetime.date(2023, 4, 10), datetime.date(2023, 5, 29), datetime.date(2023, 5, 1), datetime.date(2023, 5, 8), datetime.date(2023, 5, 18), datetime.date(2023, 7, 14), datetime.date(2023, 8, 15), datetime.date(2023, 11, 1), datetime.date(2023, 11, 11), datetime.date(2023, 12, 25)])
2025-11-23 18:08:57,075 - __main__ - INFO - Features jours f√©ri√©s ajout√©es. Shape: (1415, 138)
2025-11-23 18:08:57,077 - __main__ - INFO - Cr√©ation des features et target...
2025-11-23 18:08:57,078 - __main__ - INFO - --------------------------------
2025-11-23 18:08:57,078 - __main__ - INFO - Horizon: 7
2025-11-23 18:08:57,078 - __main__ - INFO - --------------------------------
2025-11-23 18:08:57,079 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'pm_volatility', 'pm_diff_sum', 'pm_change_ratio', 'pm_last_jump',
       'pm_trend_changes', 'month', 'dayofweek', 'is_holiday_fr',
       'is_bridge_day', 'days_to_holiday'],
      dtype='object', length=138)
2025-11-23 18:08:57,079 - __main__ - INFO - Nombre de features: 67
2025-11-23 18:08:57,082 - __main__ - INFO - X shape: (1415, 67), y shape: (1415,)
2025-11-23 18:08:57,082 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-23 18:08:57,088 - __main__ - WARNING - ‚ö†Ô∏è  Erreur lors de la sauvegarde des donn√©es d'entra√Ænement: [Errno 13] Permission denied: 'results/D09\\training_data_before_scaling.csv'
2025-11-23 18:08:57,093 - __main__ - INFO - Train: (1132, 67), Test: (283, 67)
2025-11-23 18:08:59,666 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-23 18:08:59,685 - __main__ - INFO - üìä Test MAE: 0.0518
2025-11-23 18:08:59,685 - __main__ - INFO - üìä Test R¬≤: 0.8375
2025-11-23 18:08:59,686 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-23 18:09:00,379 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-23 18:09:00,711 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-23 18:09:00,724 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/D09/models...
2025-11-23 18:09:00,760 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/D09/models\xgb_to_predictor.joblib
2025-11-23 18:09:00,761 - __main__ - INFO - üíæ Scaler sauvegard√©: results/D09/models\xgb_scaler.joblib
2025-11-23 18:09:00,761 - __main__ - INFO - üíæ Features sauvegard√©es: results/D09/models\feature_columns.txt
2025-11-23 18:09:01,950 - __main__ - INFO - ================================================================================
2025-11-23 18:09:01,950 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-23 18:09:01,951 - __main__ - INFO - ================================================================================
2025-11-23 18:09:01,951 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-23 18:09:01,951 - __main__ - INFO -    Train MAE: 0.0005
2025-11-23 18:09:01,951 - __main__ - INFO -    Train R¬≤:  1.0000
2025-11-23 18:09:01,951 - __main__ - INFO -    Test MAE:  0.0518
2025-11-23 18:09:01,952 - __main__ - INFO -    Test R¬≤:   0.8375
2025-11-23 18:09:45,752 - __main__ - INFO - ================================================================================
2025-11-23 18:09:45,752 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 18:09:45,752 - __main__ - INFO - ================================================================================
2025-11-23 18:09:45,753 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 18:09:45,757 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-23 18:09:45,757 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 18:09:45,757 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models'}
2025-11-23 18:09:45,757 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 18:09:45,773 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-23 18:09:45,861 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-23 18:09:45,861 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-23 18:09:45,916 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-23 18:09:45,919 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-23 18:09:47,023 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-23 18:09:47,024 - __main__ - INFO - Ajout des features jours f√©ri√©s...
2025-11-23 18:09:47,430 - __main__ - INFO - Features jours f√©ri√©s ajout√©es. Shape: (1415, 138)
2025-11-23 18:09:47,432 - __main__ - INFO - Cr√©ation des features et target...
2025-11-23 18:09:47,432 - __main__ - INFO - --------------------------------
2025-11-23 18:09:47,432 - __main__ - INFO - Horizon: 7
2025-11-23 18:09:47,432 - __main__ - INFO - --------------------------------
2025-11-23 18:09:47,433 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'pm_volatility', 'pm_diff_sum', 'pm_change_ratio', 'pm_last_jump',
       'pm_trend_changes', 'month', 'dayofweek', 'is_holiday_fr',
       'is_bridge_day', 'days_to_holiday'],
      dtype='object', length=138)
2025-11-23 18:09:47,433 - __main__ - INFO - Nombre de features: 67
2025-11-23 18:09:47,435 - __main__ - INFO - X shape: (1415, 67), y shape: (1415,)
2025-11-23 18:09:47,435 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-23 18:09:47,525 - __main__ - INFO - üíæ Donn√©es d'entra√Ænement sauvegard√©es: results/D09\training_data_before_scaling.csv
2025-11-23 18:09:47,525 - __main__ - INFO -    Shape: (1415, 68)
2025-11-23 18:09:47,529 - __main__ - INFO - Train: (1132, 67), Test: (283, 67)
2025-11-23 18:09:50,880 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-23 18:09:50,901 - __main__ - INFO - üìä Test MAE: 0.0518
2025-11-23 18:09:50,901 - __main__ - INFO - üìä Test R¬≤: 0.8375
2025-11-23 18:09:50,901 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-23 18:09:51,374 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-23 18:09:51,741 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-23 18:09:51,754 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/D09/models...
2025-11-23 18:09:51,789 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/D09/models\xgb_to_predictor.joblib
2025-11-23 18:09:51,789 - __main__ - INFO - üíæ Scaler sauvegard√©: results/D09/models\xgb_scaler.joblib
2025-11-23 18:09:51,790 - __main__ - INFO - üíæ Features sauvegard√©es: results/D09/models\feature_columns.txt
2025-11-23 18:09:52,971 - __main__ - INFO - ================================================================================
2025-11-23 18:09:52,971 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-23 18:09:52,971 - __main__ - INFO - ================================================================================
2025-11-23 18:09:52,971 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-23 18:09:52,971 - __main__ - INFO -    Train MAE: 0.0005
2025-11-23 18:09:52,972 - __main__ - INFO -    Train R¬≤:  1.0000
2025-11-23 18:09:52,972 - __main__ - INFO -    Test MAE:  0.0518
2025-11-23 18:09:52,972 - __main__ - INFO -    Test R¬≤:   0.8375
2025-11-23 20:06:23,755 - __main__ - INFO - ================================================================================
2025-11-23 20:06:23,756 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 20:06:23,757 - __main__ - INFO - ================================================================================
2025-11-23 20:06:23,757 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 20:06:23,760 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-23 20:06:23,760 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 20:06:23,760 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models'}
2025-11-23 20:06:23,760 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 20:06:23,806 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-23 20:06:23,904 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-23 20:06:23,905 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-23 20:06:23,979 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-23 20:06:23,982 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-23 20:06:24,797 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-23 20:06:24,804 - __main__ - INFO - Ajout des features jours f√©ri√©s...
2025-11-23 20:06:25,659 - __main__ - INFO - Features jours f√©ri√©s ajout√©es. Shape: (1415, 138)
2025-11-23 20:06:25,659 - __main__ - INFO -    - Jours f√©ri√©s: 43 (3.04%)
2025-11-23 20:06:25,660 - __main__ - INFO -    - Jours de pont: 85 (6.01%)
2025-11-23 20:06:25,660 - __main__ - INFO -    - Distance au f√©ri√©: min=0, max=90, moyenne=30.2
2025-11-23 20:06:25,661 - __main__ - INFO - Cr√©ation des features et target...
2025-11-23 20:06:25,662 - __main__ - INFO - --------------------------------
2025-11-23 20:06:25,662 - __main__ - INFO - Horizon: 7
2025-11-23 20:06:25,662 - __main__ - INFO - --------------------------------
2025-11-23 20:06:25,662 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'pm_volatility', 'pm_diff_sum', 'pm_change_ratio', 'pm_last_jump',
       'pm_trend_changes', 'month', 'dayofweek', 'is_holiday_fr',
       'is_bridge_day', 'days_to_holiday'],
      dtype='object', length=138)
2025-11-23 20:06:25,663 - __main__ - INFO - Nombre de features: 67
2025-11-23 20:06:25,665 - __main__ - INFO - X shape: (1415, 67), y shape: (1415,)
2025-11-23 20:06:25,665 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-23 20:06:25,672 - __main__ - WARNING - ‚ö†Ô∏è  Erreur lors de la sauvegarde des donn√©es d'entra√Ænement: [Errno 13] Permission denied: 'results/D09\\training_data_before_scaling.csv'
2025-11-23 20:06:25,678 - __main__ - INFO - Train: (1132, 67), Test: (283, 67)
2025-11-23 20:06:28,462 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-23 20:06:28,480 - __main__ - INFO - üìä Test MAE: 0.0517
2025-11-23 20:06:28,481 - __main__ - INFO - üìä Test R¬≤: 0.8334
2025-11-23 20:06:28,482 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-23 20:06:29,281 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-23 20:06:29,653 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-23 20:06:29,665 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/D09/models...
2025-11-23 20:06:29,711 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/D09/models\xgb_to_predictor.joblib
2025-11-23 20:06:29,711 - __main__ - INFO - üíæ Scaler sauvegard√©: results/D09/models\xgb_scaler.joblib
2025-11-23 20:06:29,712 - __main__ - INFO - üíæ Features sauvegard√©es: results/D09/models\feature_columns.txt
2025-11-23 20:06:30,606 - __main__ - INFO - ================================================================================
2025-11-23 20:06:30,606 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-23 20:06:30,607 - __main__ - INFO - ================================================================================
2025-11-23 20:06:30,607 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-23 20:06:30,607 - __main__ - INFO -    Train MAE: 0.0005
2025-11-23 20:06:30,607 - __main__ - INFO -    Train R¬≤:  1.0000
2025-11-23 20:06:30,607 - __main__ - INFO -    Test MAE:  0.0517
2025-11-23 20:06:30,607 - __main__ - INFO -    Test R¬≤:   0.8334
2025-11-23 20:07:14,283 - __main__ - INFO - ================================================================================
2025-11-23 20:07:14,283 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 20:07:14,283 - __main__ - INFO - ================================================================================
2025-11-23 20:07:14,283 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 20:07:14,286 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-23 20:07:14,286 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 20:07:14,286 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models'}
2025-11-23 20:07:14,287 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 20:07:14,303 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-23 20:07:14,386 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-23 20:07:14,387 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-23 20:07:14,437 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-23 20:07:14,440 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-23 20:07:15,301 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-23 20:07:15,302 - __main__ - INFO - Ajout des features jours f√©ri√©s...
2025-11-23 20:07:15,678 - __main__ - INFO - Features jours f√©ri√©s ajout√©es. Shape: (1415, 138)
2025-11-23 20:07:15,678 - __main__ - INFO -    - Jours f√©ri√©s: 43 (3.04%)
2025-11-23 20:07:15,679 - __main__ - INFO -    - Jours de pont: 85 (6.01%)
2025-11-23 20:07:15,679 - __main__ - INFO -    - Distance au f√©ri√©: min=0, max=90, moyenne=30.2
2025-11-23 20:07:15,681 - __main__ - INFO - Cr√©ation des features et target...
2025-11-23 20:07:15,681 - __main__ - INFO - --------------------------------
2025-11-23 20:07:15,681 - __main__ - INFO - Horizon: 7
2025-11-23 20:07:15,681 - __main__ - INFO - --------------------------------
2025-11-23 20:07:15,681 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'pm_volatility', 'pm_diff_sum', 'pm_change_ratio', 'pm_last_jump',
       'pm_trend_changes', 'month', 'dayofweek', 'is_holiday_fr',
       'is_bridge_day', 'days_to_holiday'],
      dtype='object', length=138)
2025-11-23 20:07:15,682 - __main__ - INFO - Nombre de features: 67
2025-11-23 20:07:15,683 - __main__ - INFO - X shape: (1415, 67), y shape: (1415,)
2025-11-23 20:07:15,684 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-23 20:07:15,772 - __main__ - INFO - üíæ Donn√©es d'entra√Ænement sauvegard√©es: results/D09\training_data_before_scaling.csv
2025-11-23 20:07:15,773 - __main__ - INFO -    Shape: (1415, 68)
2025-11-23 20:07:15,777 - __main__ - INFO - Train: (1132, 67), Test: (283, 67)
2025-11-23 20:07:19,135 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-23 20:07:19,151 - __main__ - INFO - üìä Test MAE: 0.0517
2025-11-23 20:07:19,151 - __main__ - INFO - üìä Test R¬≤: 0.8334
2025-11-23 20:07:19,152 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-23 20:07:19,629 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-23 20:07:19,991 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-23 20:07:20,003 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/D09/models...
2025-11-23 20:07:20,042 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/D09/models\xgb_to_predictor.joblib
2025-11-23 20:07:20,043 - __main__ - INFO - üíæ Scaler sauvegard√©: results/D09/models\xgb_scaler.joblib
2025-11-23 20:07:20,043 - __main__ - INFO - üíæ Features sauvegard√©es: results/D09/models\feature_columns.txt
2025-11-23 20:07:20,960 - __main__ - INFO - ================================================================================
2025-11-23 20:07:20,960 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-23 20:07:20,960 - __main__ - INFO - ================================================================================
2025-11-23 20:07:20,961 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-23 20:07:20,961 - __main__ - INFO -    Train MAE: 0.0005
2025-11-23 20:07:20,961 - __main__ - INFO -    Train R¬≤:  1.0000
2025-11-23 20:07:20,962 - __main__ - INFO -    Test MAE:  0.0517
2025-11-23 20:07:20,962 - __main__ - INFO -    Test R¬≤:   0.8334
2025-11-23 20:15:18,706 - __main__ - INFO - ================================================================================
2025-11-23 20:15:18,707 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 20:15:18,707 - __main__ - INFO - ================================================================================
2025-11-23 20:15:18,707 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 20:15:18,711 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-23 20:15:18,711 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 20:15:18,711 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models'}
2025-11-23 20:15:18,711 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 20:15:18,736 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-23 20:15:18,838 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-23 20:15:18,838 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-23 20:15:18,925 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-23 20:15:18,928 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-23 20:15:20,188 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-23 20:15:20,190 - __main__ - INFO - Ajout des features jours f√©ri√©s...
2025-11-23 20:15:20,655 - __main__ - INFO - Features jours f√©ri√©s ajout√©es. Shape: (1415, 138)
2025-11-23 20:15:20,656 - __main__ - INFO -    - Jours f√©ri√©s: 43 (3.04%)
2025-11-23 20:15:20,656 - __main__ - INFO -    - Jours de pont: 85 (6.01%)
2025-11-23 20:15:20,657 - __main__ - INFO -    - Distance au f√©ri√©: min=0, max=90, moyenne=30.2
2025-11-23 20:15:20,659 - __main__ - INFO - Cr√©ation des features et target...
2025-11-23 20:15:20,659 - __main__ - INFO - --------------------------------
2025-11-23 20:15:20,659 - __main__ - INFO - Horizon: 7
2025-11-23 20:15:20,659 - __main__ - INFO - --------------------------------
2025-11-23 20:15:20,660 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'pm_volatility', 'pm_diff_sum', 'pm_change_ratio', 'pm_last_jump',
       'pm_trend_changes', 'month', 'dayofweek', 'is_holiday_fr',
       'is_bridge_day', 'days_to_holiday'],
      dtype='object', length=138)
2025-11-23 20:15:20,660 - __main__ - INFO - Nombre de features: 67
2025-11-23 20:15:20,862 - __main__ - INFO - üíæ Donn√©es d'entra√Ænement brutes sauvegard√©es: results/D09\training_data_before_scaling.csv
2025-11-23 20:15:20,863 - __main__ - INFO -    Shape: (1415, 138)
2025-11-23 20:15:20,863 - __main__ - INFO -    Colonnes: 138 colonnes au total
2025-11-23 20:15:20,863 - __main__ - INFO - X shape: (1415, 67), y shape: (1415,)
2025-11-23 20:15:20,864 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-23 20:15:20,870 - __main__ - INFO - Train: (1132, 67), Test: (283, 67)
2025-11-23 20:15:24,325 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-23 20:15:24,340 - __main__ - INFO - üìä Test MAE: 0.0517
2025-11-23 20:15:24,341 - __main__ - INFO - üìä Test R¬≤: 0.8334
2025-11-23 20:15:24,341 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-23 20:15:24,793 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-23 20:15:25,154 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-23 20:15:25,166 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/D09/models...
2025-11-23 20:15:25,204 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/D09/models\xgb_to_predictor.joblib
2025-11-23 20:15:25,205 - __main__ - INFO - üíæ Scaler sauvegard√©: results/D09/models\xgb_scaler.joblib
2025-11-23 20:15:25,205 - __main__ - INFO - üíæ Features sauvegard√©es: results/D09/models\feature_columns.txt
2025-11-23 20:15:26,198 - __main__ - INFO - ================================================================================
2025-11-23 20:15:26,198 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-23 20:15:26,199 - __main__ - INFO - ================================================================================
2025-11-23 20:15:26,199 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-23 20:15:26,199 - __main__ - INFO -    Train MAE: 0.0005
2025-11-23 20:15:26,200 - __main__ - INFO -    Train R¬≤:  1.0000
2025-11-23 20:15:26,200 - __main__ - INFO -    Test MAE:  0.0517
2025-11-23 20:15:26,200 - __main__ - INFO -    Test R¬≤:   0.8334
2025-11-23 20:28:33,678 - __main__ - INFO - ================================================================================
2025-11-23 20:28:33,679 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 20:28:33,679 - __main__ - INFO - ================================================================================
2025-11-23 20:28:33,679 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 20:28:33,682 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-23 20:28:33,682 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 20:28:33,682 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models'}
2025-11-23 20:28:33,682 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 20:28:33,700 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-23 20:28:33,774 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-23 20:28:33,774 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-23 20:28:33,824 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-23 20:28:33,828 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-23 20:28:34,621 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-23 20:28:34,622 - __main__ - INFO - Ajout des features jours f√©ri√©s...
2025-11-23 20:28:34,993 - __main__ - INFO - Features jours f√©ri√©s ajout√©es. Shape: (1415, 138)
2025-11-23 20:28:34,993 - __main__ - INFO -    - Jours f√©ri√©s: 43 (3.04%)
2025-11-23 20:28:34,994 - __main__ - INFO -    - Jours de pont: 85 (6.01%)
2025-11-23 20:28:34,994 - __main__ - INFO -    - Proximit√© au f√©ri√©: min=0.011, max=1.000, moyenne=0.110
2025-11-23 20:28:34,995 - __main__ - INFO - Cr√©ation des features et target...
2025-11-23 20:28:34,996 - __main__ - INFO - --------------------------------
2025-11-23 20:28:34,996 - __main__ - INFO - Horizon: 7
2025-11-23 20:28:34,996 - __main__ - INFO - --------------------------------
2025-11-23 20:28:34,996 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'pm_volatility', 'pm_diff_sum', 'pm_change_ratio', 'pm_last_jump',
       'pm_trend_changes', 'month', 'dayofweek', 'is_holiday_fr',
       'is_bridge_day', 'holiday_proximity_score'],
      dtype='object', length=138)
2025-11-23 20:28:34,997 - __main__ - INFO - Nombre de features: 67
2025-11-23 20:28:35,004 - __main__ - WARNING - ‚ö†Ô∏è  Erreur lors de la sauvegarde des donn√©es d'entra√Ænement: [Errno 13] Permission denied: 'results/D09\\training_data_before_scaling.csv'
2025-11-23 20:28:35,005 - __main__ - INFO - X shape: (1415, 67), y shape: (1415,)
2025-11-23 20:28:35,005 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-23 20:28:35,010 - __main__ - INFO - Train: (1132, 67), Test: (283, 67)
2025-11-23 20:28:38,062 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-23 20:28:38,075 - __main__ - INFO - üìä Test MAE: 0.0520
2025-11-23 20:28:38,076 - __main__ - INFO - üìä Test R¬≤: 0.8309
2025-11-23 20:28:38,076 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-23 20:28:38,555 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-23 20:28:38,964 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-23 20:28:38,978 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/D09/models...
2025-11-23 20:28:39,016 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/D09/models\xgb_to_predictor.joblib
2025-11-23 20:28:39,017 - __main__ - INFO - üíæ Scaler sauvegard√©: results/D09/models\xgb_scaler.joblib
2025-11-23 20:28:39,017 - __main__ - INFO - üíæ Features sauvegard√©es: results/D09/models\feature_columns.txt
2025-11-23 20:28:39,877 - __main__ - INFO - ================================================================================
2025-11-23 20:28:39,877 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-23 20:28:39,877 - __main__ - INFO - ================================================================================
2025-11-23 20:28:39,878 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-23 20:28:39,878 - __main__ - INFO -    Train MAE: 0.0005
2025-11-23 20:28:39,878 - __main__ - INFO -    Train R¬≤:  1.0000
2025-11-23 20:28:39,878 - __main__ - INFO -    Test MAE:  0.0520
2025-11-23 20:28:39,878 - __main__ - INFO -    Test R¬≤:   0.8309
2025-11-23 20:29:22,607 - __main__ - INFO - ================================================================================
2025-11-23 20:29:22,608 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 20:29:22,608 - __main__ - INFO - ================================================================================
2025-11-23 20:29:22,608 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 20:29:22,613 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-23 20:29:22,613 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 20:29:22,614 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models'}
2025-11-23 20:29:22,614 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 20:29:22,644 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-23 20:29:22,769 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-23 20:29:22,769 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-23 20:29:22,855 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-23 20:29:22,860 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-23 20:29:24,407 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-23 20:29:24,408 - __main__ - INFO - Ajout des features jours f√©ri√©s...
2025-11-23 20:29:25,034 - __main__ - INFO - Features jours f√©ri√©s ajout√©es. Shape: (1415, 138)
2025-11-23 20:29:25,034 - __main__ - INFO -    - Jours f√©ri√©s: 43 (3.04%)
2025-11-23 20:29:25,035 - __main__ - INFO -    - Jours de pont: 85 (6.01%)
2025-11-23 20:29:25,035 - __main__ - INFO -    - Distance au f√©ri√©: min=0, max=90, moyenne=30.2
2025-11-23 20:29:25,038 - __main__ - INFO - Cr√©ation des features et target...
2025-11-23 20:29:25,038 - __main__ - INFO - --------------------------------
2025-11-23 20:29:25,039 - __main__ - INFO - Horizon: 7
2025-11-23 20:29:25,039 - __main__ - INFO - --------------------------------
2025-11-23 20:29:25,039 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'pm_volatility', 'pm_diff_sum', 'pm_change_ratio', 'pm_last_jump',
       'pm_trend_changes', 'month', 'dayofweek', 'is_holiday_fr',
       'is_bridge_day', 'days_to_holiday'],
      dtype='object', length=138)
2025-11-23 20:29:25,040 - __main__ - INFO - Nombre de features: 67
2025-11-23 20:29:25,263 - __main__ - INFO - üíæ Donn√©es d'entra√Ænement brutes sauvegard√©es: results/D09\training_data_before_scaling.csv
2025-11-23 20:29:25,263 - __main__ - INFO -    Shape: (1415, 138)
2025-11-23 20:29:25,263 - __main__ - INFO -    Colonnes: 138 colonnes au total
2025-11-23 20:29:25,264 - __main__ - INFO - X shape: (1415, 67), y shape: (1415,)
2025-11-23 20:29:25,264 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-23 20:29:25,272 - __main__ - INFO - Train: (1132, 67), Test: (283, 67)
2025-11-23 20:29:30,525 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-23 20:29:30,551 - __main__ - INFO - üìä Test MAE: 0.0517
2025-11-23 20:29:30,552 - __main__ - INFO - üìä Test R¬≤: 0.8334
2025-11-23 20:29:30,552 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-23 20:29:31,092 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-23 20:29:31,553 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-23 20:29:31,570 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/D09/models...
2025-11-23 20:29:31,618 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/D09/models\xgb_to_predictor.joblib
2025-11-23 20:29:31,619 - __main__ - INFO - üíæ Scaler sauvegard√©: results/D09/models\xgb_scaler.joblib
2025-11-23 20:29:31,619 - __main__ - INFO - üíæ Features sauvegard√©es: results/D09/models\feature_columns.txt
2025-11-23 20:29:32,772 - __main__ - INFO - ================================================================================
2025-11-23 20:29:32,773 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-23 20:29:32,773 - __main__ - INFO - ================================================================================
2025-11-23 20:29:32,773 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-23 20:29:32,774 - __main__ - INFO -    Train MAE: 0.0005
2025-11-23 20:29:32,774 - __main__ - INFO -    Train R¬≤:  1.0000
2025-11-23 20:29:32,774 - __main__ - INFO -    Test MAE:  0.0517
2025-11-23 20:29:32,774 - __main__ - INFO -    Test R¬≤:   0.8334
2025-11-23 20:34:04,742 - __main__ - INFO - ================================================================================
2025-11-23 20:34:04,743 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 20:34:04,743 - __main__ - INFO - ================================================================================
2025-11-23 20:34:04,743 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 20:34:04,746 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-23 20:34:04,746 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 20:34:04,746 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models'}
2025-11-23 20:34:04,746 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 20:34:04,761 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-23 20:34:04,845 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-23 20:34:04,845 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-23 20:34:04,894 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-23 20:34:04,898 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-23 20:34:05,724 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-23 20:34:05,726 - __main__ - INFO - Ajout des features jours f√©ri√©s...
2025-11-23 20:34:06,118 - __main__ - INFO - Ajout des vacances scolaires...
2025-11-23 20:34:06,216 - __main__ - INFO - Ajout des weekends prolong√©s...
2025-11-23 20:34:06,221 - __main__ - ERROR - ‚ùå ERREUR FATALE: 'datetime.date' object has no attribute 'date'
Traceback (most recent call last):
  File "C:\github\ml-demande\demande\predictTo\predictTo_train_model.py", line 877, in main
    df = predictor.prepare_data(clusters, indicateurs)
  File "C:\github\ml-demande\demande\predictTo\predictTo_train_model.py", line 435, in prepare_data
    df["is_long_weekend_3j"] = df["stay_date"].apply(is_long_weekend_3days)
                               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\github\ml-demande\.venv_ml\Lib\site-packages\pandas\core\series.py", line 4943, in apply
    ).apply()
      ~~~~~^^
  File "C:\github\ml-demande\.venv_ml\Lib\site-packages\pandas\core\apply.py", line 1422, in apply
    return self.apply_standard()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\github\ml-demande\.venv_ml\Lib\site-packages\pandas\core\apply.py", line 1502, in apply_standard
    mapped = obj._map_values(
        mapper=curried, na_action=action, convert=self.convert_dtype
    )
  File "C:\github\ml-demande\.venv_ml\Lib\site-packages\pandas\core\base.py", line 923, in _map_values
    return arr.map(mapper, na_action=na_action)
           ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\github\ml-demande\.venv_ml\Lib\site-packages\pandas\core\arrays\_mixins.py", line 81, in method
    return meth(self, *args, **kwargs)
  File "C:\github\ml-demande\.venv_ml\Lib\site-packages\pandas\core\arrays\datetimelike.py", line 763, in map
    result = map_array(self, mapper, na_action=na_action)
  File "C:\github\ml-demande\.venv_ml\Lib\site-packages\pandas\core\algorithms.py", line 1743, in map_array
    return lib.map_infer(values, mapper, convert=convert)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "pandas/_libs/lib.pyx", line 2999, in pandas._libs.lib.map_infer
  File "C:\github\ml-demande\demande\predictTo\predictTo_train_model.py", line 393, in is_long_weekend_3days
    if dow == 5 and (d - pd.Timedelta(days=1)).date() in fr_holidays:  # Samedi apr√®s vendredi f√©ri√©
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'datetime.date' object has no attribute 'date'
2025-11-23 20:36:02,474 - __main__ - INFO - ================================================================================
2025-11-23 20:36:02,474 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 20:36:02,475 - __main__ - INFO - ================================================================================
2025-11-23 20:36:02,475 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 20:36:02,478 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-23 20:36:02,478 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 20:36:02,478 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models'}
2025-11-23 20:36:02,478 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 20:36:02,496 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-23 20:36:02,580 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-23 20:36:02,580 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-23 20:36:02,627 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-23 20:36:02,631 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-23 20:36:03,691 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-23 20:36:03,693 - __main__ - INFO - Ajout des features jours f√©ri√©s...
2025-11-23 20:36:04,330 - __main__ - INFO - Ajout des vacances scolaires...
2025-11-23 20:36:04,455 - __main__ - INFO - Ajout des weekends prolong√©s...
2025-11-23 20:36:04,474 - __main__ - INFO - Features jours f√©ri√©s et vacances ajout√©es. Shape: (1415, 141)
2025-11-23 20:36:04,474 - __main__ - INFO -    - Jours f√©ri√©s: 43 (3.04%)
2025-11-23 20:36:04,475 - __main__ - INFO -    - Jours de pont: 85 (6.01%)
2025-11-23 20:36:04,475 - __main__ - INFO -    - Distance au f√©ri√©: min=0, max=90, moyenne=30.2
2025-11-23 20:36:04,476 - __main__ - INFO -    - Vacances scolaires: 590 (41.70%)
2025-11-23 20:36:04,476 - __main__ - INFO -    - Weekends 3j: 57 (4.03%)
2025-11-23 20:36:04,477 - __main__ - INFO -    - Weekends 4j: 101 (7.14%)
2025-11-23 20:36:04,479 - __main__ - INFO - Cr√©ation des features et target...
2025-11-23 20:36:04,479 - __main__ - INFO - --------------------------------
2025-11-23 20:36:04,479 - __main__ - INFO - Horizon: 7
2025-11-23 20:36:04,480 - __main__ - INFO - --------------------------------
2025-11-23 20:36:04,480 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'pm_last_jump', 'pm_trend_changes', 'month', 'dayofweek',
       'is_holiday_fr', 'is_bridge_day', 'days_to_holiday',
       'is_vacances_scolaires', 'is_long_weekend_3j', 'is_long_weekend_4j'],
      dtype='object', length=141)
2025-11-23 20:36:04,481 - __main__ - INFO - Nombre de features: 70
2025-11-23 20:36:04,652 - __main__ - INFO - üíæ Donn√©es d'entra√Ænement brutes sauvegard√©es: results/D09\training_data_before_scaling.csv
2025-11-23 20:36:04,653 - __main__ - INFO -    Shape: (1415, 141)
2025-11-23 20:36:04,653 - __main__ - INFO -    Colonnes: 141 colonnes au total
2025-11-23 20:36:04,653 - __main__ - INFO - X shape: (1415, 70), y shape: (1415,)
2025-11-23 20:36:04,654 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-23 20:36:04,658 - __main__ - INFO - Train: (1132, 70), Test: (283, 70)
2025-11-23 20:36:07,957 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-23 20:36:07,975 - __main__ - INFO - üìä Test MAE: 0.0514
2025-11-23 20:36:07,975 - __main__ - INFO - üìä Test R¬≤: 0.8310
2025-11-23 20:36:07,976 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-23 20:36:08,439 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-23 20:36:08,847 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-23 20:36:08,863 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/D09/models...
2025-11-23 20:36:08,898 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/D09/models\xgb_to_predictor.joblib
2025-11-23 20:36:08,899 - __main__ - INFO - üíæ Scaler sauvegard√©: results/D09/models\xgb_scaler.joblib
2025-11-23 20:36:08,899 - __main__ - INFO - üíæ Features sauvegard√©es: results/D09/models\feature_columns.txt
2025-11-23 20:36:09,778 - __main__ - INFO - ================================================================================
2025-11-23 20:36:09,778 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-23 20:36:09,778 - __main__ - INFO - ================================================================================
2025-11-23 20:36:09,778 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-23 20:36:09,778 - __main__ - INFO -    Train MAE: 0.0005
2025-11-23 20:36:09,779 - __main__ - INFO -    Train R¬≤:  1.0000
2025-11-23 20:36:09,779 - __main__ - INFO -    Test MAE:  0.0514
2025-11-23 20:36:09,779 - __main__ - INFO -    Test R¬≤:   0.8310
2025-11-23 20:54:58,320 - __main__ - INFO - ================================================================================
2025-11-23 20:54:58,321 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 20:54:58,321 - __main__ - INFO - ================================================================================
2025-11-23 20:54:58,321 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 20:54:58,326 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-23 20:54:58,326 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 20:54:58,326 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'rateShopper_path': '../data/D09/rateShopper.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models'}
2025-11-23 20:54:58,326 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 20:54:58,342 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-23 20:54:58,417 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-23 20:54:58,417 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-23 20:54:58,463 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-23 20:54:58,466 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-23 20:54:59,531 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-23 20:54:59,532 - __main__ - INFO - Chargement des prix concurrents depuis ../data/D09/rateShopper.csv...
2025-11-23 20:54:59,655 - __main__ - INFO - Prix concurrents charg√©s: (175820, 7)
2025-11-23 20:54:59,655 - __main__ - INFO - Pr√©paration des features concurrentes (prix m√©dian)...
2025-11-23 20:54:59,786 - __main__ - ERROR - ‚ùå ERREUR FATALE: Cannot subtract tz-naive and tz-aware datetime-like objects.
Traceback (most recent call last):
  File "C:\github\ml-demande\.venv_ml\Lib\site-packages\pandas\core\arrays\datetimelike.py", line 1188, in _sub_datetimelike
    self._assert_tzawareness_compat(other)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\github\ml-demande\.venv_ml\Lib\site-packages\pandas\core\arrays\datetimes.py", line 784, in _assert_tzawareness_compat
    raise TypeError(
        "Cannot compare tz-naive and tz-aware datetime-like objects."
    )
TypeError: Cannot compare tz-naive and tz-aware datetime-like objects.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\github\ml-demande\demande\predictTo\predictTo_train_model.py", line 1011, in main
    df = predictor.prepare_data(clusters, indicateurs)
  File "C:\github\ml-demande\demande\predictTo\predictTo_train_model.py", line 433, in prepare_data
    df = self.prepare_competitor_features(df, df_comp)
  File "C:\github\ml-demande\demande\predictTo\predictTo_train_model.py", line 217, in prepare_competitor_features
    df_comp["days_before"] = (df_comp["Date"] - df_comp["ObsDate"]).dt.days
                              ~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~
  File "C:\github\ml-demande\.venv_ml\Lib\site-packages\pandas\core\ops\common.py", line 76, in new_method
    return method(self, other)
  File "C:\github\ml-demande\.venv_ml\Lib\site-packages\pandas\core\arraylike.py", line 194, in __sub__
    return self._arith_method(other, operator.sub)
           ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\github\ml-demande\.venv_ml\Lib\site-packages\pandas\core\series.py", line 6154, in _arith_method
    return base.IndexOpsMixin._arith_method(self, other, op)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\github\ml-demande\.venv_ml\Lib\site-packages\pandas\core\base.py", line 1391, in _arith_method
    result = ops.arithmetic_op(lvalues, rvalues, op)
  File "C:\github\ml-demande\.venv_ml\Lib\site-packages\pandas\core\ops\array_ops.py", line 273, in arithmetic_op
    res_values = op(left, right)
  File "C:\github\ml-demande\.venv_ml\Lib\site-packages\pandas\core\ops\common.py", line 76, in new_method
    return method(self, other)
  File "C:\github\ml-demande\.venv_ml\Lib\site-packages\pandas\core\arrays\datetimelike.py", line 1482, in __sub__
    result = self._sub_datetime_arraylike(other)
  File "C:\github\ml-demande\.venv_ml\Lib\site-packages\pandas\core\arrays\datetimelike.py", line 1179, in _sub_datetime_arraylike
    return self._sub_datetimelike(other)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\github\ml-demande\.venv_ml\Lib\site-packages\pandas\core\arrays\datetimelike.py", line 1191, in _sub_datetimelike
    raise type(err)(new_message) from err
TypeError: Cannot subtract tz-naive and tz-aware datetime-like objects.
2025-11-23 20:56:17,552 - __main__ - INFO - ================================================================================
2025-11-23 20:56:17,552 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 20:56:17,553 - __main__ - INFO - ================================================================================
2025-11-23 20:56:17,553 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 20:56:17,557 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-23 20:56:17,557 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 20:56:17,557 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'rateShopper_path': '../data/D09/rateShopper.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models'}
2025-11-23 20:56:17,558 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 20:56:17,581 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-23 20:56:17,683 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-23 20:56:17,684 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-23 20:56:17,747 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-23 20:56:17,752 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-23 20:56:18,938 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-23 20:56:18,938 - __main__ - INFO - Chargement des prix concurrents depuis ../data/D09/rateShopper.csv...
2025-11-23 20:56:19,055 - __main__ - INFO - Prix concurrents charg√©s: (175820, 7)
2025-11-23 20:56:19,055 - __main__ - INFO - Pr√©paration des features concurrentes (prix m√©dian)...
2025-11-23 20:56:20,201 - __main__ - INFO - Features concurrentes ajout√©es (6 features). Shape: (1415, 139)
2025-11-23 20:56:20,203 - __main__ - INFO - Ajout des features jours f√©ri√©s...
2025-11-23 20:56:20,629 - __main__ - INFO - Ajout des vacances scolaires...
2025-11-23 20:56:20,732 - __main__ - INFO - Ajout des weekends prolong√©s...
2025-11-23 20:56:20,747 - __main__ - INFO - Features jours f√©ri√©s et vacances ajout√©es. Shape: (1415, 147)
2025-11-23 20:56:20,748 - __main__ - INFO -    - Jours f√©ri√©s: 43 (3.04%)
2025-11-23 20:56:20,748 - __main__ - INFO -    - Jours de pont: 85 (6.01%)
2025-11-23 20:56:20,748 - __main__ - INFO -    - Distance au f√©ri√©: min=0, max=90, moyenne=30.2
2025-11-23 20:56:20,749 - __main__ - INFO -    - Vacances scolaires: 590 (41.70%)
2025-11-23 20:56:20,749 - __main__ - INFO -    - Weekends 3j: 57 (4.03%)
2025-11-23 20:56:20,749 - __main__ - INFO -    - Weekends 4j: 101 (7.14%)
2025-11-23 20:56:20,755 - __main__ - INFO - Cr√©ation des features et target...
2025-11-23 20:56:20,755 - __main__ - INFO - --------------------------------
2025-11-23 20:56:20,755 - __main__ - INFO - Horizon: 7
2025-11-23 20:56:20,755 - __main__ - INFO - --------------------------------
2025-11-23 20:56:20,755 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'comp_last_jump', 'comp_trend_changes', 'month', 'dayofweek',
       'is_holiday_fr', 'is_bridge_day', 'days_to_holiday',
       'is_vacances_scolaires', 'is_long_weekend_3j', 'is_long_weekend_4j'],
      dtype='object', length=147)
2025-11-23 20:56:20,756 - __main__ - INFO - Nombre total de features: 76
2025-11-23 20:56:20,756 - __main__ - INFO -    - TO historiques: 53
2025-11-23 20:56:20,756 - __main__ - INFO -    - Features PM: 7
2025-11-23 20:56:20,756 - __main__ - INFO -    - Features concurrents: 6
2025-11-23 20:56:20,756 - __main__ - INFO -    - Autres features: 10
2025-11-23 20:56:20,993 - __main__ - INFO - üíæ Donn√©es d'entra√Ænement brutes sauvegard√©es: results/D09\training_data_before_scaling.csv
2025-11-23 20:56:20,993 - __main__ - INFO -    Shape: (1326, 147)
2025-11-23 20:56:20,994 - __main__ - INFO -    Colonnes: 147 colonnes au total
2025-11-23 20:56:20,994 - __main__ - INFO - X shape: (1326, 76), y shape: (1326,)
2025-11-23 20:56:20,994 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-23 20:56:20,998 - __main__ - INFO - Train: (1060, 76), Test: (266, 76)
2025-11-23 20:56:24,704 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-23 20:56:24,719 - __main__ - INFO - üìä Test MAE: 0.0504
2025-11-23 20:56:24,720 - __main__ - INFO - üìä Test R¬≤: 0.8379
2025-11-23 20:56:24,720 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-23 20:56:25,241 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-23 20:56:25,737 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-23 20:56:25,754 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/D09/models...
2025-11-23 20:56:25,794 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/D09/models\xgb_to_predictor.joblib
2025-11-23 20:56:25,794 - __main__ - INFO - üíæ Scaler sauvegard√©: results/D09/models\xgb_scaler.joblib
2025-11-23 20:56:25,794 - __main__ - INFO - üíæ Features sauvegard√©es: results/D09/models\feature_columns.txt
2025-11-23 20:56:26,826 - __main__ - INFO - ================================================================================
2025-11-23 20:56:26,826 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-23 20:56:26,826 - __main__ - INFO - ================================================================================
2025-11-23 20:56:26,827 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-23 20:56:26,827 - __main__ - INFO -    Train MAE: 0.0004
2025-11-23 20:56:26,827 - __main__ - INFO -    Train R¬≤:  1.0000
2025-11-23 20:56:26,827 - __main__ - INFO -    Test MAE:  0.0504
2025-11-23 20:56:26,827 - __main__ - INFO -    Test R¬≤:   0.8379
2025-11-23 21:05:30,743 - __main__ - INFO - ================================================================================
2025-11-23 21:05:30,744 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 21:05:30,744 - __main__ - INFO - ================================================================================
2025-11-23 21:05:30,744 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 21:05:30,747 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-23 21:05:30,747 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 21:05:30,747 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'rateShopper_path': '../data/D09/rateShopper.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models', 'hyperparam_search': {'cv_folds': 3}}
2025-11-23 21:05:30,747 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 21:05:30,762 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-23 21:05:30,839 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-23 21:05:30,839 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-23 21:05:30,884 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-23 21:05:30,887 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-23 21:05:32,454 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-23 21:05:32,454 - __main__ - INFO - Chargement des prix concurrents depuis ../data/D09/rateShopper.csv...
2025-11-23 21:05:32,602 - __main__ - INFO - Prix concurrents charg√©s: (175820, 7)
2025-11-23 21:05:32,602 - __main__ - INFO - Pr√©paration des features concurrentes (prix m√©dian)...
2025-11-23 21:05:33,687 - __main__ - INFO - Features concurrentes ajout√©es (6 features). Shape: (1415, 139)
2025-11-23 21:05:33,691 - __main__ - INFO - Ajout des features jours f√©ri√©s...
2025-11-23 21:05:34,071 - __main__ - INFO - Ajout des vacances scolaires...
2025-11-23 21:05:34,164 - __main__ - INFO - Ajout des weekends prolong√©s...
2025-11-23 21:05:34,178 - __main__ - INFO - Features jours f√©ri√©s et vacances ajout√©es. Shape: (1415, 147)
2025-11-23 21:05:34,178 - __main__ - INFO -    - Jours f√©ri√©s: 43 (3.04%)
2025-11-23 21:05:34,179 - __main__ - INFO -    - Jours de pont: 85 (6.01%)
2025-11-23 21:05:34,179 - __main__ - INFO -    - Distance au f√©ri√©: min=0, max=90, moyenne=30.2
2025-11-23 21:05:34,179 - __main__ - INFO -    - Vacances scolaires: 590 (41.70%)
2025-11-23 21:05:34,179 - __main__ - INFO -    - Weekends 3j: 57 (4.03%)
2025-11-23 21:05:34,179 - __main__ - INFO -    - Weekends 4j: 101 (7.14%)
2025-11-23 21:05:34,184 - __main__ - INFO - Cr√©ation des features et target...
2025-11-23 21:05:34,185 - __main__ - INFO - --------------------------------
2025-11-23 21:05:34,185 - __main__ - INFO - Horizon: 7
2025-11-23 21:05:34,185 - __main__ - INFO - --------------------------------
2025-11-23 21:05:34,186 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'comp_last_jump', 'comp_trend_changes', 'month', 'dayofweek',
       'is_holiday_fr', 'is_bridge_day', 'days_to_holiday',
       'is_vacances_scolaires', 'is_long_weekend_3j', 'is_long_weekend_4j'],
      dtype='object', length=147)
2025-11-23 21:05:34,186 - __main__ - INFO - Nombre total de features: 76
2025-11-23 21:05:34,187 - __main__ - INFO -    - TO historiques: 53
2025-11-23 21:05:34,187 - __main__ - INFO -    - Features PM: 7
2025-11-23 21:05:34,187 - __main__ - INFO -    - Features concurrents: 6
2025-11-23 21:05:34,187 - __main__ - INFO -    - Autres features: 10
2025-11-23 21:05:34,338 - __main__ - INFO - üíæ Donn√©es d'entra√Ænement brutes sauvegard√©es: results/D09\training_data_before_scaling.csv
2025-11-23 21:05:34,338 - __main__ - INFO -    Shape: (1326, 147)
2025-11-23 21:05:34,338 - __main__ - INFO -    Colonnes: 147 colonnes au total
2025-11-23 21:05:34,339 - __main__ - INFO - X shape: (1326, 76), y shape: (1326,)
2025-11-23 21:05:34,339 - __main__ - INFO - ================================================================================
2025-11-23 21:05:34,339 - __main__ - INFO - RECHERCHE D'HYPERPARAM√àTRES (GRID SEARCH)
2025-11-23 21:05:34,339 - __main__ - INFO - ================================================================================
2025-11-23 21:05:34,344 - __main__ - INFO - Train: (1060, 76), Validation: (266, 76)
2025-11-23 21:05:34,344 - __main__ - INFO - Configuration de la recherche:
2025-11-23 21:05:34,344 - __main__ - INFO -    - Nombre total de combinaisons: 864
2025-11-23 21:05:34,344 - __main__ - INFO -    - Cross-validation: 3 folds
2025-11-23 21:05:34,344 - __main__ - INFO -    - Nombre total d'entra√Ænements: 2592
2025-11-23 21:05:34,345 - __main__ - INFO -    - M√©trique: neg_mean_absolute_error
2025-11-23 21:05:34,345 - __main__ - INFO - 
2025-11-23 21:05:34,345 - __main__ - INFO - ‚ö†Ô∏è  Attention : Grid Search peut prendre beaucoup de temps !
2025-11-23 21:05:34,345 - __main__ - INFO -     Pour une recherche plus rapide, r√©duisez les valeurs dans param_grid
2025-11-23 21:05:34,345 - __main__ - INFO - 
D√©marrage de la recherche d'hyperparam√®tres...
2025-11-23 21:56:30,532 - __main__ - INFO - ================================================================================
2025-11-23 21:56:30,533 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 21:56:30,533 - __main__ - INFO - ================================================================================
2025-11-23 21:56:30,533 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 21:56:30,536 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-23 21:56:30,536 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 21:56:30,536 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'rateShopper_path': '../data/D09/rateShopper.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models', 'hyperparam_search': {'n_iter': 30, 'cv_folds': 3}}
2025-11-23 21:56:30,536 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 21:56:30,576 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-23 21:56:30,661 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-23 21:56:30,661 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-23 21:56:30,732 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-23 21:56:30,736 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-23 21:56:31,920 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-23 21:56:31,920 - __main__ - INFO - Chargement des prix concurrents depuis ../data/D09/rateShopper.csv...
2025-11-23 21:56:32,107 - __main__ - INFO - Prix concurrents charg√©s: (175820, 7)
2025-11-23 21:56:32,107 - __main__ - INFO - Pr√©paration des features concurrentes (prix m√©dian)...
2025-11-23 21:56:33,140 - __main__ - INFO - Features concurrentes ajout√©es (6 features). Shape: (1415, 139)
2025-11-23 21:56:33,143 - __main__ - INFO - Ajout des features jours f√©ri√©s...
2025-11-23 21:56:34,010 - __main__ - INFO - Ajout des vacances scolaires...
2025-11-23 21:56:34,116 - __main__ - INFO - Ajout des weekends prolong√©s...
2025-11-23 21:56:34,204 - __main__ - INFO - Features jours f√©ri√©s et vacances ajout√©es. Shape: (1415, 147)
2025-11-23 21:56:34,205 - __main__ - INFO -    - Jours f√©ri√©s: 43 (3.04%)
2025-11-23 21:56:34,205 - __main__ - INFO -    - Jours de pont: 85 (6.01%)
2025-11-23 21:56:34,205 - __main__ - INFO -    - Distance au f√©ri√©: min=0, max=90, moyenne=30.2
2025-11-23 21:56:34,205 - __main__ - INFO -    - Vacances scolaires: 590 (41.70%)
2025-11-23 21:56:34,206 - __main__ - INFO -    - Weekends 3j: 57 (4.03%)
2025-11-23 21:56:34,206 - __main__ - INFO -    - Weekends 4j: 101 (7.14%)
2025-11-23 21:56:34,210 - __main__ - INFO - Cr√©ation des features et target...
2025-11-23 21:56:34,210 - __main__ - INFO - --------------------------------
2025-11-23 21:56:34,210 - __main__ - INFO - Horizon: 7
2025-11-23 21:56:34,210 - __main__ - INFO - --------------------------------
2025-11-23 21:56:34,211 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'comp_last_jump', 'comp_trend_changes', 'month', 'dayofweek',
       'is_holiday_fr', 'is_bridge_day', 'days_to_holiday',
       'is_vacances_scolaires', 'is_long_weekend_3j', 'is_long_weekend_4j'],
      dtype='object', length=147)
2025-11-23 21:56:34,211 - __main__ - INFO - Nombre total de features: 76
2025-11-23 21:56:34,211 - __main__ - INFO -    - TO historiques: 53
2025-11-23 21:56:34,212 - __main__ - INFO -    - Features PM: 7
2025-11-23 21:56:34,212 - __main__ - INFO -    - Features concurrents: 6
2025-11-23 21:56:34,212 - __main__ - INFO -    - Autres features: 10
2025-11-23 21:56:34,356 - __main__ - INFO - üíæ Donn√©es d'entra√Ænement brutes sauvegard√©es: results/D09\training_data_before_scaling.csv
2025-11-23 21:56:34,356 - __main__ - INFO -    Shape: (1326, 147)
2025-11-23 21:56:34,356 - __main__ - INFO -    Colonnes: 147 colonnes au total
2025-11-23 21:56:34,356 - __main__ - INFO - X shape: (1326, 76), y shape: (1326,)
2025-11-23 21:56:34,356 - __main__ - INFO - ================================================================================
2025-11-23 21:56:34,357 - __main__ - INFO - RECHERCHE D'HYPERPARAM√àTRES (RANDOMIZED SEARCH)
2025-11-23 21:56:34,357 - __main__ - INFO - ================================================================================
2025-11-23 21:56:34,363 - __main__ - INFO - Train: (1060, 76), Validation: (266, 76)
2025-11-23 21:56:34,363 - __main__ - INFO - Configuration de la recherche:
2025-11-23 21:56:34,363 - __main__ - INFO -    - Nombre d'it√©rations: 30
2025-11-23 21:56:34,363 - __main__ - INFO -    - Cross-validation: 3 folds
2025-11-23 21:56:34,363 - __main__ - INFO -    - Nombre total d'entra√Ænements: 90
2025-11-23 21:56:34,364 - __main__ - INFO -    - M√©trique: neg_mean_absolute_error
2025-11-23 21:56:34,364 - __main__ - INFO - 
D√©marrage de la recherche d'hyperparam√®tres...
2025-11-23 21:58:07,535 - __main__ - INFO - ================================================================================
2025-11-23 21:58:07,535 - __main__ - INFO - R√âSULTATS DE LA RECHERCHE
2025-11-23 21:58:07,536 - __main__ - INFO - ================================================================================
2025-11-23 21:58:07,536 - __main__ - INFO - Meilleur score (MAE sur CV): 0.0582
2025-11-23 21:58:07,536 - __main__ - INFO - Meilleurs param√®tres trouv√©s:
2025-11-23 21:58:07,537 - __main__ - INFO -    - subsample: 0.95
2025-11-23 21:58:07,537 - __main__ - INFO -    - reg_lambda: 1.0
2025-11-23 21:58:07,537 - __main__ - INFO -    - reg_alpha: 0
2025-11-23 21:58:07,537 - __main__ - INFO -    - n_estimators: 500
2025-11-23 21:58:07,538 - __main__ - INFO -    - min_child_weight: 3
2025-11-23 21:58:07,538 - __main__ - INFO -    - max_depth: 5
2025-11-23 21:58:07,538 - __main__ - INFO -    - learning_rate: 0.05
2025-11-23 21:58:07,538 - __main__ - INFO -    - colsample_bytree: 0.95
2025-11-23 21:58:07,554 - __main__ - INFO - 
Performances sur validation:
2025-11-23 21:58:07,555 - __main__ - INFO -    - MAE: 0.0479
2025-11-23 21:58:07,555 - __main__ - INFO -    - R¬≤: 0.8523
2025-11-23 21:58:07,555 - __main__ - INFO - ================================================================================
2025-11-23 21:58:07,556 - __main__ - INFO - 
üîß Mise √† jour de la configuration avec les meilleurs param√®tres...
2025-11-23 21:58:07,556 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-23 21:58:07,564 - __main__ - INFO - Train: (1060, 76), Test: (266, 76)
2025-11-23 21:58:09,231 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-23 21:58:09,269 - __main__ - INFO - üìä Test MAE: 0.0479
2025-11-23 21:58:09,270 - __main__ - INFO - üìä Test R¬≤: 0.8523
2025-11-23 21:58:09,270 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-23 21:58:10,141 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-23 21:58:10,443 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-23 21:58:10,460 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/D09/models...
2025-11-23 21:58:10,493 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/D09/models\xgb_to_predictor.joblib
2025-11-23 21:58:10,493 - __main__ - INFO - üíæ Scaler sauvegard√©: results/D09/models\xgb_scaler.joblib
2025-11-23 21:58:10,493 - __main__ - INFO - üíæ Features sauvegard√©es: results/D09/models\feature_columns.txt
2025-11-23 21:58:11,493 - __main__ - INFO - ================================================================================
2025-11-23 21:58:11,494 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-23 21:58:11,494 - __main__ - INFO - ================================================================================
2025-11-23 21:58:11,494 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-23 21:58:11,495 - __main__ - INFO -    Train MAE: 0.0054
2025-11-23 21:58:11,495 - __main__ - INFO -    Train R¬≤:  0.9983
2025-11-23 21:58:11,495 - __main__ - INFO -    Test MAE:  0.0479
2025-11-23 21:58:11,495 - __main__ - INFO -    Test R¬≤:   0.8523
2025-11-23 22:15:05,433 - __main__ - INFO - ================================================================================
2025-11-23 22:15:05,434 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-23 22:15:05,434 - __main__ - INFO - ================================================================================
2025-11-23 22:15:05,434 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-23 22:15:05,437 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-23 22:15:05,438 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-23 22:15:05,438 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'rateShopper_path': '../data/D09/rateShopper.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models', 'hyperparam_search': {'n_iter': 30, 'cv_folds': 3}}
2025-11-23 22:15:05,438 - __main__ - INFO - Chargement des donn√©es...
2025-11-23 22:15:05,454 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-23 22:15:05,531 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-23 22:15:05,532 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-23 22:15:05,583 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-23 22:15:05,587 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-23 22:15:06,982 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-23 22:15:06,983 - __main__ - INFO - Chargement des prix concurrents depuis ../data/D09/rateShopper.csv...
2025-11-23 22:15:07,115 - __main__ - INFO - Prix concurrents charg√©s: (175820, 7)
2025-11-23 22:15:07,115 - __main__ - INFO - Pr√©paration des features concurrentes (prix m√©dian)...
2025-11-23 22:15:08,205 - __main__ - INFO - Features concurrentes ajout√©es (6 features). Shape: (1415, 139)
2025-11-23 22:15:08,207 - __main__ - INFO - Ajout de ToF1 (TO final ann√©e N-1)...
2025-11-23 22:15:08,225 - __main__ - INFO -    ToF1 ajout√© : 1050 valeurs non-nulles sur 1416
2025-11-23 22:15:08,225 - __main__ - INFO - Ajout des features jours f√©ri√©s...
2025-11-23 22:15:08,657 - __main__ - INFO - Ajout des vacances scolaires...
2025-11-23 22:15:08,758 - __main__ - INFO - Ajout des weekends prolong√©s...
2025-11-23 22:15:08,775 - __main__ - INFO - Features jours f√©ri√©s et vacances ajout√©es. Shape: (1416, 148)
2025-11-23 22:15:08,775 - __main__ - INFO -    - Jours f√©ri√©s: 43 (3.04%)
2025-11-23 22:15:08,775 - __main__ - INFO -    - Jours de pont: 85 (6.00%)
2025-11-23 22:15:08,776 - __main__ - INFO -    - Distance au f√©ri√©: min=0, max=90, moyenne=30.3
2025-11-23 22:15:08,777 - __main__ - INFO -    - Vacances scolaires: 591 (41.74%)
2025-11-23 22:15:08,777 - __main__ - INFO -    - Weekends 3j: 57 (4.03%)
2025-11-23 22:15:08,777 - __main__ - INFO -    - Weekends 4j: 101 (7.13%)
2025-11-23 22:15:08,782 - __main__ - INFO - Cr√©ation des features et target...
2025-11-23 22:15:08,783 - __main__ - INFO - --------------------------------
2025-11-23 22:15:08,783 - __main__ - INFO - Horizon: 7
2025-11-23 22:15:08,783 - __main__ - INFO - --------------------------------
2025-11-23 22:15:08,784 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'comp_trend_changes', 'month', 'dayofweek', 'ToF1', 'is_holiday_fr',
       'is_bridge_day', 'days_to_holiday', 'is_vacances_scolaires',
       'is_long_weekend_3j', 'is_long_weekend_4j'],
      dtype='object', length=148)
2025-11-23 22:15:08,784 - __main__ - INFO - Nombre total de features: 77
2025-11-23 22:15:08,784 - __main__ - INFO -    - TO historiques: 53
2025-11-23 22:15:08,784 - __main__ - INFO -    - Features PM: 7
2025-11-23 22:15:08,784 - __main__ - INFO -    - Features concurrents: 6
2025-11-23 22:15:08,785 - __main__ - INFO -    - Autres features: 11
2025-11-23 22:15:08,941 - __main__ - INFO - üíæ Donn√©es d'entra√Ænement brutes sauvegard√©es: results/D09\training_data_before_scaling.csv
2025-11-23 22:15:08,942 - __main__ - INFO -    Shape: (1327, 148)
2025-11-23 22:15:08,942 - __main__ - INFO -    Colonnes: 148 colonnes au total
2025-11-23 22:15:08,942 - __main__ - INFO - X shape: (1327, 77), y shape: (1327,)
2025-11-23 22:15:08,942 - __main__ - INFO - ================================================================================
2025-11-23 22:15:08,942 - __main__ - INFO - RECHERCHE D'HYPERPARAM√àTRES (RANDOMIZED SEARCH)
2025-11-23 22:15:08,943 - __main__ - INFO - ================================================================================
2025-11-23 22:15:08,946 - __main__ - INFO - Train: (1061, 77), Validation: (266, 77)
2025-11-23 22:15:08,947 - __main__ - INFO - Configuration de la recherche:
2025-11-23 22:15:08,947 - __main__ - INFO -    - Nombre d'it√©rations: 30
2025-11-23 22:15:08,947 - __main__ - INFO -    - Cross-validation: 3 folds
2025-11-23 22:15:08,947 - __main__ - INFO -    - Nombre total d'entra√Ænements: 90
2025-11-23 22:15:08,947 - __main__ - INFO -    - M√©trique: neg_mean_absolute_error
2025-11-23 22:15:08,948 - __main__ - INFO - 
D√©marrage de la recherche d'hyperparam√®tres...
2025-11-23 22:17:02,495 - __main__ - INFO - ================================================================================
2025-11-23 22:17:02,496 - __main__ - INFO - R√âSULTATS DE LA RECHERCHE
2025-11-23 22:17:02,497 - __main__ - INFO - ================================================================================
2025-11-23 22:17:02,497 - __main__ - INFO - Meilleur score (MAE sur CV): 0.0568
2025-11-23 22:17:02,497 - __main__ - INFO - Meilleurs param√®tres trouv√©s:
2025-11-23 22:17:02,498 - __main__ - INFO -    - subsample: 0.95
2025-11-23 22:17:02,498 - __main__ - INFO -    - reg_lambda: 1.0
2025-11-23 22:17:02,498 - __main__ - INFO -    - reg_alpha: 0.1
2025-11-23 22:17:02,498 - __main__ - INFO -    - n_estimators: 600
2025-11-23 22:17:02,499 - __main__ - INFO -    - min_child_weight: 3
2025-11-23 22:17:02,499 - __main__ - INFO -    - max_depth: 5
2025-11-23 22:17:02,500 - __main__ - INFO -    - learning_rate: 0.01
2025-11-23 22:17:02,500 - __main__ - INFO -    - colsample_bytree: 0.85
2025-11-23 22:17:02,508 - __main__ - INFO - 
Performances sur validation:
2025-11-23 22:17:02,511 - __main__ - INFO -    - MAE: 0.0501
2025-11-23 22:17:02,511 - __main__ - INFO -    - R¬≤: 0.8441
2025-11-23 22:17:02,512 - __main__ - INFO - ================================================================================
2025-11-23 22:17:02,513 - __main__ - INFO - 
üîß Mise √† jour de la configuration avec les meilleurs param√®tres...
2025-11-23 22:17:02,514 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-23 22:17:02,527 - __main__ - INFO - Train: (1061, 77), Test: (266, 77)
2025-11-23 22:17:05,895 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-23 22:17:05,911 - __main__ - INFO - üìä Test MAE: 0.0501
2025-11-23 22:17:05,912 - __main__ - INFO - üìä Test R¬≤: 0.8441
2025-11-23 22:17:05,913 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-23 22:17:06,500 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-23 22:17:07,056 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-23 22:17:07,082 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/D09/models...
2025-11-23 22:17:07,124 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/D09/models\xgb_to_predictor.joblib
2025-11-23 22:17:07,125 - __main__ - INFO - üíæ Scaler sauvegard√©: results/D09/models\xgb_scaler.joblib
2025-11-23 22:17:07,125 - __main__ - INFO - üíæ Features sauvegard√©es: results/D09/models\feature_columns.txt
2025-11-23 22:17:08,121 - __main__ - INFO - ================================================================================
2025-11-23 22:17:08,122 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-23 22:17:08,122 - __main__ - INFO - ================================================================================
2025-11-23 22:17:08,122 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-23 22:17:08,123 - __main__ - INFO -    Train MAE: 0.0280
2025-11-23 22:17:08,123 - __main__ - INFO -    Train R¬≤:  0.9575
2025-11-23 22:17:08,123 - __main__ - INFO -    Test MAE:  0.0501
2025-11-23 22:17:08,124 - __main__ - INFO -    Test R¬≤:   0.8441
2025-11-24 09:45:38,142 - __main__ - INFO - ================================================================================
2025-11-24 09:45:38,143 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-24 09:45:38,143 - __main__ - INFO - ================================================================================
2025-11-24 09:45:38,143 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-24 09:45:38,147 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-24 09:45:38,147 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-24 09:45:38,147 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'rateShopper_path': '../data/D09/rateShopper.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models', 'hyperparam_search': {'n_iter': 30, 'cv_folds': 3}}
2025-11-24 09:45:38,147 - __main__ - INFO - Chargement des donn√©es...
2025-11-24 09:45:38,184 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-24 09:45:38,279 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-24 09:45:38,280 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-24 09:45:38,338 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-24 09:45:38,342 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-24 09:45:39,540 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-24 09:45:39,541 - __main__ - INFO - Chargement des prix concurrents depuis ../data/D09/rateShopper.csv...
2025-11-24 09:45:39,676 - __main__ - INFO - Prix concurrents charg√©s: (175820, 7)
2025-11-24 09:45:39,677 - __main__ - INFO - Pr√©paration des features concurrentes (prix m√©dian)...
2025-11-24 09:45:40,632 - __main__ - INFO - Features concurrentes ajout√©es (6 features). Shape: (1415, 139)
2025-11-24 09:45:40,635 - __main__ - INFO - Ajout de ToF1 (TO final ann√©e N-1)...
2025-11-24 09:45:40,640 - __main__ - INFO -    ToF1 ajout√© : 1050 valeurs non-nulles sur 1416
2025-11-24 09:45:40,641 - __main__ - INFO - Ajout des features jours f√©ri√©s...
2025-11-24 09:45:41,673 - __main__ - INFO - Ajout des vacances scolaires...
2025-11-24 09:45:41,787 - __main__ - INFO - Ajout des weekends prolong√©s...
2025-11-24 09:45:41,803 - __main__ - INFO - Features jours f√©ri√©s et vacances ajout√©es. Shape: (1416, 148)
2025-11-24 09:45:41,804 - __main__ - INFO -    - Jours f√©ri√©s: 43 (3.04%)
2025-11-24 09:45:41,805 - __main__ - INFO -    - Jours de pont: 85 (6.00%)
2025-11-24 09:45:41,805 - __main__ - INFO -    - Distance au f√©ri√©: min=0, max=90, moyenne=30.3
2025-11-24 09:45:41,806 - __main__ - INFO -    - Vacances scolaires: 591 (41.74%)
2025-11-24 09:45:41,806 - __main__ - INFO -    - Weekends 3j: 57 (4.03%)
2025-11-24 09:45:41,806 - __main__ - INFO -    - Weekends 4j: 101 (7.13%)
2025-11-24 09:45:41,812 - __main__ - INFO - Cr√©ation des features et target...
2025-11-24 09:45:41,812 - __main__ - INFO - --------------------------------
2025-11-24 09:45:41,812 - __main__ - INFO - Horizon: 7
2025-11-24 09:45:41,812 - __main__ - INFO - --------------------------------
2025-11-24 09:45:41,813 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'comp_trend_changes', 'month', 'dayofweek', 'ToF1', 'is_holiday_fr',
       'is_bridge_day', 'days_to_holiday', 'is_vacances_scolaires',
       'is_long_weekend_3j', 'is_long_weekend_4j'],
      dtype='object', length=148)
2025-11-24 09:45:41,813 - __main__ - INFO - Nombre total de features: 77
2025-11-24 09:45:41,813 - __main__ - INFO -    - TO historiques: 53
2025-11-24 09:45:41,814 - __main__ - INFO -    - Features PM: 7
2025-11-24 09:45:41,814 - __main__ - INFO -    - Features concurrents: 6
2025-11-24 09:45:41,814 - __main__ - INFO -    - Autres features: 11
2025-11-24 09:45:41,971 - __main__ - INFO - üíæ Donn√©es d'entra√Ænement brutes sauvegard√©es: results/D09\training_data_before_scaling.csv
2025-11-24 09:45:41,972 - __main__ - INFO -    Shape: (1327, 148)
2025-11-24 09:45:41,972 - __main__ - INFO -    Colonnes: 148 colonnes au total
2025-11-24 09:45:41,972 - __main__ - INFO - X shape: (1327, 77), y shape: (1327,)
2025-11-24 09:45:41,973 - __main__ - INFO - ================================================================================
2025-11-24 09:45:41,973 - __main__ - INFO - RECHERCHE D'HYPERPARAM√àTRES (RANDOMIZED SEARCH)
2025-11-24 09:45:41,973 - __main__ - INFO - ================================================================================
2025-11-24 09:45:41,977 - __main__ - INFO - Train: (1061, 77), Validation: (266, 77)
2025-11-24 09:45:41,978 - __main__ - INFO - Configuration de la recherche:
2025-11-24 09:45:41,978 - __main__ - INFO -    - Nombre d'it√©rations: 30
2025-11-24 09:45:41,978 - __main__ - INFO -    - Cross-validation: 3 folds
2025-11-24 09:45:41,978 - __main__ - INFO -    - Nombre total d'entra√Ænements: 90
2025-11-24 09:45:41,979 - __main__ - INFO -    - M√©trique: neg_mean_absolute_error
2025-11-24 09:45:41,979 - __main__ - INFO - 
D√©marrage de la recherche d'hyperparam√®tres...
2025-11-24 10:29:17,861 - __main__ - INFO - ================================================================================
2025-11-24 10:29:17,862 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-24 10:29:17,862 - __main__ - INFO - ================================================================================
2025-11-24 10:29:17,863 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-24 10:29:17,869 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-24 10:29:17,869 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-24 10:29:17,870 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'rateShopper_path': '../data/D09/rateShopper.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models', 'hyperparam_search': {'n_iter': 30, 'cv_folds': 3}}
2025-11-24 10:29:17,870 - __main__ - INFO - Chargement des donn√©es...
2025-11-24 10:29:17,915 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-24 10:29:18,089 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-24 10:29:18,090 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-24 10:29:18,218 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-24 10:29:18,226 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-24 10:29:18,227 - __main__ - INFO - Calcul des features PM sur donn√©es J-7 √† J-60 (pas de data leakage)
2025-11-24 10:29:18,228 - __main__ - INFO -    Colonnes PM utilis√©es: 54
2025-11-24 10:29:20,545 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-24 10:29:20,545 - __main__ - INFO - Chargement des prix concurrents depuis ../data/D09/rateShopper.csv...
2025-11-24 10:29:20,776 - __main__ - INFO - Prix concurrents charg√©s: (175820, 7)
2025-11-24 10:29:20,776 - __main__ - INFO - Pr√©paration des features concurrentes (prix m√©dian)...
2025-11-24 10:29:21,116 - __main__ - INFO -    Features concurrentes calcul√©es sur J-7 √† J-60
2025-11-24 10:29:22,668 - __main__ - INFO - Features concurrentes ajout√©es (6 features). Shape: (1415, 139)
2025-11-24 10:29:22,673 - __main__ - INFO - Ajout de ToF1 (TO final ann√©e N-1)...
2025-11-24 10:29:22,689 - __main__ - INFO -    ToF1 ajout√© : 1050 valeurs non-nulles sur 1416
2025-11-24 10:29:22,689 - __main__ - INFO - Ajout des features jours f√©ri√©s...
2025-11-24 10:29:24,102 - __main__ - INFO - Ajout des vacances scolaires...
2025-11-24 10:29:24,277 - __main__ - INFO - Ajout des weekends prolong√©s...
2025-11-24 10:29:24,312 - __main__ - INFO - Features jours f√©ri√©s et vacances ajout√©es. Shape: (1416, 148)
2025-11-24 10:29:24,313 - __main__ - INFO -    - Jours f√©ri√©s: 43 (3.04%)
2025-11-24 10:29:24,313 - __main__ - INFO -    - Jours de pont: 85 (6.00%)
2025-11-24 10:29:24,314 - __main__ - INFO -    - Distance au f√©ri√©: min=0, max=90, moyenne=30.3
2025-11-24 10:29:24,314 - __main__ - INFO -    - Vacances scolaires: 591 (41.74%)
2025-11-24 10:29:24,314 - __main__ - INFO -    - Weekends 3j: 57 (4.03%)
2025-11-24 10:29:24,315 - __main__ - INFO -    - Weekends 4j: 101 (7.13%)
2025-11-24 10:29:24,322 - __main__ - INFO - Cr√©ation des features et target...
2025-11-24 10:29:24,322 - __main__ - INFO - --------------------------------
2025-11-24 10:29:24,322 - __main__ - INFO - Horizon: 7
2025-11-24 10:29:24,323 - __main__ - INFO - --------------------------------
2025-11-24 10:29:24,324 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'comp_trend_changes', 'month', 'dayofweek', 'ToF1', 'is_holiday_fr',
       'is_bridge_day', 'days_to_holiday', 'is_vacances_scolaires',
       'is_long_weekend_3j', 'is_long_weekend_4j'],
      dtype='object', length=148)
2025-11-24 10:29:24,324 - __main__ - INFO - Nombre total de features: 77
2025-11-24 10:29:24,325 - __main__ - INFO -    - TO historiques: 53
2025-11-24 10:29:24,325 - __main__ - INFO -    - Features PM: 7
2025-11-24 10:29:24,325 - __main__ - INFO -    - Features concurrents: 6
2025-11-24 10:29:24,325 - __main__ - INFO -    - Autres features: 11
2025-11-24 10:29:24,499 - __main__ - INFO - üíæ Donn√©es d'entra√Ænement sauvegard√©es: results/D09\training_data_before_scaling.csv
2025-11-24 10:29:24,500 - __main__ - INFO -    Shape: (1327, 80)
2025-11-24 10:29:24,500 - __main__ - INFO -    Colonnes: stay_date, hotCode, 77 features, J-0
2025-11-24 10:29:24,501 - __main__ - INFO - X shape: (1327, 77), y shape: (1327,)
2025-11-24 10:29:24,501 - __main__ - INFO - ================================================================================
2025-11-24 10:29:24,502 - __main__ - INFO - RECHERCHE D'HYPERPARAM√àTRES (RANDOMIZED SEARCH)
2025-11-24 10:29:24,502 - __main__ - INFO - ================================================================================
2025-11-24 10:29:24,512 - __main__ - INFO - Train: (1061, 77), Validation: (266, 77)
2025-11-24 10:29:24,512 - __main__ - INFO - Configuration de la recherche:
2025-11-24 10:29:24,513 - __main__ - INFO -    - Nombre d'it√©rations: 30
2025-11-24 10:29:24,513 - __main__ - INFO -    - Cross-validation: 3 folds
2025-11-24 10:29:24,513 - __main__ - INFO -    - Nombre total d'entra√Ænements: 90
2025-11-24 10:29:24,513 - __main__ - INFO -    - M√©trique: neg_mean_absolute_error
2025-11-24 10:29:24,514 - __main__ - INFO - 
D√©marrage de la recherche d'hyperparam√®tres...
2025-11-24 10:31:12,715 - __main__ - INFO - ================================================================================
2025-11-24 10:31:12,716 - __main__ - INFO - R√âSULTATS DE LA RECHERCHE
2025-11-24 10:31:12,716 - __main__ - INFO - ================================================================================
2025-11-24 10:31:12,716 - __main__ - INFO - Meilleur score (MAE sur CV): 0.0573
2025-11-24 10:31:12,716 - __main__ - INFO - Meilleurs param√®tres trouv√©s:
2025-11-24 10:31:12,716 - __main__ - INFO -    - subsample: 0.9
2025-11-24 10:31:12,716 - __main__ - INFO -    - reg_lambda: 0.5
2025-11-24 10:31:12,717 - __main__ - INFO -    - reg_alpha: 0.1
2025-11-24 10:31:12,717 - __main__ - INFO -    - n_estimators: 800
2025-11-24 10:31:12,717 - __main__ - INFO -    - min_child_weight: 3
2025-11-24 10:31:12,717 - __main__ - INFO -    - max_depth: 6
2025-11-24 10:31:12,717 - __main__ - INFO -    - learning_rate: 0.01
2025-11-24 10:31:12,717 - __main__ - INFO -    - colsample_bytree: 0.85
2025-11-24 10:31:12,724 - __main__ - INFO - 
Performances sur validation:
2025-11-24 10:31:12,725 - __main__ - INFO -    - MAE: 0.0497
2025-11-24 10:31:12,726 - __main__ - INFO -    - R¬≤: 0.8515
2025-11-24 10:31:12,726 - __main__ - INFO - ================================================================================
2025-11-24 10:31:12,728 - __main__ - INFO - 
üîß Mise √† jour de la configuration avec les meilleurs param√®tres...
2025-11-24 10:31:12,730 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-24 10:31:12,739 - __main__ - INFO - Train: (1061, 77), Test: (266, 77)
2025-11-24 10:31:15,818 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-24 10:31:15,861 - __main__ - INFO - üìä Test MAE: 0.0497
2025-11-24 10:31:15,863 - __main__ - INFO - üìä Test R¬≤: 0.8515
2025-11-24 10:31:15,863 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-24 10:31:16,448 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-24 10:31:16,777 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-24 10:31:16,790 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/D09/models...
2025-11-24 10:31:16,917 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/D09/models\xgb_to_predictor.joblib
2025-11-24 10:31:16,918 - __main__ - INFO - üíæ Scaler sauvegard√©: results/D09/models\xgb_scaler.joblib
2025-11-24 10:31:16,918 - __main__ - INFO - üíæ Features sauvegard√©es: results/D09/models\feature_columns.txt
2025-11-24 10:31:18,000 - __main__ - INFO - ================================================================================
2025-11-24 10:31:18,000 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-24 10:31:18,000 - __main__ - INFO - ================================================================================
2025-11-24 10:31:18,000 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-24 10:31:18,001 - __main__ - INFO -    Train MAE: 0.0163
2025-11-24 10:31:18,001 - __main__ - INFO -    Train R¬≤:  0.9851
2025-11-24 10:31:18,001 - __main__ - INFO -    Test MAE:  0.0497
2025-11-24 10:31:18,001 - __main__ - INFO -    Test R¬≤:   0.8515
2025-11-24 11:00:13,333 - __main__ - INFO - ================================================================================
2025-11-24 11:00:13,333 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-24 11:00:13,334 - __main__ - INFO - ================================================================================
2025-11-24 11:00:13,334 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-24 11:00:13,338 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-24 11:00:13,339 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-24 11:00:13,339 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'rateShopper_path': '../data/D09/rateShopper.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models', 'hyperparam_search': {'n_iter': 30, 'cv_folds': 3}}
2025-11-24 11:00:13,339 - __main__ - INFO - Chargement des donn√©es...
2025-11-24 11:00:13,358 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-24 11:00:13,452 - __main__ - INFO - Indicateurs charg√©s: (86315, 15)
2025-11-24 11:00:13,453 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-24 11:00:13,505 - __main__ - INFO - PM pivot shape: (1415, 63)
2025-11-24 11:00:13,508 - __main__ - INFO - DataFrame fusionn√©: (1415, 126)
2025-11-24 11:00:13,508 - __main__ - INFO - Calcul des features PM sur donn√©es J-7 √† J-60 (pas de data leakage)
2025-11-24 11:00:13,508 - __main__ - INFO -    Colonnes PM utilis√©es: 54
2025-11-24 11:00:14,843 - __main__ - INFO - Features PM ajout√©es: (1415, 133)
2025-11-24 11:00:14,843 - __main__ - INFO - Chargement des prix concurrents depuis ../data/D09/rateShopper.csv...
2025-11-24 11:00:14,971 - __main__ - INFO - Prix concurrents charg√©s: (175820, 7)
2025-11-24 11:00:14,971 - __main__ - INFO - Pr√©paration des features concurrentes (prix m√©dian)...
2025-11-24 11:00:15,132 - __main__ - INFO -    Features concurrentes calcul√©es sur J-7 √† J-60
2025-11-24 11:00:15,985 - __main__ - INFO - Features concurrentes ajout√©es (6 features). Shape: (1415, 139)
2025-11-24 11:00:15,987 - __main__ - INFO - Ajout de ToF1 (TO final ann√©e N-1)...
2025-11-24 11:00:15,993 - __main__ - INFO -    ToF1 ajout√© : 1050 valeurs non-nulles sur 1416
2025-11-24 11:00:15,993 - __main__ - INFO - Ajout des features jours f√©ri√©s...
2025-11-24 11:00:16,437 - __main__ - INFO - Ajout des vacances scolaires...
2025-11-24 11:00:16,539 - __main__ - INFO - Ajout des weekends prolong√©s...
2025-11-24 11:00:16,559 - __main__ - INFO - Features jours f√©ri√©s et vacances ajout√©es. Shape: (1416, 148)
2025-11-24 11:00:16,560 - __main__ - INFO -    - Jours f√©ri√©s: 43 (3.04%)
2025-11-24 11:00:16,561 - __main__ - INFO -    - Jours de pont: 85 (6.00%)
2025-11-24 11:00:16,561 - __main__ - INFO -    - Distance au f√©ri√©: min=0, max=90, moyenne=30.3
2025-11-24 11:00:16,561 - __main__ - INFO -    - Vacances scolaires: 591 (41.74%)
2025-11-24 11:00:16,562 - __main__ - INFO -    - Weekends 3j: 57 (4.03%)
2025-11-24 11:00:16,562 - __main__ - INFO -    - Weekends 4j: 101 (7.13%)
2025-11-24 11:00:16,567 - __main__ - INFO - Cr√©ation des features et target...
2025-11-24 11:00:16,568 - __main__ - INFO - --------------------------------
2025-11-24 11:00:16,568 - __main__ - INFO - Horizon: 7
2025-11-24 11:00:16,568 - __main__ - INFO - --------------------------------
2025-11-24 11:00:16,569 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'comp_trend_changes', 'month', 'dayofweek', 'ToF1', 'is_holiday_fr',
       'is_bridge_day', 'days_to_holiday', 'is_vacances_scolaires',
       'is_long_weekend_3j', 'is_long_weekend_4j'],
      dtype='object', length=148)
2025-11-24 11:00:16,569 - __main__ - INFO - Nombre total de features: 77
2025-11-24 11:00:16,569 - __main__ - INFO -    - TO historiques: 53
2025-11-24 11:00:16,570 - __main__ - INFO -    - Features PM: 7
2025-11-24 11:00:16,570 - __main__ - INFO -    - Features concurrents: 6
2025-11-24 11:00:16,570 - __main__ - INFO -    - Autres features: 11
2025-11-24 11:00:16,677 - __main__ - INFO - üíæ Donn√©es d'entra√Ænement sauvegard√©es: results/D09\training_data_before_scaling.csv
2025-11-24 11:00:16,677 - __main__ - INFO -    Shape: (1327, 80)
2025-11-24 11:00:16,677 - __main__ - INFO -    Colonnes: stay_date, hotCode, 77 features, J-0
2025-11-24 11:00:16,677 - __main__ - INFO - X shape: (1327, 77), y shape: (1327,)
2025-11-24 11:00:16,678 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-24 11:00:16,682 - __main__ - INFO - Train: (1061, 77), Test: (266, 77)
2025-11-24 11:00:21,165 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-24 11:00:21,184 - __main__ - INFO - üìä Test MAE: 0.0512
2025-11-24 11:00:21,184 - __main__ - INFO - üìä Test R¬≤: 0.8374
2025-11-24 11:00:21,185 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-24 11:00:21,740 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-24 11:00:22,265 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-24 11:00:22,296 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/D09/models...
2025-11-24 11:00:22,369 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/D09/models\xgb_to_predictor.joblib
2025-11-24 11:00:22,373 - __main__ - INFO - üíæ Scaler sauvegard√©: results/D09/models\xgb_scaler.joblib
2025-11-24 11:00:22,379 - __main__ - INFO - üíæ Features sauvegard√©es: results/D09/models\feature_columns.txt
2025-11-24 11:00:23,511 - __main__ - INFO - ================================================================================
2025-11-24 11:00:23,512 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-24 11:00:23,512 - __main__ - INFO - ================================================================================
2025-11-24 11:00:23,512 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-24 11:00:23,512 - __main__ - INFO -    Train MAE: 0.0004
2025-11-24 11:00:23,513 - __main__ - INFO -    Train R¬≤:  1.0000
2025-11-24 11:00:23,513 - __main__ - INFO -    Test MAE:  0.0512
2025-11-24 11:00:23,513 - __main__ - INFO -    Test R¬≤:   0.8374
2025-11-24 18:29:33,162 - __main__ - INFO - ================================================================================
2025-11-24 18:29:33,162 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-24 18:29:33,162 - __main__ - INFO - ================================================================================
2025-11-24 18:29:33,163 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-24 18:29:33,166 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-24 18:29:33,167 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-24 18:29:33,167 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'rateShopper_path': '../data/D09/rateShopper.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models', 'hyperparam_search': {'n_iter': 30, 'cv_folds': 3}}
2025-11-24 18:29:33,167 - __main__ - INFO - Chargement des donn√©es...
2025-11-24 18:29:33,204 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-24 18:29:33,300 - __main__ - INFO - Indicateurs charg√©s: (86803, 17)
2025-11-24 18:29:33,300 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-24 18:29:33,451 - __main__ - INFO - PM pivot shape: (1423, 63)
2025-11-24 18:29:33,472 - __main__ - INFO - Ant pivot shape: (1423, 63)
2025-11-24 18:29:33,492 - __main__ - INFO - Ds pivot shape: (1423, 63)
2025-11-24 18:29:33,502 - __main__ - INFO - DataFrame fusionn√©: (1415, 248)
2025-11-24 18:29:33,502 - __main__ - INFO - Calcul des features PM sur donn√©es J-7 √† J-60 (pas de data leakage)
2025-11-24 18:29:33,503 - __main__ - INFO -    Colonnes PM utilis√©es: 54
2025-11-24 18:29:34,663 - __main__ - INFO - Features PM ajout√©es: (1415, 255)
2025-11-24 18:29:34,663 - __main__ - INFO - Calcul des features Ant (anticipation) sur donn√©es J-7 √† J-60
2025-11-24 18:29:34,664 - __main__ - INFO -    Colonnes Ant utilis√©es: 54
2025-11-24 18:29:35,426 - __main__ - INFO - Features Ant ajout√©es: (1415, 261)
2025-11-24 18:29:35,426 - __main__ - INFO - Calcul des features Ds (dur√©e s√©jour) sur donn√©es J-7 √† J-60
2025-11-24 18:29:35,426 - __main__ - INFO -    Colonnes Ds utilis√©es: 54
2025-11-24 18:29:36,184 - __main__ - INFO - Features Ds ajout√©es: (1415, 267)
2025-11-24 18:29:36,184 - __main__ - INFO - Chargement des prix concurrents depuis ../data/D09/rateShopper.csv...
2025-11-24 18:29:36,303 - __main__ - INFO - Prix concurrents charg√©s: (175820, 7)
2025-11-24 18:29:36,303 - __main__ - INFO - Pr√©paration des features concurrentes (prix m√©dian)...
2025-11-24 18:29:36,458 - __main__ - INFO -    Features concurrentes calcul√©es sur J-7 √† J-60
2025-11-24 18:29:37,202 - __main__ - INFO - Features concurrentes ajout√©es (6 features). Shape: (1415, 273)
2025-11-24 18:29:37,204 - __main__ - INFO - Ajout de ToF1 (TO final ann√©e N-1)...
2025-11-24 18:29:37,209 - __main__ - INFO -    ToF1 ajout√© : 1050 valeurs non-nulles sur 1416
2025-11-24 18:29:37,209 - __main__ - INFO - Ajout des features jours f√©ri√©s...
2025-11-24 18:29:38,207 - __main__ - INFO - Ajout des vacances scolaires...
2025-11-24 18:29:38,303 - __main__ - INFO - Ajout des weekends prolong√©s...
2025-11-24 18:29:38,316 - __main__ - INFO - Features jours f√©ri√©s et vacances ajout√©es. Shape: (1416, 282)
2025-11-24 18:29:38,317 - __main__ - INFO -    - Jours f√©ri√©s: 43 (3.04%)
2025-11-24 18:29:38,317 - __main__ - INFO -    - Jours de pont: 85 (6.00%)
2025-11-24 18:29:38,318 - __main__ - INFO -    - Distance au f√©ri√©: min=0, max=90, moyenne=30.3
2025-11-24 18:29:38,318 - __main__ - INFO -    - Vacances scolaires: 591 (41.74%)
2025-11-24 18:29:38,319 - __main__ - INFO -    - Weekends 3j: 57 (4.03%)
2025-11-24 18:29:38,320 - __main__ - INFO -    - Weekends 4j: 101 (7.13%)
2025-11-24 18:29:38,325 - __main__ - INFO - Cr√©ation des features et target...
2025-11-24 18:29:38,326 - __main__ - INFO - --------------------------------
2025-11-24 18:29:38,326 - __main__ - INFO - Horizon: 7
2025-11-24 18:29:38,327 - __main__ - INFO - --------------------------------
2025-11-24 18:29:38,327 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'comp_trend_changes', 'month', 'dayofweek', 'ToF1', 'is_holiday_fr',
       'is_bridge_day', 'days_to_holiday', 'is_vacances_scolaires',
       'is_long_weekend_3j', 'is_long_weekend_4j'],
      dtype='object', length=282)
2025-11-24 18:29:38,328 - __main__ - INFO - Nombre total de features: 89
2025-11-24 18:29:38,328 - __main__ - INFO -    - TO historiques: 53
2025-11-24 18:29:38,328 - __main__ - INFO -    - Features PM: 7
2025-11-24 18:29:38,328 - __main__ - INFO -    - Features Ant (anticipation): 6
2025-11-24 18:29:38,328 - __main__ - INFO -    - Features Ds (dur√©e s√©jour): 6
2025-11-24 18:29:38,329 - __main__ - INFO -    - Features concurrents: 6
2025-11-24 18:29:38,329 - __main__ - INFO -    - Autres features: 11
2025-11-24 18:29:38,447 - __main__ - INFO - üíæ Donn√©es d'entra√Ænement sauvegard√©es: results/D09\training_data_before_scaling.csv
2025-11-24 18:29:38,447 - __main__ - INFO -    Shape: (1327, 92)
2025-11-24 18:29:38,447 - __main__ - INFO -    Colonnes: stay_date, hotCode, 89 features, J-0
2025-11-24 18:29:38,448 - __main__ - INFO - X shape: (1327, 89), y shape: (1327,)
2025-11-24 18:29:38,449 - __main__ - INFO - ================================================================================
2025-11-24 18:29:38,449 - __main__ - INFO - RECHERCHE D'HYPERPARAM√àTRES (RANDOMIZED SEARCH)
2025-11-24 18:29:38,450 - __main__ - INFO - ================================================================================
2025-11-24 18:29:38,455 - __main__ - INFO - Train: (1061, 89), Validation: (266, 89)
2025-11-24 18:29:38,455 - __main__ - INFO - Configuration de la recherche:
2025-11-24 18:29:38,455 - __main__ - INFO -    - Nombre d'it√©rations: 30
2025-11-24 18:29:38,456 - __main__ - INFO -    - Cross-validation: 3 folds
2025-11-24 18:29:38,456 - __main__ - INFO -    - Nombre total d'entra√Ænements: 90
2025-11-24 18:29:38,456 - __main__ - INFO -    - M√©trique: neg_mean_absolute_error
2025-11-24 18:29:38,457 - __main__ - INFO - 
D√©marrage de la recherche d'hyperparam√®tres...
2025-11-24 18:31:34,693 - __main__ - INFO - ================================================================================
2025-11-24 18:31:34,693 - __main__ - INFO - R√âSULTATS DE LA RECHERCHE
2025-11-24 18:31:34,693 - __main__ - INFO - ================================================================================
2025-11-24 18:31:34,694 - __main__ - INFO - Meilleur score (MAE sur CV): 0.0578
2025-11-24 18:31:34,694 - __main__ - INFO - Meilleurs param√®tres trouv√©s:
2025-11-24 18:31:34,694 - __main__ - INFO -    - subsample: 0.95
2025-11-24 18:31:34,694 - __main__ - INFO -    - reg_lambda: 1.0
2025-11-24 18:31:34,694 - __main__ - INFO -    - reg_alpha: 0
2025-11-24 18:31:34,695 - __main__ - INFO -    - n_estimators: 500
2025-11-24 18:31:34,695 - __main__ - INFO -    - min_child_weight: 3
2025-11-24 18:31:34,695 - __main__ - INFO -    - max_depth: 5
2025-11-24 18:31:34,695 - __main__ - INFO -    - learning_rate: 0.05
2025-11-24 18:31:34,695 - __main__ - INFO -    - colsample_bytree: 0.95
2025-11-24 18:31:34,700 - __main__ - INFO - 
Performances sur validation:
2025-11-24 18:31:34,700 - __main__ - INFO -    - MAE: 0.0512
2025-11-24 18:31:34,701 - __main__ - INFO -    - R¬≤: 0.8398
2025-11-24 18:31:34,701 - __main__ - INFO - ================================================================================
2025-11-24 18:31:34,701 - __main__ - INFO - 
üîß Mise √† jour de la configuration avec les meilleurs param√®tres...
2025-11-24 18:31:34,702 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-24 18:31:34,707 - __main__ - INFO - Train: (1061, 89), Test: (266, 89)
2025-11-24 18:31:36,157 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-24 18:31:36,169 - __main__ - INFO - üìä Test MAE: 0.0512
2025-11-24 18:31:36,169 - __main__ - INFO - üìä Test R¬≤: 0.8398
2025-11-24 18:31:36,169 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-24 18:31:37,135 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-24 18:31:37,441 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-24 18:31:37,456 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/D09/models...
2025-11-24 18:31:37,488 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/D09/models\xgb_to_predictor.joblib
2025-11-24 18:31:37,489 - __main__ - INFO - üíæ Scaler sauvegard√©: results/D09/models\xgb_scaler.joblib
2025-11-24 18:31:37,489 - __main__ - INFO - üíæ Features sauvegard√©es: results/D09/models\feature_columns.txt
2025-11-24 18:31:43,377 - __main__ - INFO - ================================================================================
2025-11-24 18:31:43,377 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-24 18:31:43,377 - __main__ - INFO - ================================================================================
2025-11-24 18:31:43,377 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-24 18:31:43,378 - __main__ - INFO -    Train MAE: 0.0041
2025-11-24 18:31:43,378 - __main__ - INFO -    Train R¬≤:  0.9990
2025-11-24 18:31:43,378 - __main__ - INFO -    Test MAE:  0.0512
2025-11-24 18:31:43,378 - __main__ - INFO -    Test R¬≤:   0.8398
2025-11-24 18:32:27,921 - __main__ - INFO - ================================================================================
2025-11-24 18:32:27,921 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-24 18:32:27,921 - __main__ - INFO - ================================================================================
2025-11-24 18:32:27,922 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-24 18:32:27,925 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-24 18:32:27,925 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-24 18:32:27,926 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'rateShopper_path': '../data/D09/rateShopper.csv', 'prediction_horizon': 15, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models', 'hyperparam_search': {'n_iter': 30, 'cv_folds': 3}}
2025-11-24 18:32:27,926 - __main__ - INFO - Chargement des donn√©es...
2025-11-24 18:32:27,942 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-24 18:32:28,019 - __main__ - INFO - Indicateurs charg√©s: (86803, 17)
2025-11-24 18:32:28,020 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-24 18:32:28,065 - __main__ - INFO - PM pivot shape: (1423, 63)
2025-11-24 18:32:28,086 - __main__ - INFO - Ant pivot shape: (1423, 63)
2025-11-24 18:32:28,108 - __main__ - INFO - Ds pivot shape: (1423, 63)
2025-11-24 18:32:28,121 - __main__ - INFO - DataFrame fusionn√©: (1415, 248)
2025-11-24 18:32:28,121 - __main__ - INFO - Calcul des features PM sur donn√©es J-15 √† J-60 (pas de data leakage)
2025-11-24 18:32:28,122 - __main__ - INFO -    Colonnes PM utilis√©es: 46
2025-11-24 18:32:29,422 - __main__ - INFO - Features PM ajout√©es: (1415, 255)
2025-11-24 18:32:29,423 - __main__ - INFO - Calcul des features Ant (anticipation) sur donn√©es J-15 √† J-60
2025-11-24 18:32:29,423 - __main__ - INFO -    Colonnes Ant utilis√©es: 46
2025-11-24 18:32:30,230 - __main__ - INFO - Features Ant ajout√©es: (1415, 261)
2025-11-24 18:32:30,230 - __main__ - INFO - Calcul des features Ds (dur√©e s√©jour) sur donn√©es J-15 √† J-60
2025-11-24 18:32:30,230 - __main__ - INFO -    Colonnes Ds utilis√©es: 46
2025-11-24 18:32:31,084 - __main__ - INFO - Features Ds ajout√©es: (1415, 267)
2025-11-24 18:32:31,084 - __main__ - INFO - Chargement des prix concurrents depuis ../data/D09/rateShopper.csv...
2025-11-24 18:32:31,197 - __main__ - INFO - Prix concurrents charg√©s: (175820, 7)
2025-11-24 18:32:31,197 - __main__ - INFO - Pr√©paration des features concurrentes (prix m√©dian)...
2025-11-24 18:32:31,351 - __main__ - INFO -    Features concurrentes calcul√©es sur J-15 √† J-60
2025-11-24 18:32:32,131 - __main__ - INFO - Features concurrentes ajout√©es (6 features). Shape: (1415, 273)
2025-11-24 18:32:32,133 - __main__ - INFO - Ajout de ToF1 (TO final ann√©e N-1)...
2025-11-24 18:32:32,139 - __main__ - INFO -    ToF1 ajout√© : 1050 valeurs non-nulles sur 1416
2025-11-24 18:32:32,140 - __main__ - INFO - Ajout des features jours f√©ri√©s...
2025-11-24 18:32:32,665 - __main__ - INFO - Ajout des vacances scolaires...
2025-11-24 18:32:32,764 - __main__ - INFO - Ajout des weekends prolong√©s...
2025-11-24 18:32:32,778 - __main__ - INFO - Features jours f√©ri√©s et vacances ajout√©es. Shape: (1416, 282)
2025-11-24 18:32:32,779 - __main__ - INFO -    - Jours f√©ri√©s: 43 (3.04%)
2025-11-24 18:32:32,779 - __main__ - INFO -    - Jours de pont: 85 (6.00%)
2025-11-24 18:32:32,779 - __main__ - INFO -    - Distance au f√©ri√©: min=0, max=90, moyenne=30.3
2025-11-24 18:32:32,780 - __main__ - INFO -    - Vacances scolaires: 591 (41.74%)
2025-11-24 18:32:32,780 - __main__ - INFO -    - Weekends 3j: 57 (4.03%)
2025-11-24 18:32:32,781 - __main__ - INFO -    - Weekends 4j: 101 (7.13%)
2025-11-24 18:32:32,787 - __main__ - INFO - Cr√©ation des features et target...
2025-11-24 18:32:32,787 - __main__ - INFO - --------------------------------
2025-11-24 18:32:32,787 - __main__ - INFO - Horizon: 15
2025-11-24 18:32:32,788 - __main__ - INFO - --------------------------------
2025-11-24 18:32:32,788 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'comp_trend_changes', 'month', 'dayofweek', 'ToF1', 'is_holiday_fr',
       'is_bridge_day', 'days_to_holiday', 'is_vacances_scolaires',
       'is_long_weekend_3j', 'is_long_weekend_4j'],
      dtype='object', length=282)
2025-11-24 18:32:32,789 - __main__ - INFO - Nombre total de features: 81
2025-11-24 18:32:32,789 - __main__ - INFO -    - TO historiques: 45
2025-11-24 18:32:32,789 - __main__ - INFO -    - Features PM: 7
2025-11-24 18:32:32,790 - __main__ - INFO -    - Features Ant (anticipation): 6
2025-11-24 18:32:32,790 - __main__ - INFO -    - Features Ds (dur√©e s√©jour): 6
2025-11-24 18:32:32,790 - __main__ - INFO -    - Features concurrents: 6
2025-11-24 18:32:32,790 - __main__ - INFO -    - Autres features: 11
2025-11-24 18:32:32,805 - __main__ - WARNING - ‚ö†Ô∏è  Erreur lors de la sauvegarde des donn√©es d'entra√Ænement: [Errno 13] Permission denied: 'results/D09\\training_data_before_scaling.csv'
2025-11-24 18:32:32,805 - __main__ - INFO - X shape: (1327, 81), y shape: (1327,)
2025-11-24 18:32:32,806 - __main__ - INFO - ================================================================================
2025-11-24 18:32:32,806 - __main__ - INFO - RECHERCHE D'HYPERPARAM√àTRES (RANDOMIZED SEARCH)
2025-11-24 18:32:32,807 - __main__ - INFO - ================================================================================
2025-11-24 18:32:32,811 - __main__ - INFO - Train: (1061, 81), Validation: (266, 81)
2025-11-24 18:32:32,811 - __main__ - INFO - Configuration de la recherche:
2025-11-24 18:32:32,811 - __main__ - INFO -    - Nombre d'it√©rations: 30
2025-11-24 18:32:32,811 - __main__ - INFO -    - Cross-validation: 3 folds
2025-11-24 18:32:32,812 - __main__ - INFO -    - Nombre total d'entra√Ænements: 90
2025-11-24 18:32:32,812 - __main__ - INFO -    - M√©trique: neg_mean_absolute_error
2025-11-24 18:32:32,812 - __main__ - INFO - 
D√©marrage de la recherche d'hyperparam√®tres...
2025-11-24 18:34:15,568 - __main__ - INFO - ================================================================================
2025-11-24 18:34:15,568 - __main__ - INFO - R√âSULTATS DE LA RECHERCHE
2025-11-24 18:34:15,569 - __main__ - INFO - ================================================================================
2025-11-24 18:34:15,569 - __main__ - INFO - Meilleur score (MAE sur CV): 0.0702
2025-11-24 18:34:15,569 - __main__ - INFO - Meilleurs param√®tres trouv√©s:
2025-11-24 18:34:15,569 - __main__ - INFO -    - subsample: 0.9
2025-11-24 18:34:15,570 - __main__ - INFO -    - reg_lambda: 0.5
2025-11-24 18:34:15,570 - __main__ - INFO -    - reg_alpha: 0.1
2025-11-24 18:34:15,570 - __main__ - INFO -    - n_estimators: 800
2025-11-24 18:34:15,570 - __main__ - INFO -    - min_child_weight: 3
2025-11-24 18:34:15,570 - __main__ - INFO -    - max_depth: 6
2025-11-24 18:34:15,570 - __main__ - INFO -    - learning_rate: 0.01
2025-11-24 18:34:15,571 - __main__ - INFO -    - colsample_bytree: 0.85
2025-11-24 18:34:15,577 - __main__ - INFO - 
Performances sur validation:
2025-11-24 18:34:15,578 - __main__ - INFO -    - MAE: 0.0647
2025-11-24 18:34:15,578 - __main__ - INFO -    - R¬≤: 0.7477
2025-11-24 18:34:15,578 - __main__ - INFO - ================================================================================
2025-11-24 18:34:15,579 - __main__ - INFO - 
üîß Mise √† jour de la configuration avec les meilleurs param√®tres...
2025-11-24 18:34:15,579 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-24 18:34:15,588 - __main__ - INFO - Train: (1061, 81), Test: (266, 81)
2025-11-24 18:34:22,215 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-24 18:34:22,238 - __main__ - INFO - üìä Test MAE: 0.0647
2025-11-24 18:34:22,239 - __main__ - INFO - üìä Test R¬≤: 0.7477
2025-11-24 18:34:22,239 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-24 18:34:22,827 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-24 18:34:23,235 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-24 18:34:23,252 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/D09/models...
2025-11-24 18:34:23,302 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/D09/models\xgb_to_predictor.joblib
2025-11-24 18:34:23,302 - __main__ - INFO - üíæ Scaler sauvegard√©: results/D09/models\xgb_scaler.joblib
2025-11-24 18:34:23,302 - __main__ - INFO - üíæ Features sauvegard√©es: results/D09/models\feature_columns.txt
2025-11-24 18:34:44,219 - __main__ - INFO - ================================================================================
2025-11-24 18:34:44,220 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-24 18:34:44,221 - __main__ - INFO - ================================================================================
2025-11-24 18:34:44,221 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-24 18:34:44,221 - __main__ - INFO -    Train MAE: 0.0181
2025-11-24 18:34:44,221 - __main__ - INFO -    Train R¬≤:  0.9816
2025-11-24 18:34:44,222 - __main__ - INFO -    Test MAE:  0.0647
2025-11-24 18:34:44,222 - __main__ - INFO -    Test R¬≤:   0.7477
2025-11-24 18:57:26,168 - __main__ - INFO - ================================================================================
2025-11-24 18:57:26,169 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-24 18:57:26,169 - __main__ - INFO - ================================================================================
2025-11-24 18:57:26,169 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-24 18:57:26,173 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-24 18:57:26,173 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-24 18:57:26,173 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'rateShopper_path': '../data/D09/rateShopper.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models', 'hyperparam_search': {'n_iter': 30, 'cv_folds': 3}}
2025-11-24 18:57:26,173 - __main__ - INFO - Chargement des donn√©es...
2025-11-24 18:57:26,189 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-24 18:57:26,276 - __main__ - INFO - Indicateurs charg√©s: (86803, 17)
2025-11-24 18:57:26,277 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-24 18:57:26,327 - __main__ - INFO - PM pivot shape: (1423, 63)
2025-11-24 18:57:26,349 - __main__ - INFO - Ant pivot shape: (1423, 63)
2025-11-24 18:57:26,372 - __main__ - INFO - Ds pivot shape: (1423, 63)
2025-11-24 18:57:26,383 - __main__ - INFO - DataFrame fusionn√©: (1415, 248)
2025-11-24 18:57:26,383 - __main__ - INFO - Calcul des features PM sur donn√©es J-7 √† J-60 (pas de data leakage)
2025-11-24 18:57:26,384 - __main__ - INFO -    Colonnes PM utilis√©es: 54
2025-11-24 18:57:27,759 - __main__ - INFO - Features PM ajout√©es: (1415, 255)
2025-11-24 18:57:27,760 - __main__ - INFO - Calcul des features Ant (anticipation) sur donn√©es J-7 √† J-60
2025-11-24 18:57:27,760 - __main__ - INFO -    Colonnes Ant utilis√©es: 54
2025-11-24 18:57:29,438 - __main__ - INFO - Features Ant ajout√©es: (1415, 261)
2025-11-24 18:57:29,439 - __main__ - INFO - Calcul des features Ds (dur√©e s√©jour) sur donn√©es J-7 √† J-60
2025-11-24 18:57:29,439 - __main__ - INFO -    Colonnes Ds utilis√©es: 54
2025-11-24 18:57:30,645 - __main__ - INFO - Features Ds ajout√©es: (1415, 267)
2025-11-24 18:57:30,645 - __main__ - INFO - Chargement des prix concurrents depuis ../data/D09/rateShopper.csv...
2025-11-24 18:57:30,775 - __main__ - INFO - Prix concurrents charg√©s: (175820, 7)
2025-11-24 18:57:30,776 - __main__ - INFO - Pr√©paration des features concurrentes (prix m√©dian)...
2025-11-24 18:57:30,922 - __main__ - INFO -    Features concurrentes calcul√©es sur J-7 √† J-60
2025-11-24 18:57:31,658 - __main__ - INFO - Features concurrentes ajout√©es (6 features). Shape: (1415, 273)
2025-11-24 18:57:31,661 - __main__ - INFO - Ajout de ToF1 (TO final ann√©e N-1)...
2025-11-24 18:57:31,666 - __main__ - INFO -    ToF1 ajout√© : 1050 valeurs non-nulles sur 1416
2025-11-24 18:57:31,666 - __main__ - INFO - Ajout des features jours f√©ri√©s...
2025-11-24 18:57:32,110 - __main__ - INFO - Ajout des vacances scolaires...
2025-11-24 18:57:32,208 - __main__ - INFO - Ajout des weekends prolong√©s...
2025-11-24 18:57:32,222 - __main__ - INFO - Features jours f√©ri√©s et vacances ajout√©es. Shape: (1416, 282)
2025-11-24 18:57:32,223 - __main__ - INFO -    - Jours f√©ri√©s: 43 (3.04%)
2025-11-24 18:57:32,223 - __main__ - INFO -    - Jours de pont: 85 (6.00%)
2025-11-24 18:57:32,223 - __main__ - INFO -    - Distance au f√©ri√©: min=0, max=90, moyenne=30.3
2025-11-24 18:57:32,224 - __main__ - INFO -    - Vacances scolaires: 591 (41.74%)
2025-11-24 18:57:32,224 - __main__ - INFO -    - Weekends 3j: 57 (4.03%)
2025-11-24 18:57:32,224 - __main__ - INFO -    - Weekends 4j: 101 (7.13%)
2025-11-24 18:57:32,230 - __main__ - INFO - Cr√©ation des features et target...
2025-11-24 18:57:32,230 - __main__ - INFO - --------------------------------
2025-11-24 18:57:32,231 - __main__ - INFO - Horizon: 7
2025-11-24 18:57:32,231 - __main__ - INFO - --------------------------------
2025-11-24 18:57:32,232 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'comp_trend_changes', 'month', 'dayofweek', 'ToF1', 'is_holiday_fr',
       'is_bridge_day', 'days_to_holiday', 'is_vacances_scolaires',
       'is_long_weekend_3j', 'is_long_weekend_4j'],
      dtype='object', length=282)
2025-11-24 18:57:32,234 - __main__ - INFO - nb_observations recalcul√© pour horizon=7
2025-11-24 18:57:32,234 - __main__ - INFO -    Minimum: 54
2025-11-24 18:57:32,235 - __main__ - INFO -    Maximum: 54
2025-11-24 18:57:32,235 - __main__ - INFO -    Moyenne: 54.0
2025-11-24 18:57:32,235 - __main__ - INFO - Nombre total de features: 89
2025-11-24 18:57:32,235 - __main__ - INFO -    - TO historiques: 53
2025-11-24 18:57:32,235 - __main__ - INFO -    - Features PM: 7
2025-11-24 18:57:32,235 - __main__ - INFO -    - Features Ant (anticipation): 6
2025-11-24 18:57:32,236 - __main__ - INFO -    - Features Ds (dur√©e s√©jour): 6
2025-11-24 18:57:32,236 - __main__ - INFO -    - Features concurrents: 6
2025-11-24 18:57:32,236 - __main__ - INFO -    - Autres features: 11
2025-11-24 18:57:32,343 - __main__ - INFO - üíæ Donn√©es d'entra√Ænement sauvegard√©es: results/D09\training_data_before_scaling.csv
2025-11-24 18:57:32,343 - __main__ - INFO -    Shape: (1327, 92)
2025-11-24 18:57:32,344 - __main__ - INFO -    Colonnes: stay_date, hotCode, 89 features, J-0
2025-11-24 18:57:32,344 - __main__ - INFO - X shape: (1327, 89), y shape: (1327,)
2025-11-24 18:57:32,345 - __main__ - INFO - ================================================================================
2025-11-24 18:57:32,345 - __main__ - INFO - RECHERCHE D'HYPERPARAM√àTRES (RANDOMIZED SEARCH)
2025-11-24 18:57:32,346 - __main__ - INFO - ================================================================================
2025-11-24 18:57:32,350 - __main__ - INFO - Train: (1061, 89), Validation: (266, 89)
2025-11-24 18:57:32,350 - __main__ - INFO - Configuration de la recherche:
2025-11-24 18:57:32,350 - __main__ - INFO -    - Nombre d'it√©rations: 30
2025-11-24 18:57:32,351 - __main__ - INFO -    - Cross-validation: 3 folds
2025-11-24 18:57:32,351 - __main__ - INFO -    - Nombre total d'entra√Ænements: 90
2025-11-24 18:57:32,351 - __main__ - INFO -    - M√©trique: neg_mean_absolute_error
2025-11-24 18:57:32,351 - __main__ - INFO - 
D√©marrage de la recherche d'hyperparam√®tres...
2025-11-24 18:59:14,250 - __main__ - INFO - ================================================================================
2025-11-24 18:59:14,250 - __main__ - INFO - R√âSULTATS DE LA RECHERCHE
2025-11-24 18:59:14,251 - __main__ - INFO - ================================================================================
2025-11-24 18:59:14,251 - __main__ - INFO - Meilleur score (MAE sur CV): 0.0578
2025-11-24 18:59:14,251 - __main__ - INFO - Meilleurs param√®tres trouv√©s:
2025-11-24 18:59:14,251 - __main__ - INFO -    - subsample: 0.95
2025-11-24 18:59:14,252 - __main__ - INFO -    - reg_lambda: 1.0
2025-11-24 18:59:14,252 - __main__ - INFO -    - reg_alpha: 0
2025-11-24 18:59:14,252 - __main__ - INFO -    - n_estimators: 500
2025-11-24 18:59:14,252 - __main__ - INFO -    - min_child_weight: 3
2025-11-24 18:59:14,253 - __main__ - INFO -    - max_depth: 5
2025-11-24 18:59:14,253 - __main__ - INFO -    - learning_rate: 0.05
2025-11-24 18:59:14,253 - __main__ - INFO -    - colsample_bytree: 0.95
2025-11-24 18:59:14,257 - __main__ - INFO - 
Performances sur validation:
2025-11-24 18:59:14,261 - __main__ - INFO -    - MAE: 0.0512
2025-11-24 18:59:14,275 - __main__ - INFO -    - R¬≤: 0.8398
2025-11-24 18:59:14,280 - __main__ - INFO - ================================================================================
2025-11-24 18:59:14,283 - __main__ - INFO - 
üîß Mise √† jour de la configuration avec les meilleurs param√®tres...
2025-11-24 18:59:14,285 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-24 18:59:14,295 - __main__ - INFO - Train: (1061, 89), Test: (266, 89)
2025-11-24 18:59:17,318 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-24 18:59:17,334 - __main__ - INFO - üìä Test MAE: 0.0512
2025-11-24 18:59:17,334 - __main__ - INFO - üìä Test R¬≤: 0.8398
2025-11-24 18:59:17,334 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-24 18:59:18,013 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-24 18:59:18,530 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-24 18:59:18,555 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/D09/models...
2025-11-24 18:59:18,644 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/D09/models\xgb_to_predictor.joblib
2025-11-24 18:59:18,645 - __main__ - INFO - üíæ Scaler sauvegard√©: results/D09/models\xgb_scaler.joblib
2025-11-24 18:59:18,645 - __main__ - INFO - üíæ Features sauvegard√©es: results/D09/models\feature_columns.txt
2025-11-24 18:59:21,666 - __main__ - INFO - ================================================================================
2025-11-24 18:59:21,667 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-24 18:59:21,667 - __main__ - INFO - ================================================================================
2025-11-24 18:59:21,667 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-24 18:59:21,667 - __main__ - INFO -    Train MAE: 0.0041
2025-11-24 18:59:21,668 - __main__ - INFO -    Train R¬≤:  0.9990
2025-11-24 18:59:21,668 - __main__ - INFO -    Test MAE:  0.0512
2025-11-24 18:59:21,668 - __main__ - INFO -    Test R¬≤:   0.8398
2025-11-24 19:00:09,074 - __main__ - INFO - ================================================================================
2025-11-24 19:00:09,075 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-24 19:00:09,075 - __main__ - INFO - ================================================================================
2025-11-24 19:00:09,076 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-24 19:00:09,080 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-24 19:00:09,080 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-24 19:00:09,080 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'rateShopper_path': '../data/D09/rateShopper.csv', 'prediction_horizon': 1, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models', 'hyperparam_search': {'n_iter': 30, 'cv_folds': 3}}
2025-11-24 19:00:09,080 - __main__ - INFO - Chargement des donn√©es...
2025-11-24 19:00:09,097 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-24 19:00:09,186 - __main__ - INFO - Indicateurs charg√©s: (86803, 17)
2025-11-24 19:00:09,187 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-24 19:00:09,248 - __main__ - INFO - PM pivot shape: (1423, 63)
2025-11-24 19:00:09,271 - __main__ - INFO - Ant pivot shape: (1423, 63)
2025-11-24 19:00:09,295 - __main__ - INFO - Ds pivot shape: (1423, 63)
2025-11-24 19:00:09,306 - __main__ - INFO - DataFrame fusionn√©: (1415, 248)
2025-11-24 19:00:09,307 - __main__ - INFO - Calcul des features PM sur donn√©es J-1 √† J-60 (pas de data leakage)
2025-11-24 19:00:09,307 - __main__ - INFO -    Colonnes PM utilis√©es: 60
2025-11-24 19:00:10,611 - __main__ - INFO - Features PM ajout√©es: (1415, 255)
2025-11-24 19:00:10,612 - __main__ - INFO - Calcul des features Ant (anticipation) sur donn√©es J-1 √† J-60
2025-11-24 19:00:10,612 - __main__ - INFO -    Colonnes Ant utilis√©es: 60
2025-11-24 19:00:11,555 - __main__ - INFO - Features Ant ajout√©es: (1415, 261)
2025-11-24 19:00:11,555 - __main__ - INFO - Calcul des features Ds (dur√©e s√©jour) sur donn√©es J-1 √† J-60
2025-11-24 19:00:11,556 - __main__ - INFO -    Colonnes Ds utilis√©es: 60
2025-11-24 19:00:12,544 - __main__ - INFO - Features Ds ajout√©es: (1415, 267)
2025-11-24 19:00:12,544 - __main__ - INFO - Chargement des prix concurrents depuis ../data/D09/rateShopper.csv...
2025-11-24 19:00:12,677 - __main__ - INFO - Prix concurrents charg√©s: (175820, 7)
2025-11-24 19:00:12,677 - __main__ - INFO - Pr√©paration des features concurrentes (prix m√©dian)...
2025-11-24 19:00:13,001 - __main__ - INFO -    Features concurrentes calcul√©es sur J-1 √† J-60
2025-11-24 19:00:13,897 - __main__ - INFO - Features concurrentes ajout√©es (6 features). Shape: (1415, 273)
2025-11-24 19:00:13,899 - __main__ - INFO - Ajout de ToF1 (TO final ann√©e N-1)...
2025-11-24 19:00:13,906 - __main__ - INFO -    ToF1 ajout√© : 1050 valeurs non-nulles sur 1416
2025-11-24 19:00:13,906 - __main__ - INFO - Ajout des features jours f√©ri√©s...
2025-11-24 19:00:14,518 - __main__ - INFO - Ajout des vacances scolaires...
2025-11-24 19:00:14,624 - __main__ - INFO - Ajout des weekends prolong√©s...
2025-11-24 19:00:14,644 - __main__ - INFO - Features jours f√©ri√©s et vacances ajout√©es. Shape: (1416, 282)
2025-11-24 19:00:14,645 - __main__ - INFO -    - Jours f√©ri√©s: 43 (3.04%)
2025-11-24 19:00:14,645 - __main__ - INFO -    - Jours de pont: 85 (6.00%)
2025-11-24 19:00:14,648 - __main__ - INFO -    - Distance au f√©ri√©: min=0, max=90, moyenne=30.3
2025-11-24 19:00:14,648 - __main__ - INFO -    - Vacances scolaires: 591 (41.74%)
2025-11-24 19:00:14,649 - __main__ - INFO -    - Weekends 3j: 57 (4.03%)
2025-11-24 19:00:14,649 - __main__ - INFO -    - Weekends 4j: 101 (7.13%)
2025-11-24 19:00:14,656 - __main__ - INFO - Cr√©ation des features et target...
2025-11-24 19:00:14,656 - __main__ - INFO - --------------------------------
2025-11-24 19:00:14,657 - __main__ - INFO - Horizon: 1
2025-11-24 19:00:14,657 - __main__ - INFO - --------------------------------
2025-11-24 19:00:14,658 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'comp_trend_changes', 'month', 'dayofweek', 'ToF1', 'is_holiday_fr',
       'is_bridge_day', 'days_to_holiday', 'is_vacances_scolaires',
       'is_long_weekend_3j', 'is_long_weekend_4j'],
      dtype='object', length=282)
2025-11-24 19:00:14,659 - __main__ - INFO - nb_observations recalcul√© pour horizon=1
2025-11-24 19:00:14,660 - __main__ - INFO -    Minimum: 60
2025-11-24 19:00:14,660 - __main__ - INFO -    Maximum: 60
2025-11-24 19:00:14,661 - __main__ - INFO -    Moyenne: 60.0
2025-11-24 19:00:14,661 - __main__ - INFO - Nombre total de features: 95
2025-11-24 19:00:14,661 - __main__ - INFO -    - TO historiques: 59
2025-11-24 19:00:14,661 - __main__ - INFO -    - Features PM: 7
2025-11-24 19:00:14,662 - __main__ - INFO -    - Features Ant (anticipation): 6
2025-11-24 19:00:14,662 - __main__ - INFO -    - Features Ds (dur√©e s√©jour): 6
2025-11-24 19:00:14,662 - __main__ - INFO -    - Features concurrents: 6
2025-11-24 19:00:14,662 - __main__ - INFO -    - Autres features: 11
2025-11-24 19:00:14,807 - __main__ - INFO - üíæ Donn√©es d'entra√Ænement sauvegard√©es: results/D09\training_data_before_scaling.csv
2025-11-24 19:00:14,808 - __main__ - INFO -    Shape: (1327, 98)
2025-11-24 19:00:14,808 - __main__ - INFO -    Colonnes: stay_date, hotCode, 95 features, J-0
2025-11-24 19:00:14,808 - __main__ - INFO - X shape: (1327, 95), y shape: (1327,)
2025-11-24 19:00:14,810 - __main__ - INFO - ================================================================================
2025-11-24 19:00:14,810 - __main__ - INFO - RECHERCHE D'HYPERPARAM√àTRES (RANDOMIZED SEARCH)
2025-11-24 19:00:14,810 - __main__ - INFO - ================================================================================
2025-11-24 19:00:14,816 - __main__ - INFO - Train: (1061, 95), Validation: (266, 95)
2025-11-24 19:00:14,817 - __main__ - INFO - Configuration de la recherche:
2025-11-24 19:00:14,817 - __main__ - INFO -    - Nombre d'it√©rations: 30
2025-11-24 19:00:14,817 - __main__ - INFO -    - Cross-validation: 3 folds
2025-11-24 19:00:14,817 - __main__ - INFO -    - Nombre total d'entra√Ænements: 90
2025-11-24 19:00:14,818 - __main__ - INFO -    - M√©trique: neg_mean_absolute_error
2025-11-24 19:00:14,818 - __main__ - INFO - 
D√©marrage de la recherche d'hyperparam√®tres...
2025-11-24 19:01:55,221 - __main__ - INFO - ================================================================================
2025-11-24 19:01:55,222 - __main__ - INFO - R√âSULTATS DE LA RECHERCHE
2025-11-24 19:01:55,222 - __main__ - INFO - ================================================================================
2025-11-24 19:01:55,222 - __main__ - INFO - Meilleur score (MAE sur CV): 0.0296
2025-11-24 19:01:55,222 - __main__ - INFO - Meilleurs param√®tres trouv√©s:
2025-11-24 19:01:55,222 - __main__ - INFO -    - subsample: 0.95
2025-11-24 19:01:55,223 - __main__ - INFO -    - reg_lambda: 1.0
2025-11-24 19:01:55,223 - __main__ - INFO -    - reg_alpha: 0
2025-11-24 19:01:55,223 - __main__ - INFO -    - n_estimators: 500
2025-11-24 19:01:55,223 - __main__ - INFO -    - min_child_weight: 3
2025-11-24 19:01:55,223 - __main__ - INFO -    - max_depth: 5
2025-11-24 19:01:55,223 - __main__ - INFO -    - learning_rate: 0.05
2025-11-24 19:01:55,224 - __main__ - INFO -    - colsample_bytree: 0.95
2025-11-24 19:01:55,228 - __main__ - INFO - 
Performances sur validation:
2025-11-24 19:01:55,228 - __main__ - INFO -    - MAE: 0.0249
2025-11-24 19:01:55,229 - __main__ - INFO -    - R¬≤: 0.9611
2025-11-24 19:01:55,229 - __main__ - INFO - ================================================================================
2025-11-24 19:01:55,229 - __main__ - INFO - 
üîß Mise √† jour de la configuration avec les meilleurs param√®tres...
2025-11-24 19:01:55,230 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-24 19:01:55,235 - __main__ - INFO - Train: (1061, 95), Test: (266, 95)
2025-11-24 19:01:56,846 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-24 19:01:56,857 - __main__ - INFO - üìä Test MAE: 0.0249
2025-11-24 19:01:56,857 - __main__ - INFO - üìä Test R¬≤: 0.9611
2025-11-24 19:01:56,857 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-24 19:01:57,369 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-24 19:01:57,685 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-24 19:01:57,702 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/D09/models...
2025-11-24 19:01:57,733 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/D09/models\xgb_to_predictor.joblib
2025-11-24 19:01:57,733 - __main__ - INFO - üíæ Scaler sauvegard√©: results/D09/models\xgb_scaler.joblib
2025-11-24 19:01:57,733 - __main__ - INFO - üíæ Features sauvegard√©es: results/D09/models\feature_columns.txt
2025-11-24 19:01:59,854 - __main__ - INFO - ================================================================================
2025-11-24 19:01:59,854 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-24 19:01:59,854 - __main__ - INFO - ================================================================================
2025-11-24 19:01:59,855 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-24 19:01:59,855 - __main__ - INFO -    Train MAE: 0.0016
2025-11-24 19:01:59,855 - __main__ - INFO -    Train R¬≤:  0.9998
2025-11-24 19:01:59,855 - __main__ - INFO -    Test MAE:  0.0249
2025-11-24 19:01:59,855 - __main__ - INFO -    Test R¬≤:   0.9611
2025-11-24 19:02:40,703 - __main__ - INFO - ================================================================================
2025-11-24 19:02:40,703 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-24 19:02:40,703 - __main__ - INFO - ================================================================================
2025-11-24 19:02:40,703 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-24 19:02:40,706 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-24 19:02:40,707 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-24 19:02:40,707 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'rateShopper_path': '../data/D09/rateShopper.csv', 'prediction_horizon': 30, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models', 'hyperparam_search': {'n_iter': 30, 'cv_folds': 3}}
2025-11-24 19:02:40,707 - __main__ - INFO - Chargement des donn√©es...
2025-11-24 19:02:40,722 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-24 19:02:40,809 - __main__ - INFO - Indicateurs charg√©s: (86803, 17)
2025-11-24 19:02:40,810 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-24 19:02:40,859 - __main__ - INFO - PM pivot shape: (1423, 63)
2025-11-24 19:02:40,885 - __main__ - INFO - Ant pivot shape: (1423, 63)
2025-11-24 19:02:40,914 - __main__ - INFO - Ds pivot shape: (1423, 63)
2025-11-24 19:02:40,925 - __main__ - INFO - DataFrame fusionn√©: (1415, 248)
2025-11-24 19:02:40,925 - __main__ - INFO - Calcul des features PM sur donn√©es J-30 √† J-60 (pas de data leakage)
2025-11-24 19:02:40,925 - __main__ - INFO -    Colonnes PM utilis√©es: 31
2025-11-24 19:02:42,055 - __main__ - INFO - Features PM ajout√©es: (1415, 255)
2025-11-24 19:02:42,056 - __main__ - INFO - Calcul des features Ant (anticipation) sur donn√©es J-30 √† J-60
2025-11-24 19:02:42,056 - __main__ - INFO -    Colonnes Ant utilis√©es: 31
2025-11-24 19:02:42,817 - __main__ - INFO - Features Ant ajout√©es: (1415, 261)
2025-11-24 19:02:42,817 - __main__ - INFO - Calcul des features Ds (dur√©e s√©jour) sur donn√©es J-30 √† J-60
2025-11-24 19:02:42,817 - __main__ - INFO -    Colonnes Ds utilis√©es: 31
2025-11-24 19:02:43,605 - __main__ - INFO - Features Ds ajout√©es: (1415, 267)
2025-11-24 19:02:43,606 - __main__ - INFO - Chargement des prix concurrents depuis ../data/D09/rateShopper.csv...
2025-11-24 19:02:43,724 - __main__ - INFO - Prix concurrents charg√©s: (175820, 7)
2025-11-24 19:02:43,724 - __main__ - INFO - Pr√©paration des features concurrentes (prix m√©dian)...
2025-11-24 19:02:43,875 - __main__ - INFO -    Features concurrentes calcul√©es sur J-30 √† J-60
2025-11-24 19:02:44,662 - __main__ - INFO - Features concurrentes ajout√©es (6 features). Shape: (1415, 273)
2025-11-24 19:02:44,665 - __main__ - INFO - Ajout de ToF1 (TO final ann√©e N-1)...
2025-11-24 19:02:44,672 - __main__ - INFO -    ToF1 ajout√© : 1050 valeurs non-nulles sur 1416
2025-11-24 19:02:44,673 - __main__ - INFO - Ajout des features jours f√©ri√©s...
2025-11-24 19:02:45,145 - __main__ - INFO - Ajout des vacances scolaires...
2025-11-24 19:02:45,240 - __main__ - INFO - Ajout des weekends prolong√©s...
2025-11-24 19:02:45,253 - __main__ - INFO - Features jours f√©ri√©s et vacances ajout√©es. Shape: (1416, 282)
2025-11-24 19:02:45,254 - __main__ - INFO -    - Jours f√©ri√©s: 43 (3.04%)
2025-11-24 19:02:45,254 - __main__ - INFO -    - Jours de pont: 85 (6.00%)
2025-11-24 19:02:45,256 - __main__ - INFO -    - Distance au f√©ri√©: min=0, max=90, moyenne=30.3
2025-11-24 19:02:45,256 - __main__ - INFO -    - Vacances scolaires: 591 (41.74%)
2025-11-24 19:02:45,256 - __main__ - INFO -    - Weekends 3j: 57 (4.03%)
2025-11-24 19:02:45,257 - __main__ - INFO -    - Weekends 4j: 101 (7.13%)
2025-11-24 19:02:45,263 - __main__ - INFO - Cr√©ation des features et target...
2025-11-24 19:02:45,264 - __main__ - INFO - --------------------------------
2025-11-24 19:02:45,264 - __main__ - INFO - Horizon: 30
2025-11-24 19:02:45,264 - __main__ - INFO - --------------------------------
2025-11-24 19:02:45,265 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'comp_trend_changes', 'month', 'dayofweek', 'ToF1', 'is_holiday_fr',
       'is_bridge_day', 'days_to_holiday', 'is_vacances_scolaires',
       'is_long_weekend_3j', 'is_long_weekend_4j'],
      dtype='object', length=282)
2025-11-24 19:02:45,266 - __main__ - INFO - nb_observations recalcul√© pour horizon=30
2025-11-24 19:02:45,267 - __main__ - INFO -    Minimum: 31
2025-11-24 19:02:45,267 - __main__ - INFO -    Maximum: 31
2025-11-24 19:02:45,267 - __main__ - INFO -    Moyenne: 31.0
2025-11-24 19:02:45,268 - __main__ - INFO - Nombre total de features: 66
2025-11-24 19:02:45,268 - __main__ - INFO -    - TO historiques: 30
2025-11-24 19:02:45,268 - __main__ - INFO -    - Features PM: 7
2025-11-24 19:02:45,268 - __main__ - INFO -    - Features Ant (anticipation): 6
2025-11-24 19:02:45,268 - __main__ - INFO -    - Features Ds (dur√©e s√©jour): 6
2025-11-24 19:02:45,268 - __main__ - INFO -    - Features concurrents: 6
2025-11-24 19:02:45,268 - __main__ - INFO -    - Autres features: 11
2025-11-24 19:02:45,348 - __main__ - INFO - üíæ Donn√©es d'entra√Ænement sauvegard√©es: results/D09\training_data_before_scaling.csv
2025-11-24 19:02:45,348 - __main__ - INFO -    Shape: (1327, 69)
2025-11-24 19:02:45,348 - __main__ - INFO -    Colonnes: stay_date, hotCode, 66 features, J-0
2025-11-24 19:02:45,349 - __main__ - INFO - X shape: (1327, 66), y shape: (1327,)
2025-11-24 19:02:45,349 - __main__ - INFO - ================================================================================
2025-11-24 19:02:45,349 - __main__ - INFO - RECHERCHE D'HYPERPARAM√àTRES (RANDOMIZED SEARCH)
2025-11-24 19:02:45,349 - __main__ - INFO - ================================================================================
2025-11-24 19:02:45,353 - __main__ - INFO - Train: (1061, 66), Validation: (266, 66)
2025-11-24 19:02:45,353 - __main__ - INFO - Configuration de la recherche:
2025-11-24 19:02:45,353 - __main__ - INFO -    - Nombre d'it√©rations: 30
2025-11-24 19:02:45,353 - __main__ - INFO -    - Cross-validation: 3 folds
2025-11-24 19:02:45,353 - __main__ - INFO -    - Nombre total d'entra√Ænements: 90
2025-11-24 19:02:45,353 - __main__ - INFO -    - M√©trique: neg_mean_absolute_error
2025-11-24 19:02:45,353 - __main__ - INFO - 
D√©marrage de la recherche d'hyperparam√®tres...
2025-11-24 19:04:08,699 - __main__ - INFO - ================================================================================
2025-11-24 19:04:08,700 - __main__ - INFO - R√âSULTATS DE LA RECHERCHE
2025-11-24 19:04:08,701 - __main__ - INFO - ================================================================================
2025-11-24 19:04:08,702 - __main__ - INFO - Meilleur score (MAE sur CV): 0.0912
2025-11-24 19:04:08,702 - __main__ - INFO - Meilleurs param√®tres trouv√©s:
2025-11-24 19:04:08,703 - __main__ - INFO -    - subsample: 0.9
2025-11-24 19:04:08,703 - __main__ - INFO -    - reg_lambda: 0.5
2025-11-24 19:04:08,704 - __main__ - INFO -    - reg_alpha: 0.1
2025-11-24 19:04:08,709 - __main__ - INFO -    - n_estimators: 800
2025-11-24 19:04:08,712 - __main__ - INFO -    - min_child_weight: 3
2025-11-24 19:04:08,714 - __main__ - INFO -    - max_depth: 6
2025-11-24 19:04:08,715 - __main__ - INFO -    - learning_rate: 0.01
2025-11-24 19:04:08,715 - __main__ - INFO -    - colsample_bytree: 0.85
2025-11-24 19:04:08,722 - __main__ - INFO - 
Performances sur validation:
2025-11-24 19:04:08,722 - __main__ - INFO -    - MAE: 0.0825
2025-11-24 19:04:08,723 - __main__ - INFO -    - R¬≤: 0.5796
2025-11-24 19:04:08,724 - __main__ - INFO - ================================================================================
2025-11-24 19:04:08,725 - __main__ - INFO - 
üîß Mise √† jour de la configuration avec les meilleurs param√®tres...
2025-11-24 19:04:08,725 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-24 19:04:08,733 - __main__ - INFO - Train: (1061, 66), Test: (266, 66)
2025-11-24 19:04:12,240 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-24 19:04:12,256 - __main__ - INFO - üìä Test MAE: 0.0825
2025-11-24 19:04:12,256 - __main__ - INFO - üìä Test R¬≤: 0.5796
2025-11-24 19:04:12,256 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-24 19:04:12,778 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-24 19:04:13,150 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-24 19:04:13,175 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/D09/models...
2025-11-24 19:04:13,229 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/D09/models\xgb_to_predictor.joblib
2025-11-24 19:04:13,229 - __main__ - INFO - üíæ Scaler sauvegard√©: results/D09/models\xgb_scaler.joblib
2025-11-24 19:04:13,230 - __main__ - INFO - üíæ Features sauvegard√©es: results/D09/models\feature_columns.txt
2025-11-24 19:04:18,518 - __main__ - INFO - ================================================================================
2025-11-24 19:04:18,519 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-24 19:04:18,519 - __main__ - INFO - ================================================================================
2025-11-24 19:04:18,519 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-24 19:04:18,519 - __main__ - INFO -    Train MAE: 0.0220
2025-11-24 19:04:18,519 - __main__ - INFO -    Train R¬≤:  0.9743
2025-11-24 19:04:18,519 - __main__ - INFO -    Test MAE:  0.0825
2025-11-24 19:04:18,520 - __main__ - INFO -    Test R¬≤:   0.5796
2025-11-25 09:34:12,083 - __main__ - INFO - ================================================================================
2025-11-25 09:34:12,083 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-25 09:34:12,084 - __main__ - INFO - ================================================================================
2025-11-25 09:34:12,084 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-25 09:34:12,088 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-25 09:34:12,089 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-25 09:34:12,089 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'rateShopper_path': '../data/D09/rateShopper.csv', 'prediction_horizon': 30, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models', 'hyperparam_search': {'n_iter': 30, 'cv_folds': 3}}
2025-11-25 09:34:12,089 - __main__ - INFO - Chargement des donn√©es...
2025-11-25 09:34:12,124 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-25 09:34:12,213 - __main__ - INFO - Indicateurs charg√©s: (86803, 17)
2025-11-25 09:34:12,213 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-25 09:34:12,272 - __main__ - INFO - PM pivot shape: (1423, 63)
2025-11-25 09:34:12,291 - __main__ - INFO - Ant pivot shape: (1423, 63)
2025-11-25 09:34:12,311 - __main__ - INFO - Ds pivot shape: (1423, 63)
2025-11-25 09:34:12,322 - __main__ - INFO - DataFrame fusionn√©: (1415, 248)
2025-11-25 09:34:12,322 - __main__ - INFO - Calcul des features PM sur donn√©es J-30 √† J-60 (pas de data leakage)
2025-11-25 09:34:12,323 - __main__ - INFO -    Colonnes PM utilis√©es: 31
2025-11-25 09:34:13,526 - __main__ - INFO - Features PM ajout√©es: (1415, 255)
2025-11-25 09:34:13,526 - __main__ - INFO - Calcul des features Ant (anticipation) sur donn√©es J-30 √† J-60
2025-11-25 09:34:13,526 - __main__ - INFO -    Colonnes Ant utilis√©es: 31
2025-11-25 09:34:14,386 - __main__ - INFO - Features Ant ajout√©es: (1415, 261)
2025-11-25 09:34:14,387 - __main__ - INFO - Calcul des features Ds (dur√©e s√©jour) sur donn√©es J-30 √† J-60
2025-11-25 09:34:14,387 - __main__ - INFO -    Colonnes Ds utilis√©es: 31
2025-11-25 09:34:15,260 - __main__ - INFO - Features Ds ajout√©es: (1415, 267)
2025-11-25 09:34:15,261 - __main__ - INFO - Chargement des prix concurrents depuis ../data/D09/rateShopper.csv...
2025-11-25 09:34:15,404 - __main__ - INFO - Prix concurrents charg√©s: (175820, 7)
2025-11-25 09:34:15,405 - __main__ - INFO - Pr√©paration des features concurrentes (prix m√©dian)...
2025-11-25 09:34:15,580 - __main__ - INFO -    Features concurrentes calcul√©es sur J-30 √† J-60
2025-11-25 09:34:17,055 - __main__ - INFO - Features concurrentes ajout√©es (6 features). Shape: (1415, 273)
2025-11-25 09:34:17,057 - __main__ - INFO - Calcul des features Gap et Elasticity (PM vs Concurrents)...
2025-11-25 09:34:17,058 - __main__ - WARNING - ‚ö†Ô∏è  Pas de colonnes PM ou Comp disponibles pour Gap/Elasticity
2025-11-25 09:34:17,061 - __main__ - INFO - Ajout de ToF1 (TO final ann√©e N-1)...
2025-11-25 09:34:17,072 - __main__ - INFO -    ToF1 ajout√© : 1050 valeurs non-nulles sur 1416
2025-11-25 09:34:17,072 - __main__ - INFO - Ajout des features jours f√©ri√©s...
2025-11-25 09:34:18,516 - __main__ - INFO - Ajout des vacances scolaires...
2025-11-25 09:34:18,678 - __main__ - INFO - Ajout des weekends prolong√©s...
2025-11-25 09:34:18,710 - __main__ - INFO - Features jours f√©ri√©s et vacances ajout√©es. Shape: (1416, 286)
2025-11-25 09:34:18,710 - __main__ - INFO -    - Jours f√©ri√©s: 43 (3.04%)
2025-11-25 09:34:18,711 - __main__ - INFO -    - Jours de pont: 85 (6.00%)
2025-11-25 09:34:18,712 - __main__ - INFO -    - Distance au f√©ri√©: min=0, max=90, moyenne=30.3
2025-11-25 09:34:18,712 - __main__ - INFO -    - Vacances scolaires: 591 (41.74%)
2025-11-25 09:34:18,713 - __main__ - INFO -    - Weekends 3j: 57 (4.03%)
2025-11-25 09:34:18,713 - __main__ - INFO -    - Weekends 4j: 101 (7.13%)
2025-11-25 09:34:18,723 - __main__ - INFO - Cr√©ation des features et target...
2025-11-25 09:34:18,723 - __main__ - INFO - --------------------------------
2025-11-25 09:34:18,724 - __main__ - INFO - Horizon: 30
2025-11-25 09:34:18,724 - __main__ - INFO - --------------------------------
2025-11-25 09:34:18,725 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'elasticity_slope', 'month', 'dayofweek', 'ToF1', 'is_holiday_fr',
       'is_bridge_day', 'days_to_holiday', 'is_vacances_scolaires',
       'is_long_weekend_3j', 'is_long_weekend_4j'],
      dtype='object', length=286)
2025-11-25 09:34:18,727 - __main__ - INFO - nb_observations recalcul√© pour horizon=30
2025-11-25 09:34:18,727 - __main__ - INFO -    Minimum: 31
2025-11-25 09:34:18,727 - __main__ - INFO -    Maximum: 31
2025-11-25 09:34:18,728 - __main__ - INFO -    Moyenne: 31.0
2025-11-25 09:34:18,728 - __main__ - INFO - Nombre total de features: 70
2025-11-25 09:34:18,728 - __main__ - INFO -    - TO historiques: 30
2025-11-25 09:34:18,728 - __main__ - INFO -    - Features PM: 7
2025-11-25 09:34:18,728 - __main__ - INFO -    - Features Ant (anticipation): 6
2025-11-25 09:34:18,729 - __main__ - INFO -    - Features Ds (dur√©e s√©jour): 6
2025-11-25 09:34:18,729 - __main__ - INFO -    - Features concurrents: 6
2025-11-25 09:34:18,729 - __main__ - INFO -    - Features Gap/Elasticity: 4
2025-11-25 09:34:18,729 - __main__ - INFO -    - Autres features: 11
2025-11-25 09:34:18,859 - __main__ - INFO - üíæ Donn√©es d'entra√Ænement sauvegard√©es: results/D09\training_data_before_scaling.csv
2025-11-25 09:34:18,860 - __main__ - INFO -    Shape: (1327, 73)
2025-11-25 09:34:18,860 - __main__ - INFO -    Colonnes: stay_date, hotCode, 70 features, J-0
2025-11-25 09:34:18,860 - __main__ - INFO - X shape: (1327, 70), y shape: (1327,)
2025-11-25 09:34:18,861 - __main__ - INFO - ================================================================================
2025-11-25 09:34:18,861 - __main__ - INFO - RECHERCHE D'HYPERPARAM√àTRES (RANDOMIZED SEARCH)
2025-11-25 09:34:18,861 - __main__ - INFO - ================================================================================
2025-11-25 09:34:18,866 - __main__ - INFO - Train: (1061, 70), Validation: (266, 70)
2025-11-25 09:34:18,867 - __main__ - INFO - Configuration de la recherche:
2025-11-25 09:34:18,867 - __main__ - INFO -    - Nombre d'it√©rations: 30
2025-11-25 09:34:18,867 - __main__ - INFO -    - Cross-validation: 3 folds
2025-11-25 09:34:18,867 - __main__ - INFO -    - Nombre total d'entra√Ænements: 90
2025-11-25 09:34:18,867 - __main__ - INFO -    - M√©trique: neg_mean_absolute_error
2025-11-25 09:34:18,868 - __main__ - INFO - 
D√©marrage de la recherche d'hyperparam√®tres...
2025-11-25 09:35:49,963 - __main__ - INFO - ================================================================================
2025-11-25 09:35:49,963 - __main__ - INFO - R√âSULTATS DE LA RECHERCHE
2025-11-25 09:35:49,964 - __main__ - INFO - ================================================================================
2025-11-25 09:35:49,965 - __main__ - INFO - Meilleur score (MAE sur CV): 0.0903
2025-11-25 09:35:49,965 - __main__ - INFO - Meilleurs param√®tres trouv√©s:
2025-11-25 09:35:49,966 - __main__ - INFO -    - subsample: 0.95
2025-11-25 09:35:49,966 - __main__ - INFO -    - reg_lambda: 1.0
2025-11-25 09:35:49,966 - __main__ - INFO -    - reg_alpha: 0
2025-11-25 09:35:49,966 - __main__ - INFO -    - n_estimators: 500
2025-11-25 09:35:49,967 - __main__ - INFO -    - min_child_weight: 3
2025-11-25 09:35:49,967 - __main__ - INFO -    - max_depth: 5
2025-11-25 09:35:49,967 - __main__ - INFO -    - learning_rate: 0.05
2025-11-25 09:35:49,967 - __main__ - INFO -    - colsample_bytree: 0.95
2025-11-25 09:35:49,973 - __main__ - INFO - 
Performances sur validation:
2025-11-25 09:35:49,973 - __main__ - INFO -    - MAE: 0.0804
2025-11-25 09:35:49,974 - __main__ - INFO -    - R¬≤: 0.5918
2025-11-25 09:35:49,974 - __main__ - INFO - ================================================================================
2025-11-25 09:35:49,975 - __main__ - INFO - 
üîß Mise √† jour de la configuration avec les meilleurs param√®tres...
2025-11-25 09:35:49,975 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-25 09:35:49,984 - __main__ - INFO - Train: (1061, 70), Test: (266, 70)
2025-11-25 09:35:51,488 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-25 09:35:51,504 - __main__ - INFO - üìä Test MAE: 0.0804
2025-11-25 09:35:51,505 - __main__ - INFO - üìä Test R¬≤: 0.5918
2025-11-25 09:35:51,505 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-25 09:35:52,673 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-25 09:35:53,225 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-25 09:35:53,249 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/D09/models...
2025-11-25 09:35:53,288 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/D09/models\xgb_to_predictor.joblib
2025-11-25 09:35:53,288 - __main__ - INFO - üíæ Scaler sauvegard√©: results/D09/models\xgb_scaler.joblib
2025-11-25 09:35:53,288 - __main__ - INFO - üíæ Features sauvegard√©es: results/D09/models\feature_columns.txt
2025-11-25 09:35:54,302 - __main__ - INFO - ================================================================================
2025-11-25 09:35:54,302 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-25 09:35:54,302 - __main__ - INFO - ================================================================================
2025-11-25 09:35:54,303 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-25 09:35:54,303 - __main__ - INFO -    Train MAE: 0.0074
2025-11-25 09:35:54,303 - __main__ - INFO -    Train R¬≤:  0.9969
2025-11-25 09:35:54,303 - __main__ - INFO -    Test MAE:  0.0804
2025-11-25 09:35:54,304 - __main__ - INFO -    Test R¬≤:   0.5918
2025-11-25 10:29:14,636 - __main__ - INFO - ================================================================================
2025-11-25 10:29:14,637 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-25 10:29:14,637 - __main__ - INFO - ================================================================================
2025-11-25 10:29:14,637 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-25 10:29:14,641 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-25 10:29:14,641 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-25 10:29:14,641 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'rateShopper_path': '../data/D09/rateShopper.csv', 'prediction_horizon': 30, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models', 'hyperparam_search': {'n_iter': 30, 'cv_folds': 3}}
2025-11-25 10:29:14,642 - __main__ - INFO - Chargement des donn√©es...
2025-11-25 10:29:14,664 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-25 10:29:14,781 - __main__ - INFO - Indicateurs charg√©s: (86803, 17)
2025-11-25 10:29:14,781 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-25 10:29:14,855 - __main__ - INFO - PM pivot shape: (1423, 63)
2025-11-25 10:29:14,890 - __main__ - INFO - Ant pivot shape: (1423, 63)
2025-11-25 10:29:14,926 - __main__ - INFO - Ds pivot shape: (1423, 63)
2025-11-25 10:29:14,939 - __main__ - INFO - DataFrame fusionn√©: (1415, 248)
2025-11-25 10:29:14,940 - __main__ - INFO - Calcul des features PM sur donn√©es J-30 √† J-60 (pas de data leakage)
2025-11-25 10:29:14,940 - __main__ - INFO -    Colonnes PM utilis√©es: 31
2025-11-25 10:29:16,850 - __main__ - INFO - Features PM ajout√©es: (1415, 255)
2025-11-25 10:29:16,850 - __main__ - INFO - Calcul des features Ant (anticipation) sur donn√©es J-30 √† J-60
2025-11-25 10:29:16,850 - __main__ - INFO -    Colonnes Ant utilis√©es: 31
2025-11-25 10:29:18,085 - __main__ - INFO - Features Ant ajout√©es: (1415, 261)
2025-11-25 10:29:18,085 - __main__ - INFO - Calcul des features Ds (dur√©e s√©jour) sur donn√©es J-30 √† J-60
2025-11-25 10:29:18,086 - __main__ - INFO -    Colonnes Ds utilis√©es: 31
2025-11-25 10:29:19,328 - __main__ - INFO - Features Ds ajout√©es: (1415, 267)
2025-11-25 10:29:19,329 - __main__ - INFO - Chargement des prix concurrents depuis ../data/D09/rateShopper.csv...
2025-11-25 10:29:19,469 - __main__ - INFO - Prix concurrents charg√©s: (175820, 7)
2025-11-25 10:29:19,469 - __main__ - INFO - Pr√©paration des features concurrentes (prix m√©dian)...
2025-11-25 10:29:19,668 - __main__ - INFO -    Features concurrentes calcul√©es sur J-30 √† J-60
2025-11-25 10:29:19,683 - __main__ - INFO - Construction des s√©ries Gap et Elasticity...
2025-11-25 10:29:22,494 - __main__ - INFO - Features concurrentes + Gap/Elasticity ajout√©es (10 features). Shape: (1415, 277)
2025-11-25 10:29:22,500 - __main__ - INFO - Ajout de ToF1 (TO final ann√©e N-1)...
2025-11-25 10:29:22,508 - __main__ - INFO -    ToF1 ajout√© : 1050 valeurs non-nulles sur 1416
2025-11-25 10:29:22,508 - __main__ - INFO - Ajout des features jours f√©ri√©s...
2025-11-25 10:29:23,636 - __main__ - INFO - Ajout des vacances scolaires...
2025-11-25 10:29:23,791 - __main__ - INFO - Ajout des weekends prolong√©s...
2025-11-25 10:29:23,819 - __main__ - INFO - Features jours f√©ri√©s et vacances ajout√©es. Shape: (1416, 286)
2025-11-25 10:29:23,819 - __main__ - INFO -    - Jours f√©ri√©s: 43 (3.04%)
2025-11-25 10:29:23,820 - __main__ - INFO -    - Jours de pont: 85 (6.00%)
2025-11-25 10:29:23,820 - __main__ - INFO -    - Distance au f√©ri√©: min=0, max=90, moyenne=30.3
2025-11-25 10:29:23,821 - __main__ - INFO -    - Vacances scolaires: 591 (41.74%)
2025-11-25 10:29:23,821 - __main__ - INFO -    - Weekends 3j: 57 (4.03%)
2025-11-25 10:29:23,821 - __main__ - INFO -    - Weekends 4j: 101 (7.13%)
2025-11-25 10:29:23,829 - __main__ - INFO - Cr√©ation des features et target...
2025-11-25 10:29:23,830 - __main__ - INFO - --------------------------------
2025-11-25 10:29:23,830 - __main__ - INFO - Horizon: 30
2025-11-25 10:29:23,830 - __main__ - INFO - --------------------------------
2025-11-25 10:29:23,831 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'comp_trend_changes', 'month', 'dayofweek', 'ToF1', 'is_holiday_fr',
       'is_bridge_day', 'days_to_holiday', 'is_vacances_scolaires',
       'is_long_weekend_3j', 'is_long_weekend_4j'],
      dtype='object', length=286)
2025-11-25 10:29:23,832 - __main__ - INFO - nb_observations recalcul√© pour horizon=30
2025-11-25 10:29:23,833 - __main__ - INFO -    Minimum: 31
2025-11-25 10:29:23,833 - __main__ - INFO -    Maximum: 31
2025-11-25 10:29:23,833 - __main__ - INFO -    Moyenne: 31.0
2025-11-25 10:29:23,833 - __main__ - INFO - Nombre total de features: 70
2025-11-25 10:29:23,833 - __main__ - INFO -    - TO historiques: 30
2025-11-25 10:29:23,834 - __main__ - INFO -    - Features PM: 7
2025-11-25 10:29:23,834 - __main__ - INFO -    - Features Ant (anticipation): 6
2025-11-25 10:29:23,834 - __main__ - INFO -    - Features Ds (dur√©e s√©jour): 6
2025-11-25 10:29:23,834 - __main__ - INFO -    - Features concurrents: 6
2025-11-25 10:29:23,834 - __main__ - INFO -    - Features Gap/Elasticity: 4
2025-11-25 10:29:23,835 - __main__ - INFO -    - Autres features: 11
2025-11-25 10:29:23,940 - __main__ - INFO - üíæ Donn√©es d'entra√Ænement sauvegard√©es: results/D09\training_data_before_scaling.csv
2025-11-25 10:29:23,941 - __main__ - INFO -    Shape: (1416, 73)
2025-11-25 10:29:23,941 - __main__ - INFO -    Colonnes: stay_date, hotCode, 70 features, J-0
2025-11-25 10:29:23,941 - __main__ - INFO - X shape: (1416, 70), y shape: (1416,)
2025-11-25 10:29:23,941 - __main__ - INFO - ================================================================================
2025-11-25 10:29:23,942 - __main__ - INFO - RECHERCHE D'HYPERPARAM√àTRES (RANDOMIZED SEARCH)
2025-11-25 10:29:23,942 - __main__ - INFO - ================================================================================
2025-11-25 10:29:23,947 - __main__ - INFO - Train: (1132, 70), Validation: (284, 70)
2025-11-25 10:29:23,947 - __main__ - INFO - Configuration de la recherche:
2025-11-25 10:29:23,947 - __main__ - INFO -    - Nombre d'it√©rations: 30
2025-11-25 10:29:23,948 - __main__ - INFO -    - Cross-validation: 3 folds
2025-11-25 10:29:23,948 - __main__ - INFO -    - Nombre total d'entra√Ænements: 90
2025-11-25 10:29:23,948 - __main__ - INFO -    - M√©trique: neg_mean_absolute_error
2025-11-25 10:29:23,948 - __main__ - INFO - 
D√©marrage de la recherche d'hyperparam√®tres...
2025-11-25 10:31:16,288 - __main__ - INFO - ================================================================================
2025-11-25 10:31:16,289 - __main__ - INFO - R√âSULTATS DE LA RECHERCHE
2025-11-25 10:31:16,289 - __main__ - INFO - ================================================================================
2025-11-25 10:31:16,289 - __main__ - INFO - Meilleur score (MAE sur CV): 0.0892
2025-11-25 10:31:16,290 - __main__ - INFO - Meilleurs param√®tres trouv√©s:
2025-11-25 10:31:16,290 - __main__ - INFO -    - subsample: 0.95
2025-11-25 10:31:16,290 - __main__ - INFO -    - reg_lambda: 1.0
2025-11-25 10:31:16,291 - __main__ - INFO -    - reg_alpha: 0
2025-11-25 10:31:16,291 - __main__ - INFO -    - n_estimators: 500
2025-11-25 10:31:16,291 - __main__ - INFO -    - min_child_weight: 3
2025-11-25 10:31:16,292 - __main__ - INFO -    - max_depth: 5
2025-11-25 10:31:16,292 - __main__ - INFO -    - learning_rate: 0.05
2025-11-25 10:31:16,292 - __main__ - INFO -    - colsample_bytree: 0.95
2025-11-25 10:31:16,379 - __main__ - INFO - 
Performances sur validation:
2025-11-25 10:31:16,380 - __main__ - INFO -    - MAE: 0.0829
2025-11-25 10:31:16,381 - __main__ - INFO -    - R¬≤: 0.6153
2025-11-25 10:31:16,382 - __main__ - INFO - ================================================================================
2025-11-25 10:31:16,383 - __main__ - INFO - 
üîß Mise √† jour de la configuration avec les meilleurs param√®tres...
2025-11-25 10:31:16,383 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-25 10:31:16,398 - __main__ - INFO - Train: (1132, 70), Test: (284, 70)
2025-11-25 10:31:18,262 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-25 10:31:18,318 - __main__ - INFO - üìä Test MAE: 0.0829
2025-11-25 10:31:18,318 - __main__ - INFO - üìä Test R¬≤: 0.6153
2025-11-25 10:31:18,319 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-25 10:31:19,305 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-25 10:31:19,890 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-25 10:31:19,920 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/D09/models...
2025-11-25 10:31:19,954 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/D09/models\xgb_to_predictor.joblib
2025-11-25 10:31:19,955 - __main__ - INFO - üíæ Scaler sauvegard√©: results/D09/models\xgb_scaler.joblib
2025-11-25 10:31:19,955 - __main__ - INFO - üíæ Features sauvegard√©es: results/D09/models\feature_columns.txt
2025-11-25 10:31:21,898 - __main__ - INFO - ================================================================================
2025-11-25 10:31:21,898 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-25 10:31:21,899 - __main__ - INFO - ================================================================================
2025-11-25 10:31:21,899 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-25 10:31:21,899 - __main__ - INFO -    Train MAE: 0.0080
2025-11-25 10:31:21,899 - __main__ - INFO -    Train R¬≤:  0.9962
2025-11-25 10:31:21,900 - __main__ - INFO -    Test MAE:  0.0829
2025-11-25 10:31:21,900 - __main__ - INFO -    Test R¬≤:   0.6153
2025-11-25 10:32:55,793 - __main__ - INFO - ================================================================================
2025-11-25 10:32:55,794 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-25 10:32:55,794 - __main__ - INFO - ================================================================================
2025-11-25 10:32:55,794 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-25 10:32:55,798 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-25 10:32:55,798 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-25 10:32:55,798 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'rateShopper_path': '../data/D09/rateShopper.csv', 'prediction_horizon': 7, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models', 'hyperparam_search': {'n_iter': 30, 'cv_folds': 3}}
2025-11-25 10:32:55,798 - __main__ - INFO - Chargement des donn√©es...
2025-11-25 10:32:55,814 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-25 10:32:55,911 - __main__ - INFO - Indicateurs charg√©s: (86803, 17)
2025-11-25 10:32:55,911 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-25 10:32:55,967 - __main__ - INFO - PM pivot shape: (1423, 63)
2025-11-25 10:32:55,989 - __main__ - INFO - Ant pivot shape: (1423, 63)
2025-11-25 10:32:56,011 - __main__ - INFO - Ds pivot shape: (1423, 63)
2025-11-25 10:32:56,020 - __main__ - INFO - DataFrame fusionn√©: (1415, 248)
2025-11-25 10:32:56,021 - __main__ - INFO - Calcul des features PM sur donn√©es J-7 √† J-60 (pas de data leakage)
2025-11-25 10:32:56,021 - __main__ - INFO -    Colonnes PM utilis√©es: 54
2025-11-25 10:32:57,256 - __main__ - INFO - Features PM ajout√©es: (1415, 255)
2025-11-25 10:32:57,257 - __main__ - INFO - Calcul des features Ant (anticipation) sur donn√©es J-7 √† J-60
2025-11-25 10:32:57,257 - __main__ - INFO -    Colonnes Ant utilis√©es: 54
2025-11-25 10:32:58,085 - __main__ - INFO - Features Ant ajout√©es: (1415, 261)
2025-11-25 10:32:58,085 - __main__ - INFO - Calcul des features Ds (dur√©e s√©jour) sur donn√©es J-7 √† J-60
2025-11-25 10:32:58,085 - __main__ - INFO -    Colonnes Ds utilis√©es: 54
2025-11-25 10:32:58,890 - __main__ - INFO - Features Ds ajout√©es: (1415, 267)
2025-11-25 10:32:58,890 - __main__ - INFO - Chargement des prix concurrents depuis ../data/D09/rateShopper.csv...
2025-11-25 10:32:59,018 - __main__ - INFO - Prix concurrents charg√©s: (175820, 7)
2025-11-25 10:32:59,018 - __main__ - INFO - Pr√©paration des features concurrentes (prix m√©dian)...
2025-11-25 10:32:59,180 - __main__ - INFO -    Features concurrentes calcul√©es sur J-7 √† J-60
2025-11-25 10:32:59,192 - __main__ - INFO - Construction des s√©ries Gap et Elasticity...
2025-11-25 10:33:01,223 - __main__ - INFO - Features concurrentes + Gap/Elasticity ajout√©es (10 features). Shape: (1415, 277)
2025-11-25 10:33:01,227 - __main__ - INFO - Ajout de ToF1 (TO final ann√©e N-1)...
2025-11-25 10:33:01,234 - __main__ - INFO -    ToF1 ajout√© : 1050 valeurs non-nulles sur 1416
2025-11-25 10:33:01,235 - __main__ - INFO - Ajout des features jours f√©ri√©s...
2025-11-25 10:33:01,621 - __main__ - INFO - Ajout des vacances scolaires...
2025-11-25 10:33:01,717 - __main__ - INFO - Ajout des weekends prolong√©s...
2025-11-25 10:33:01,733 - __main__ - INFO - Features jours f√©ri√©s et vacances ajout√©es. Shape: (1416, 286)
2025-11-25 10:33:01,734 - __main__ - INFO -    - Jours f√©ri√©s: 43 (3.04%)
2025-11-25 10:33:01,734 - __main__ - INFO -    - Jours de pont: 85 (6.00%)
2025-11-25 10:33:01,734 - __main__ - INFO -    - Distance au f√©ri√©: min=0, max=90, moyenne=30.3
2025-11-25 10:33:01,735 - __main__ - INFO -    - Vacances scolaires: 591 (41.74%)
2025-11-25 10:33:01,735 - __main__ - INFO -    - Weekends 3j: 57 (4.03%)
2025-11-25 10:33:01,735 - __main__ - INFO -    - Weekends 4j: 101 (7.13%)
2025-11-25 10:33:01,744 - __main__ - INFO - Cr√©ation des features et target...
2025-11-25 10:33:01,744 - __main__ - INFO - --------------------------------
2025-11-25 10:33:01,744 - __main__ - INFO - Horizon: 7
2025-11-25 10:33:01,745 - __main__ - INFO - --------------------------------
2025-11-25 10:33:01,745 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'comp_trend_changes', 'month', 'dayofweek', 'ToF1', 'is_holiday_fr',
       'is_bridge_day', 'days_to_holiday', 'is_vacances_scolaires',
       'is_long_weekend_3j', 'is_long_weekend_4j'],
      dtype='object', length=286)
2025-11-25 10:33:01,747 - __main__ - INFO - nb_observations recalcul√© pour horizon=7
2025-11-25 10:33:01,747 - __main__ - INFO -    Minimum: 54
2025-11-25 10:33:01,747 - __main__ - INFO -    Maximum: 54
2025-11-25 10:33:01,747 - __main__ - INFO -    Moyenne: 54.0
2025-11-25 10:33:01,748 - __main__ - INFO - Nombre total de features: 93
2025-11-25 10:33:01,748 - __main__ - INFO -    - TO historiques: 53
2025-11-25 10:33:01,748 - __main__ - INFO -    - Features PM: 7
2025-11-25 10:33:01,748 - __main__ - INFO -    - Features Ant (anticipation): 6
2025-11-25 10:33:01,749 - __main__ - INFO -    - Features Ds (dur√©e s√©jour): 6
2025-11-25 10:33:01,749 - __main__ - INFO -    - Features concurrents: 6
2025-11-25 10:33:01,749 - __main__ - INFO -    - Features Gap/Elasticity: 4
2025-11-25 10:33:01,749 - __main__ - INFO -    - Autres features: 11
2025-11-25 10:33:01,759 - __main__ - WARNING - ‚ö†Ô∏è  Erreur lors de la sauvegarde des donn√©es d'entra√Ænement: [Errno 13] Permission denied: 'results/D09\\training_data_before_scaling.csv'
2025-11-25 10:33:01,760 - __main__ - INFO - X shape: (1416, 93), y shape: (1416,)
2025-11-25 10:33:01,760 - __main__ - INFO - ================================================================================
2025-11-25 10:33:01,760 - __main__ - INFO - RECHERCHE D'HYPERPARAM√àTRES (RANDOMIZED SEARCH)
2025-11-25 10:33:01,760 - __main__ - INFO - ================================================================================
2025-11-25 10:33:01,765 - __main__ - INFO - Train: (1132, 93), Validation: (284, 93)
2025-11-25 10:33:01,766 - __main__ - INFO - Configuration de la recherche:
2025-11-25 10:33:01,766 - __main__ - INFO -    - Nombre d'it√©rations: 30
2025-11-25 10:33:01,766 - __main__ - INFO -    - Cross-validation: 3 folds
2025-11-25 10:33:01,766 - __main__ - INFO -    - Nombre total d'entra√Ænements: 90
2025-11-25 10:33:01,767 - __main__ - INFO -    - M√©trique: neg_mean_absolute_error
2025-11-25 10:33:01,767 - __main__ - INFO - 
D√©marrage de la recherche d'hyperparam√®tres...
2025-11-25 10:35:08,333 - __main__ - INFO - ================================================================================
2025-11-25 10:35:08,333 - __main__ - INFO - R√âSULTATS DE LA RECHERCHE
2025-11-25 10:35:08,334 - __main__ - INFO - ================================================================================
2025-11-25 10:35:08,334 - __main__ - INFO - Meilleur score (MAE sur CV): 0.0573
2025-11-25 10:35:08,334 - __main__ - INFO - Meilleurs param√®tres trouv√©s:
2025-11-25 10:35:08,335 - __main__ - INFO -    - subsample: 0.95
2025-11-25 10:35:08,335 - __main__ - INFO -    - reg_lambda: 1.0
2025-11-25 10:35:08,335 - __main__ - INFO -    - reg_alpha: 0
2025-11-25 10:35:08,335 - __main__ - INFO -    - n_estimators: 500
2025-11-25 10:35:08,336 - __main__ - INFO -    - min_child_weight: 3
2025-11-25 10:35:08,336 - __main__ - INFO -    - max_depth: 5
2025-11-25 10:35:08,336 - __main__ - INFO -    - learning_rate: 0.05
2025-11-25 10:35:08,336 - __main__ - INFO -    - colsample_bytree: 0.95
2025-11-25 10:35:08,343 - __main__ - INFO - 
Performances sur validation:
2025-11-25 10:35:08,343 - __main__ - INFO -    - MAE: 0.0525
2025-11-25 10:35:08,344 - __main__ - INFO -    - R¬≤: 0.8352
2025-11-25 10:35:08,345 - __main__ - INFO - ================================================================================
2025-11-25 10:35:08,346 - __main__ - INFO - 
üîß Mise √† jour de la configuration avec les meilleurs param√®tres...
2025-11-25 10:35:08,346 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-25 10:35:08,356 - __main__ - INFO - Train: (1132, 93), Test: (284, 93)
2025-11-25 10:35:10,953 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-25 10:35:10,966 - __main__ - INFO - üìä Test MAE: 0.0525
2025-11-25 10:35:10,966 - __main__ - INFO - üìä Test R¬≤: 0.8352
2025-11-25 10:35:10,967 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-25 10:35:11,537 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-25 10:35:11,928 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-25 10:35:11,946 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/D09/models...
2025-11-25 10:35:11,981 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/D09/models\xgb_to_predictor.joblib
2025-11-25 10:35:11,981 - __main__ - INFO - üíæ Scaler sauvegard√©: results/D09/models\xgb_scaler.joblib
2025-11-25 10:35:11,981 - __main__ - INFO - üíæ Features sauvegard√©es: results/D09/models\feature_columns.txt
2025-11-25 10:35:12,729 - __main__ - INFO - ================================================================================
2025-11-25 10:35:12,729 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-25 10:35:12,729 - __main__ - INFO - ================================================================================
2025-11-25 10:35:12,729 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-25 10:35:12,730 - __main__ - INFO -    Train MAE: 0.0047
2025-11-25 10:35:12,730 - __main__ - INFO -    Train R¬≤:  0.9987
2025-11-25 10:35:12,730 - __main__ - INFO -    Test MAE:  0.0525
2025-11-25 10:35:12,730 - __main__ - INFO -    Test R¬≤:   0.8352
2025-11-25 10:37:04,513 - __main__ - INFO - ================================================================================
2025-11-25 10:37:04,514 - __main__ - INFO - D√âBUT DE L'ENTRA√éNEMENT DU MOD√àLE XGBOOST
2025-11-25 10:37:04,514 - __main__ - INFO - ================================================================================
2025-11-25 10:37:04,514 - __main__ - INFO - ‚úÖ Fichier .env d√©tect√© et charg√©
2025-11-25 10:37:04,519 - __main__ - INFO - ‚úÖ Configuration charg√©e depuis config_predictTo.yaml
2025-11-25 10:37:04,520 - __main__ - INFO - Initialisation du XGBoostOccupancyPredictor
2025-11-25 10:37:04,520 - __main__ - INFO - Configuration: {'clustering_results_path': '../results/D09/clustering_results.csv', 'indicateurs_path': '../data/D09/Indicateurs.csv', 'rateShopper_path': '../data/D09/rateShopper.csv', 'prediction_horizon': 45, 'test_size': 0.2, 'random_state': 42, 'model_params': {'n_estimators': 600, 'learning_rate': 0.05, 'max_depth': 7, 'subsample': 0.9, 'colsample_bytree': 0.9, 'min_child_weight': 1, 'reg_lambda': 1.0, 'n_jobs': -1, 'random_state': 42}, 'azure_container': 'prediction-demande', 'save_to_azure': True, 'model_dir': 'results/D09/models', 'hyperparam_search': {'n_iter': 30, 'cv_folds': 3}}
2025-11-25 10:37:04,521 - __main__ - INFO - Chargement des donn√©es...
2025-11-25 10:37:04,545 - __main__ - INFO - Clusters charg√©s: (1415, 65)
2025-11-25 10:37:04,668 - __main__ - INFO - Indicateurs charg√©s: (86803, 17)
2025-11-25 10:37:04,668 - __main__ - INFO - Pr√©paration des donn√©es...
2025-11-25 10:37:04,740 - __main__ - INFO - PM pivot shape: (1423, 63)
2025-11-25 10:37:04,783 - __main__ - INFO - Ant pivot shape: (1423, 63)
2025-11-25 10:37:04,910 - __main__ - INFO - Ds pivot shape: (1423, 63)
2025-11-25 10:37:04,946 - __main__ - INFO - DataFrame fusionn√©: (1415, 248)
2025-11-25 10:37:04,954 - __main__ - INFO - Calcul des features PM sur donn√©es J-45 √† J-60 (pas de data leakage)
2025-11-25 10:37:04,955 - __main__ - INFO -    Colonnes PM utilis√©es: 16
2025-11-25 10:37:07,110 - __main__ - INFO - Features PM ajout√©es: (1415, 255)
2025-11-25 10:37:07,110 - __main__ - INFO - Calcul des features Ant (anticipation) sur donn√©es J-45 √† J-60
2025-11-25 10:37:07,110 - __main__ - INFO -    Colonnes Ant utilis√©es: 16
2025-11-25 10:37:08,061 - __main__ - INFO - Features Ant ajout√©es: (1415, 261)
2025-11-25 10:37:08,061 - __main__ - INFO - Calcul des features Ds (dur√©e s√©jour) sur donn√©es J-45 √† J-60
2025-11-25 10:37:08,061 - __main__ - INFO -    Colonnes Ds utilis√©es: 16
2025-11-25 10:37:08,867 - __main__ - INFO - Features Ds ajout√©es: (1415, 267)
2025-11-25 10:37:08,867 - __main__ - INFO - Chargement des prix concurrents depuis ../data/D09/rateShopper.csv...
2025-11-25 10:37:08,988 - __main__ - INFO - Prix concurrents charg√©s: (175820, 7)
2025-11-25 10:37:08,988 - __main__ - INFO - Pr√©paration des features concurrentes (prix m√©dian)...
2025-11-25 10:37:09,140 - __main__ - INFO -    Features concurrentes calcul√©es sur J-45 √† J-60
2025-11-25 10:37:09,147 - __main__ - INFO - Construction des s√©ries Gap et Elasticity...
2025-11-25 10:37:11,743 - __main__ - INFO - Features concurrentes + Gap/Elasticity ajout√©es (10 features). Shape: (1415, 277)
2025-11-25 10:37:11,748 - __main__ - INFO - Ajout de ToF1 (TO final ann√©e N-1)...
2025-11-25 10:37:11,756 - __main__ - INFO -    ToF1 ajout√© : 1050 valeurs non-nulles sur 1416
2025-11-25 10:37:11,756 - __main__ - INFO - Ajout des features jours f√©ri√©s...
2025-11-25 10:37:12,317 - __main__ - INFO - Ajout des vacances scolaires...
2025-11-25 10:37:12,434 - __main__ - INFO - Ajout des weekends prolong√©s...
2025-11-25 10:37:12,453 - __main__ - INFO - Features jours f√©ri√©s et vacances ajout√©es. Shape: (1416, 286)
2025-11-25 10:37:12,453 - __main__ - INFO -    - Jours f√©ri√©s: 43 (3.04%)
2025-11-25 10:37:12,454 - __main__ - INFO -    - Jours de pont: 85 (6.00%)
2025-11-25 10:37:12,455 - __main__ - INFO -    - Distance au f√©ri√©: min=0, max=90, moyenne=30.3
2025-11-25 10:37:12,456 - __main__ - INFO -    - Vacances scolaires: 591 (41.74%)
2025-11-25 10:37:12,456 - __main__ - INFO -    - Weekends 3j: 57 (4.03%)
2025-11-25 10:37:12,456 - __main__ - INFO -    - Weekends 4j: 101 (7.13%)
2025-11-25 10:37:12,464 - __main__ - INFO - Cr√©ation des features et target...
2025-11-25 10:37:12,464 - __main__ - INFO - --------------------------------
2025-11-25 10:37:12,464 - __main__ - INFO - Horizon: 45
2025-11-25 10:37:12,465 - __main__ - INFO - --------------------------------
2025-11-25 10:37:12,465 - __main__ - INFO - df.columns: Index(['hotCode', 'stay_date', 'nb_observations', 'J-60', 'J-59', 'J-58',
       'J-57', 'J-56', 'J-55', 'J-54',
       ...
       'comp_trend_changes', 'month', 'dayofweek', 'ToF1', 'is_holiday_fr',
       'is_bridge_day', 'days_to_holiday', 'is_vacances_scolaires',
       'is_long_weekend_3j', 'is_long_weekend_4j'],
      dtype='object', length=286)
2025-11-25 10:37:12,467 - __main__ - INFO - nb_observations recalcul√© pour horizon=45
2025-11-25 10:37:12,468 - __main__ - INFO -    Minimum: 16
2025-11-25 10:37:12,468 - __main__ - INFO -    Maximum: 16
2025-11-25 10:37:12,469 - __main__ - INFO -    Moyenne: 16.0
2025-11-25 10:37:12,469 - __main__ - INFO - Nombre total de features: 55
2025-11-25 10:37:12,470 - __main__ - INFO -    - TO historiques: 15
2025-11-25 10:37:12,470 - __main__ - INFO -    - Features PM: 7
2025-11-25 10:37:12,471 - __main__ - INFO -    - Features Ant (anticipation): 6
2025-11-25 10:37:12,471 - __main__ - INFO -    - Features Ds (dur√©e s√©jour): 6
2025-11-25 10:37:12,471 - __main__ - INFO -    - Features concurrents: 6
2025-11-25 10:37:12,472 - __main__ - INFO -    - Features Gap/Elasticity: 4
2025-11-25 10:37:12,472 - __main__ - INFO -    - Autres features: 11
2025-11-25 10:37:12,493 - __main__ - WARNING - ‚ö†Ô∏è  Erreur lors de la sauvegarde des donn√©es d'entra√Ænement: [Errno 13] Permission denied: 'results/D09\\training_data_before_scaling.csv'
2025-11-25 10:37:12,494 - __main__ - INFO - X shape: (1416, 55), y shape: (1416,)
2025-11-25 10:37:12,494 - __main__ - INFO - ================================================================================
2025-11-25 10:37:12,494 - __main__ - INFO - RECHERCHE D'HYPERPARAM√àTRES (RANDOMIZED SEARCH)
2025-11-25 10:37:12,495 - __main__ - INFO - ================================================================================
2025-11-25 10:37:12,503 - __main__ - INFO - Train: (1132, 55), Validation: (284, 55)
2025-11-25 10:37:12,503 - __main__ - INFO - Configuration de la recherche:
2025-11-25 10:37:12,504 - __main__ - INFO -    - Nombre d'it√©rations: 30
2025-11-25 10:37:12,504 - __main__ - INFO -    - Cross-validation: 3 folds
2025-11-25 10:37:12,504 - __main__ - INFO -    - Nombre total d'entra√Ænements: 90
2025-11-25 10:37:12,504 - __main__ - INFO -    - M√©trique: neg_mean_absolute_error
2025-11-25 10:37:12,505 - __main__ - INFO - 
D√©marrage de la recherche d'hyperparam√®tres...
2025-11-25 10:38:33,266 - __main__ - INFO - ================================================================================
2025-11-25 10:38:33,267 - __main__ - INFO - R√âSULTATS DE LA RECHERCHE
2025-11-25 10:38:33,268 - __main__ - INFO - ================================================================================
2025-11-25 10:38:33,269 - __main__ - INFO - Meilleur score (MAE sur CV): 0.0947
2025-11-25 10:38:33,270 - __main__ - INFO - Meilleurs param√®tres trouv√©s:
2025-11-25 10:38:33,270 - __main__ - INFO -    - subsample: 0.9
2025-11-25 10:38:33,271 - __main__ - INFO -    - reg_lambda: 1.0
2025-11-25 10:38:33,271 - __main__ - INFO -    - reg_alpha: 0.5
2025-11-25 10:38:33,271 - __main__ - INFO -    - n_estimators: 500
2025-11-25 10:38:33,271 - __main__ - INFO -    - min_child_weight: 2
2025-11-25 10:38:33,272 - __main__ - INFO -    - max_depth: 6
2025-11-25 10:38:33,272 - __main__ - INFO -    - learning_rate: 0.05
2025-11-25 10:38:33,275 - __main__ - INFO -    - colsample_bytree: 0.95
2025-11-25 10:38:33,289 - __main__ - INFO - 
Performances sur validation:
2025-11-25 10:38:33,292 - __main__ - INFO -    - MAE: 0.0866
2025-11-25 10:38:33,293 - __main__ - INFO -    - R¬≤: 0.5542
2025-11-25 10:38:33,294 - __main__ - INFO - ================================================================================
2025-11-25 10:38:33,297 - __main__ - INFO - 
üîß Mise √† jour de la configuration avec les meilleurs param√®tres...
2025-11-25 10:38:33,298 - __main__ - INFO - Entra√Ænement du mod√®le XGBoost...
2025-11-25 10:38:33,311 - __main__ - INFO - Train: (1132, 55), Test: (284, 55)
2025-11-25 10:38:39,771 - __main__ - INFO - Mod√®le entra√Æn√© avec succ√®s
2025-11-25 10:38:39,785 - __main__ - INFO - üìä Test MAE: 0.0866
2025-11-25 10:38:39,785 - __main__ - INFO - üìä Test R¬≤: 0.5542
2025-11-25 10:38:39,786 - __main__ - INFO - √âvaluation du mod√®le...
2025-11-25 10:38:40,462 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_scatter_plot.png
2025-11-25 10:38:40,916 - __main__ - INFO - üìà Graphique sauvegard√©: results/D09\xgb_feature_importance.png
2025-11-25 10:38:40,936 - __main__ - INFO - Sauvegarde locale du mod√®le dans results/D09/models...
2025-11-25 10:38:40,973 - __main__ - INFO - üíæ Mod√®le sauvegard√©: results/D09/models\xgb_to_predictor.joblib
2025-11-25 10:38:40,973 - __main__ - INFO - üíæ Scaler sauvegard√©: results/D09/models\xgb_scaler.joblib
2025-11-25 10:38:40,974 - __main__ - INFO - üíæ Features sauvegard√©es: results/D09/models\feature_columns.txt
2025-11-25 10:38:41,946 - __main__ - INFO - ================================================================================
2025-11-25 10:38:41,947 - __main__ - INFO - ‚úÖ ENTRA√éNEMENT TERMIN√â AVEC SUCC√àS
2025-11-25 10:38:41,947 - __main__ - INFO - ================================================================================
2025-11-25 10:38:41,947 - __main__ - INFO - 
üìä M√âTRIQUES FINALES:
2025-11-25 10:38:41,947 - __main__ - INFO -    Train MAE: 0.0192
2025-11-25 10:38:41,948 - __main__ - INFO -    Train R¬≤:  0.9772
2025-11-25 10:38:41,948 - __main__ - INFO -    Test MAE:  0.0866
2025-11-25 10:38:41,948 - __main__ - INFO -    Test R¬≤:   0.5542
